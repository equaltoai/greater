import{j as Pt,k as xr,b as Re,a as c,f,c as de,d as _,l as ye,r as Kt,s as X,t as gt}from"./Dk8Y7fR_.js";import{t as U,k as It,m as Rt,B as wr,b1 as Sr,U as Bt,aa as Cr,ak as Mr,b0 as zr,aZ as Tr,_ as Er,a9 as ht,e as Ar,a as jr,p as ke,h as r,a6 as Q,b as v,s as g,r as u,d as xe,i as te,u as Ke,f as K,g as pe,A as vt,n as it,v as Tt,b2 as Lr,b3 as Or,b4 as Pr}from"./Bpv4puWN.js";import{s as he,a as We,c as ct}from"./DHI4pdy5.js";import{p as T,r as Ye,s as Ir}from"./BEwztiVq.js";import{h as Rr,a as $,l as Ve}from"./C2zQ9FVj.js";import{a as $e,s as I,b as Ue,G as Br,e as Qe,i as ut,c as Fr,d as Nr,f as Dr}from"./BjNCs7Y_.js";import{o as Xe,a as Ur}from"./Ci0fFNKZ.js";import{i as x}from"./_LYS6rzG.js";import{b as dt,c as at}from"./B358fzip.js";import{u as Wr,s as qr,r as Hr,a as Yt,b as Jt,c as Zt,m as Xt,d as $t,e as Ft}from"./Ba6e7e3c.js";import"./BwIUDySL.js";import{d as Vr,w as Qr}from"./Ge1YCfxC.js";import{g as Oe}from"./CR55hjPZ.js";function zt(o,e,t=!1,a=!1,s=!1){var i=o,n="";U(()=>{var l=wr;if(n===(n=e()??"")){It&&Rt();return}if(l.nodes_start!==null&&(Sr(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),n!==""){if(It){Bt.data;for(var d=Rt(),h=d;d!==null&&(d.nodeType!==Cr||d.data!=="");)h=d,d=Mr(d);if(d===null)throw zr(),Tr;Pt(Bt,h),i=Er(d);return}var m=n+"";t?m=`<svg>${m}</svg>`:a&&(m=`<math>${m}</math>`);var p=xr(m);if((t||a)&&(p=ht(p)),Pt(ht(p),p.lastChild),t||a)for(;ht(p);)i.before(ht(p));else i.before(p)}})}function Gr(o,e,t){Ar(()=>{var a=jr(()=>e(o,t?.())||{});if(a?.destroy)return()=>a.destroy()})}let Kr=0;function Yr(o="greater"){return`${o}-${++Kr}`}function Jr(o){return o.key==="Enter"||o.key===" "||o.key==="Spacebar"}function Zr(o={}){const{type:e="button",disabled:t=!1,loading:a=!1,pressed:s=!1,id:i,label:n,onClick:l,onPressedChange:d,onKeyDown:h,onFocus:m,onBlur:p,onDestroy:C}=o;let A=null;const B={disabled:t,loading:a,pressed:s,id:i||Yr("button"),focused:!1},w=new Proxy(B,{set(k,F,ue){const me=k[F];return k[F]=ue,F==="pressed"&&me!==ue&&d?.(ue),q(),!0}});function q(){A&&H(A)}function y(k){if(w.disabled||w.loading){k.preventDefault(),k.stopPropagation();return}l?.(k)}function M(k){if(!(w.disabled||w.loading)){if(Jr(k)&&(k.preventDefault(),A&&l)){const F=new MouseEvent("click",{bubbles:!0,cancelable:!0});y(F)}h?.(k)}}function R(k){w.focused=!0,m?.(k)}function G(k){w.focused=!1,p?.(k)}function D(k){return A=k,k.setAttribute("type",e),k.id=w.id,H(k),k.addEventListener("click",y),k.addEventListener("keydown",M),k.addEventListener("focus",R),k.addEventListener("blur",G),{update(){H(k)},destroy(){k.removeEventListener("click",y),k.removeEventListener("keydown",M),k.removeEventListener("focus",R),k.removeEventListener("blur",G),A=null,C?.()}}}function H(k){const F=!w.disabled&&!w.loading;k.disabled=w.disabled||w.loading,k.setAttribute("aria-disabled",String(w.disabled||w.loading)),k.setAttribute("aria-busy",String(w.loading)),k.setAttribute("aria-pressed",String(w.pressed)),n&&k.setAttribute("aria-label",n),F?k.removeAttribute("tabindex"):k.setAttribute("tabindex","-1")}function P(){A&&!w.disabled&&!w.loading&&A.click()}function S(){A&&!w.disabled&&A.focus()}function J(){A&&A.blur()}function j(){w.pressed=!w.pressed}function re(k){w.disabled=k}function ne(k){w.loading=k}function O(k){w.pressed=k}function L(){if(A){const k=A;k.removeEventListener("click",y),k.removeEventListener("keydown",M),k.removeEventListener("focus",R),k.removeEventListener("blur",G),A=null}C?.()}return{state:w,actions:{button:D},helpers:{click:P,focus:S,blur:J,toggle:j,setDisabled:re,setLoading:ne,setPressed:O,destroy:L}}}function st(o,e,t){let a=t.initialDeps??[],s;function i(){var n,l,d,h;let m;t.key&&((n=t.debug)!=null&&n.call(t))&&(m=Date.now());const p=o();if(!(p.length!==a.length||p.some((B,w)=>a[w]!==B)))return s;a=p;let A;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(A=Date.now()),s=e(...p),t.key&&((d=t.debug)!=null&&d.call(t))){const B=Math.round((Date.now()-m)*100)/100,w=Math.round((Date.now()-A)*100)/100,q=w/16,y=(M,R)=>{for(M=String(M);M.length<R;)M=" "+M;return M};console.info(`%c‚è± ${y(w,5)} /${y(B,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*q,120))}deg 100% 31%);`,t?.key)}return(h=t?.onChange)==null||h.call(t,s),s}return i.updateDeps=n=>{a=n},i}function Nt(o,e){if(o===void 0)throw new Error("Unexpected undefined");return o}const Xr=(o,e)=>Math.abs(o-e)<1.01,$r=(o,e,t)=>{let a;return function(...s){o.clearTimeout(a),a=o.setTimeout(()=>e.apply(this,s),t)}},Dt=o=>{const{offsetWidth:e,offsetHeight:t}=o;return{width:e,height:t}},ei=o=>o,ti=o=>{const e=Math.max(o.startIndex-o.overscan,0),t=Math.min(o.endIndex+o.overscan,o.count-1),a=[];for(let s=e;s<=t;s++)a.push(s);return a},ri=(o,e)=>{const t=o.scrollElement;if(!t)return;const a=o.targetWindow;if(!a)return;const s=n=>{const{width:l,height:d}=n;e({width:Math.round(l),height:Math.round(d)})};if(s(Dt(t)),!a.ResizeObserver)return()=>{};const i=new a.ResizeObserver(n=>{const l=()=>{const d=n[0];if(d?.borderBoxSize){const h=d.borderBoxSize[0];if(h){s({width:h.inlineSize,height:h.blockSize});return}}s(Dt(t))};o.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},Ut={passive:!0},Wt=typeof window>"u"?!0:"onscrollend"in window,ii=(o,e)=>{const t=o.scrollElement;if(!t)return;const a=o.targetWindow;if(!a)return;let s=0;const i=o.options.useScrollendEvent&&Wt?()=>{}:$r(a,()=>{e(s,!1)},o.options.isScrollingResetDelay),n=m=>()=>{const{horizontal:p,isRtl:C}=o.options;s=p?t.scrollLeft*(C&&-1||1):t.scrollTop,i(),e(s,m)},l=n(!0),d=n(!1);d(),t.addEventListener("scroll",l,Ut);const h=o.options.useScrollendEvent&&Wt;return h&&t.addEventListener("scrollend",d,Ut),()=>{t.removeEventListener("scroll",l),h&&t.removeEventListener("scrollend",d)}},si=(o,e,t)=>{if(e?.borderBoxSize){const a=e.borderBoxSize[0];if(a)return Math.round(a[t.options.horizontal?"inlineSize":"blockSize"])}return o[t.options.horizontal?"offsetWidth":"offsetHeight"]},ai=(o,{adjustments:e=0,behavior:t},a)=>{var s,i;const n=o+e;(i=(s=a.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[a.options.horizontal?"left":"top"]:n,behavior:t})};class ni{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const a=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const n=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()})}));return{disconnect:()=>{var s;(s=a())==null||s.disconnect(),t=null},observe:s=>{var i;return(i=a())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=a())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([a,s])=>{typeof s>"u"&&delete t[a]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ei,rangeExtractor:ti,onChange:()=>{},measureElement:si,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var a,s;(s=(a=this.options).onChange)==null||s.call(a,this,t)},this.maybeNotify=st(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const a=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==a){if(this.cleanup(),!a){this.maybeNotify();return}this.scrollElement=a,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,a)=>{const s=new Map,i=new Map;for(let n=a-1;n>=0;n--){const l=t[n];if(s.has(l.lane))continue;const d=i.get(l.lane);if(d==null||l.end>d.end?i.set(l.lane,l):l.end<d.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((n,l)=>n.end===l.end?n.index-l.index:n.end-l.end)[0]:void 0},this.getMeasurementOptions=st(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,a,s,i,n)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:a,scrollMargin:s,getItemKey:i,enabled:n}),{key:!1}),this.getMeasurements=st(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:a,scrollMargin:s,getItemKey:i,enabled:n},l)=>{if(!n)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,d);for(let m=d;m<t;m++){const p=i(m),C=this.options.lanes===1?h[m-1]:this.getFurthestMeasurement(h,m),A=C?C.end+this.options.gap:a+s,B=l.get(p),w=typeof B=="number"?B:this.options.estimateSize(m),q=A+w,y=C?C.lane:m%this.options.lanes;h[m]={index:m,start:A,size:w,end:q,key:p,lane:y}}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=st(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,a,s,i)=>this.range=t.length>0&&a>0?oi({measurements:t,outerSize:a,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=st(()=>{let t=null,a=null;const s=this.calculateRange();return s&&(t=s.startIndex,a=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,a]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,a]},(t,a,s,i,n)=>i===null||n===null?[]:t({startIndex:i,endIndex:n,overscan:a,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const a=this.options.indexAttribute,s=t.getAttribute(a);return s?parseInt(s,10):(console.warn(`Missing attribute name '${a}={index}' on measured element.`),-1)},this._measureElement=(t,a)=>{const s=this.indexFromElement(t),i=this.measurementsCache[s];if(!i)return;const n=i.key,l=this.elementsCache.get(n);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(n,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,a,this))},this.resizeItem=(t,a)=>{const s=this.measurementsCache[t];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,n=a-i;n!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,n,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,a)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((a,s)=>{a.isConnected||(this.observer.unobserve(a),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=st(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,a)=>{const s=[];for(let i=0,n=t.length;i<n;i++){const l=t[i],d=a[l];s.push(d)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const a=this.getMeasurements();if(a.length!==0)return Nt(a[er(0,a.length-1,s=>Nt(a[s]).start,t)])},this.getOffsetForAlignment=(t,a,s=0)=>{const i=this.getSize(),n=this.getScrollOffset();a==="auto"&&(a=t>=n+i?"end":"start"),a==="center"?t+=(s-i)/2:a==="end"&&(t-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,a="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const i=this.getSize(),n=this.getScrollOffset();if(a==="auto")if(s.end>=n+i-this.options.scrollPaddingEnd)a="end";else if(s.start<=n+this.options.scrollPaddingStart)a="start";else return[n,a];const l=a==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,a,s.size),a]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:a="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,a),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:a="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let i=0;const n=10,l=h=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(t,h);if(!m){console.warn("Failed to get offset for index:",t);return}const[p,C]=m;this._scrollToOffset(p,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const A=this.getScrollOffset(),B=this.getOffsetForIndex(t,C);if(!B){console.warn("Failed to get offset for index:",t);return}Xr(B[0],A)||d(C)})},d=h=>{this.targetWindow&&(i++,i<n?this.targetWindow.requestAnimationFrame(()=>l(h)):console.warn(`Failed to scroll to index ${t} after ${n} attempts.`))};l(a)},this.scrollBy=(t,{behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:a})},this.getTotalSize=()=>{var t;const a=this.getMeasurements();let s;if(a.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=a[a.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let n=a.length-1;for(;n>=0&&i.some(l=>l===null);){const l=a[n];i[l.lane]===null&&(i[l.lane]=l.end),n--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:a,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:a},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const er=(o,e,t,a)=>{for(;o<=e;){const s=(o+e)/2|0,i=t(s);if(i<a)o=s+1;else if(i>a)e=s-1;else return s}return o>0?o-1:0};function oi({measurements:o,outerSize:e,scrollOffset:t,lanes:a}){const s=o.length-1,i=d=>o[d].start;if(o.length<=a)return{startIndex:0,endIndex:s};let n=er(0,s,i,t),l=n;if(a===1)for(;l<s&&o[l].end<t+e;)l++;else if(a>1){const d=Array(a).fill(0);for(;l<s&&d.some(m=>m<t+e);){const m=o[l];d[m.lane]=m.end,l++}const h=Array(a).fill(t+e);for(;n>=0&&h.some(m=>m>=t);){const m=o[n];h[m.lane]=m.start,n--}n=Math.max(0,n-n%a),l=Math.min(s,l+(a-1-l%a))}return{startIndex:n,endIndex:l}}function li(o){const e=new ni(o),t=e.setOptions;let a;const s=i=>{const n={...e.options,...i,onChange:i.onChange};t({...n,onChange:(l,d)=>{a.set(l),n.onChange?.(l,d)}}),e._willUpdate()};return a=Qr(e,()=>(s(o),e._didMount())),Vr(a,i=>Object.assign(i,{setOptions:s}))}function ci(o){return li({observeElementRect:ri,observeElementOffset:ii,scrollToFn:ai,...o})}var di=Re('<svg><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>');function ui(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=di();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-bookmark ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var vi=Re('<svg><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>');function hi(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=vi();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-home ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var fi=Re('<svg><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>');function mi(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=fi();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-bell ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var gi=Re('<svg><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>');function qt(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=gi();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-user ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var _i=Re('<svg><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>');function pi(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=_i();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-settings ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var bi=Re('<svg><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>');function yi(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=bi();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-list ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var ki=Re('<svg><rect x="3" y="7" width="7" height="15" rx="1"></rect><rect x="14" y="3" width="7" height="19" rx="1"></rect><line x1="6" y1="11" x2="6" y2="11.01"></line><line x1="6" y1="15" x2="6" y2="15.01"></line><line x1="17.5" y1="7" x2="17.5" y2="7.01"></line><line x1="17.5" y1="11" x2="17.5" y2="11.01"></line><line x1="17.5" y1="15" x2="17.5" y2="15.01"></line><line x1="17.5" y1="19" x2="17.5" y2="19.01"></line></svg>');function Ht(o,e){let t=T(e,"size",3,24),a=T(e,"color",3,"currentColor"),s=T(e,"strokeWidth",3,2),i=T(e,"class",3,""),n=Ye(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var l=ki();$e(l,()=>({xmlns:"http://www.w3.org/2000/svg",width:t(),height:t(),viewBox:"0 0 24 24",fill:"none",stroke:a(),"stroke-width":s(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-building ${i()??""}`,"aria-hidden":"true",...n})),c(o,l)}var xi=f('<span class="gr-button__prefix"><!></span>'),wi=f('<span class="gr-button__spinner" aria-hidden="true"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"></path></svg></span>'),Si=f('<span class="gr-button__suffix"><!></span>'),Ci=f("<button><!> <!> <span><!></span> <!></button>");function Mi(o,e){ke(e,!0);let t=T(e,"variant",3,"solid"),a=T(e,"size",3,"md"),s=T(e,"type",3,"button"),i=T(e,"disabled",3,!1),n=T(e,"loading",3,!1),l=T(e,"class",3,""),d=Ye(e,["$$slots","$$events","$$legacy","variant","size","type","disabled","loading","class","children","prefix","suffix","onclick","onkeydown"]);const h=Q(()=>()=>["gr-button",`gr-button--${t()}`,`gr-button--${a()}`,n()&&"gr-button--loading",i()&&"gr-button--disabled",l()].filter(Boolean).join(" "));function m(P){(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),!i()&&!n()&&e.onclick&&e.onclick(P)),e.onkeydown?.(P)}function p(P){if(i()||n()){P.preventDefault(),P.stopPropagation();return}e.onclick?.(P)}var C=Ci();$e(C,P=>({class:P,type:s(),disabled:i()||n(),"aria-disabled":i()||n(),"aria-busy":n(),tabindex:i()?-1:0,onclick:p,onkeydown:m,...d}),[()=>r(h)()]);var A=v(C);{var B=P=>{var S=xi(),J=v(S);We(J,()=>e.prefix),u(S),c(P,S)};x(A,P=>{e.prefix&&P(B)})}var w=g(A,2);{var q=P=>{var S=wi();c(P,S)};x(w,P=>{n()&&P(q)})}var y=g(w,2);let M;var R=v(y);{var G=P=>{var S=de(),J=te(S);We(J,()=>e.children),c(P,S)};x(R,P=>{e.children&&P(G)})}u(y);var D=g(y,2);{var H=P=>{var S=Si(),J=v(S);We(J,()=>e.suffix),u(S),c(P,S)};x(D,P=>{e.suffix&&P(H)})}u(C),U(()=>M=he(y,1,"gr-button__content",null,M,{"gr-button__content--loading":n()})),c(o,C),xe()}_(["keydown","click"]);_(["input","change"]);_(["change"]);_(["change"]);_(["change"]);_(["change","click"]);var zi=f('<div class="gr-avatar__loading" aria-hidden="true"><svg class="gr-avatar__spinner" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"></path></svg></div>'),Ti=f('<span class="gr-avatar__initials"> </span>'),Ei=Re('<svg class="gr-avatar__fallback-icon" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg>'),Ai=f('<div class="gr-avatar__placeholder" aria-hidden="true"><!></div>'),ji=f('<img class="gr-avatar__image"/> <!>',1),Li=f('<span class="gr-avatar__initials"> </span>'),Oi=Re('<svg class="gr-avatar__fallback-icon" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg>'),Pi=f('<div class="gr-avatar__placeholder" aria-hidden="true"><!></div>'),Ii=f('<div role="status"></div>'),Ri=f("<!> <!>",1),Bi=f('<button type="button"><!></button>'),Fi=f("<div><!></div>");function Ni(o,e){ke(e,!0);const t=O=>{var L=Ri(),k=te(L);{var F=E=>{var Y=zi();c(E,Y)},ue=E=>{var Y=de(),oe=te(Y);{var fe=ie=>{var se=ji(),le=te(se);dt(le,Z=>K(q,Z),()=>r(q));var Me=g(le,2);{var be=Z=>{var V=Ai(),ee=v(V);{var ve=ce=>{var ae=Ti(),Ee=v(ae,!0);u(ae),U(qe=>{Ue(ae,`background-color: ${qe??""}`),X(Ee,r(R))},[()=>r(G)()]),c(ce,ae)},ge=ce=>{var ae=de(),Ee=te(ae);{var qe=je=>{var Pe=de(),Je=te(Pe);We(Je,()=>e.fallback),c(je,Pe)},Ge=je=>{var Pe=Ei();c(je,Pe)};x(Ee,je=>{e.fallback?je(qe):je(Ge,!1)},!0)}c(ce,ae)};x(ee,ce=>{r(R)?ce(ve):ce(ge,!1)})}u(V),c(Z,V)};x(Me,Z=>{r(B)||Z(be)})}U(()=>{I(le,"src",e.src),I(le,"alt",e.alt||a()||"Avatar"),Ue(le,`display: ${r(B)?"block":"none"}`)}),ye("load",le,D),ye("error",le,H),Kt(le),c(ie,se)},we=ie=>{var se=Pi(),le=v(se);{var Me=Z=>{var V=Li(),ee=v(V,!0);u(V),U(ve=>{Ue(V,`background-color: ${ve??""}; color: white;`),X(ee,r(R))},[()=>r(G)()]),c(Z,V)},be=Z=>{var V=de(),ee=te(V);{var ve=ce=>{var ae=de(),Ee=te(ae);We(Ee,()=>e.fallback),c(ce,ae)},ge=ce=>{var ae=Oi();c(ce,ae)};x(ee,ce=>{e.fallback?ce(ve):ce(ge,!1)},!0)}c(Z,V)};x(le,Z=>{r(R)?Z(Me):Z(be,!1)})}u(se),c(ie,se)};x(oe,ie=>{e.src&&!r(w)?ie(fe):ie(we,!1)},!0)}c(E,Y)};x(k,E=>{n()?E(F):E(ue,!1)})}var me=g(k,2);{var W=E=>{var Y=Ii();U(oe=>{he(Y,1,oe),I(Y,"id",S),I(Y,"aria-label",`Status: ${e.status}`)},[()=>ct(r(M)())]),c(E,Y)};x(me,E=>{e.status&&E(W)})}c(O,L)};let a=T(e,"name",3,""),s=T(e,"size",3,"md"),i=T(e,"shape",3,"circle"),n=T(e,"loading",3,!1),l=T(e,"statusPosition",3,"bottom-right"),d=T(e,"class",3,"");const h=new Set(["button","checkbox","combobox","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","searchbox","slider","spinbutton","switch","tab","textbox","treeitem"]),m=Q(()=>()=>{if(e.tabindex===void 0||e.tabindex===null)return;if(typeof e.tabindex=="number")return Number.isFinite(e.tabindex)?e.tabindex:void 0;const O=Number(e.tabindex);return Number.isFinite(O)?O:void 0}),p=Q(()=>()=>!!(e.onclick||e.onkeydown||e.onkeyup)),C=O=>O?h.has(O):!1,A=Q(()=>()=>!!(C(e.role)||r(p)||r(m)!==void 0&&r(m)>=0));let B=pe(!1),w=pe(!1),q=pe(null);const y=Q(()=>()=>["gr-avatar",`gr-avatar--${s()}`,`gr-avatar--${i()}`,n()&&"gr-avatar--loading",e.status&&"gr-avatar--has-status",d()].filter(Boolean).join(" ")),M=Q(()=>()=>e.status?["gr-avatar__status",`gr-avatar__status--${e.status}`,`gr-avatar__status--${l()}`].filter(Boolean).join(" "):""),R=Q(()=>()=>{if(!a())return"";const O=a().trim().split(/\s+/);return O.length===1?O[0].substring(0,2).toUpperCase():O.slice(0,2).map(L=>L.charAt(0)).join("").toUpperCase()}),G=Q(()=>()=>{if(!a())return"var(--gr-semantic-background-secondary)";let O=0;for(let k=0;k<a().length;k++)O=a().charCodeAt(k)+((O<<5)-O);return`hsl(${Math.abs(O)%360}, 65%, 55%)`});function D(){K(B,!0),K(w,!1)}function H(){K(B,!1),K(w,!0)}Ke(()=>{e.src&&(K(B,!1),K(w,!1))});const P=Q(()=>()=>e.alt?e.alt:a()?a():"Avatar"),S=`avatar-status-${Math.random().toString(36).substr(2,9)}`;var J=de(),j=te(J);{var re=O=>{var L=Bi();L.__click=function(...F){e.onclick?.apply(this,F)},L.__keydown=function(...F){e.onkeydown?.apply(this,F)},L.__keyup=function(...F){e.onkeyup?.apply(this,F)};var k=v(L);t(k),u(L),U((F,ue)=>{he(L,1,F),I(L,"aria-label",ue),I(L,"aria-labelledby",e["aria-labelledby"]),I(L,"aria-describedby",e["aria-describedby"]??(e.status?S:void 0)),I(L,"id",e.id),Ue(L,e.style),I(L,"role",e.role),I(L,"tabindex",r(m))},[()=>ct(r(y)()),()=>e["aria-label"]??r(P)()]),ye("mouseenter",L,function(...F){e.onmouseenter?.apply(this,F)}),ye("mouseleave",L,function(...F){e.onmouseleave?.apply(this,F)}),ye("focus",L,function(...F){e.onfocus?.apply(this,F)}),ye("blur",L,function(...F){e.onblur?.apply(this,F)}),c(O,L)},ne=O=>{var L=Fi();L.__click=function(...F){e.onclick?.apply(this,F)},L.__keydown=function(...F){e.onkeydown?.apply(this,F)},L.__keyup=function(...F){e.onkeyup?.apply(this,F)};var k=v(L);t(k),u(L),U((F,ue)=>{he(L,1,F),I(L,"role",e.role??"img"),I(L,"aria-label",ue),I(L,"aria-labelledby",e["aria-labelledby"]),I(L,"aria-describedby",e["aria-describedby"]??(e.status?S:void 0)),I(L,"id",e.id),Ue(L,e.style)},[()=>ct(r(y)()),()=>e["aria-label"]??r(P)()]),ye("mouseenter",L,function(...F){e.onmouseenter?.apply(this,F)}),ye("mouseleave",L,function(...F){e.onmouseleave?.apply(this,F)}),ye("focus",L,function(...F){e.onfocus?.apply(this,F)}),ye("blur",L,function(...F){e.onblur?.apply(this,F)}),c(O,L)};x(j,O=>{r(A)?O(re):O(ne,!1)})}c(o,J),xe()}_(["click","keydown","keyup"]);var Di=f('<div class="gr-skeleton__wave"></div>'),Ui=f('<button type="button"><!></button>'),Wi=f('<div aria-hidden="true"><!></div>');function De(o,e){ke(e,!0);const t=M=>{var R=de(),G=te(R);{var D=H=>{var P=Di();c(H,P)};x(G,H=>{s()==="wave"&&H(D)})}c(M,R)};let a=T(e,"variant",3,"text"),s=T(e,"animation",3,"pulse"),i=T(e,"class",3,""),n=T(e,"loading",3,!0);const l=new Set(["button","checkbox","combobox","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","searchbox","slider","spinbutton","switch","tab","textbox","treeitem"]),d=Q(()=>()=>{if(e.tabindex===void 0||e.tabindex===null)return;if(typeof e.tabindex=="number")return Number.isFinite(e.tabindex)?e.tabindex:void 0;const M=Number(e.tabindex);return Number.isFinite(M)?M:void 0}),h=Q(()=>()=>!!(e.onclick||e.onkeydown||e.onkeyup)),m=M=>M?l.has(M):!1,p=Q(()=>()=>!!(m(e.role)||r(h)||r(d)!==void 0&&r(d)>=0)),C=Q(()=>()=>["gr-skeleton",`gr-skeleton--${a()}`,s()!=="none"&&`gr-skeleton--${s()}`,i()].filter(Boolean).join(" ")),A=Q(()=>()=>{const M={};if(e.width!==void 0&&(M.width=typeof e.width=="number"?`${e.width}px`:e.width),e.height!==void 0&&(M.height=typeof e.height=="number"?`${e.height}px`:e.height),a()==="text")e.height||(M.height="1em"),e.width||(M.width="100%");else if(a()==="circular"){const G=e.width||e.height||"40px";M.width=typeof G=="number"?`${G}px`:G,M.height=typeof G=="number"?`${G}px`:G}else(a()==="rectangular"||a()==="rounded")&&(e.width||(M.width="100%"),e.height||(M.height="120px"));const R=Object.entries(M).map(([G,D])=>`${G}: ${D}`).join("; ");return e.style?`${R}; ${e.style}`:R});var B=de(),w=te(B);{var q=M=>{var R=de(),G=te(R);{var D=P=>{var S=Ui();S.__click=function(...j){e.onclick?.apply(this,j)},S.__keydown=function(...j){e.onkeydown?.apply(this,j)},S.__keyup=function(...j){e.onkeyup?.apply(this,j)};var J=v(S);t(J),u(S),U((j,re)=>{he(S,1,j),Ue(S,re),I(S,"role",e.role),I(S,"aria-label",e["aria-label"]??"Loading"),I(S,"aria-labelledby",e["aria-labelledby"]),I(S,"aria-describedby",e["aria-describedby"]),I(S,"id",e.id),I(S,"tabindex",r(d))},[()=>ct(r(C)()),()=>r(A)()]),ye("mouseenter",S,function(...j){e.onmouseenter?.apply(this,j)}),ye("mouseleave",S,function(...j){e.onmouseleave?.apply(this,j)}),ye("focus",S,function(...j){e.onfocus?.apply(this,j)}),ye("blur",S,function(...j){e.onblur?.apply(this,j)}),c(P,S)},H=P=>{var S=Wi();S.__click=function(...j){e.onclick?.apply(this,j)},S.__keydown=function(...j){e.onkeydown?.apply(this,j)},S.__keyup=function(...j){e.onkeyup?.apply(this,j)};var J=v(S);t(J),u(S),U((j,re)=>{he(S,1,j),Ue(S,re),I(S,"role",e.role??"status"),I(S,"aria-label",e["aria-label"]??"Loading"),I(S,"aria-labelledby",e["aria-labelledby"]),I(S,"aria-describedby",e["aria-describedby"]),I(S,"id",e.id)},[()=>ct(r(C)()),()=>r(A)()]),ye("mouseenter",S,function(...j){e.onmouseenter?.apply(this,j)}),ye("mouseleave",S,function(...j){e.onmouseleave?.apply(this,j)}),ye("focus",S,function(...j){e.onfocus?.apply(this,j)}),ye("blur",S,function(...j){e.onblur?.apply(this,j)}),c(P,S)};x(G,P=>{r(p)?P(D):P(H,!1)})}c(M,R)},y=M=>{var R=de(),G=te(R);{var D=H=>{var P=de(),S=te(P);We(S,()=>e.children),c(H,P)};x(G,H=>{e.children&&H(D)},!0)}c(M,R)};x(w,M=>{n()?M(q):M(y,!1)})}c(o,B),xe()}_(["click","keydown","keyup"]);_(["click","keydown"]);_(["click","keydown"]);const Vt="gr-preferences-v1",ft={colorScheme:"auto",density:"comfortable",fontSize:"medium",motion:"normal",customColors:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#ec4899"},highContrastMode:!1,fontScale:1};function _t(o){return{...o,customColors:{...o.customColors}}}function wt(o,e){const t={...o,...e};return t.customColors={...o.customColors,...e.customColors??{}},_t(t)}let qi=class{constructor(){this._preferences=_t(ft),this._systemColorScheme="light",this._systemMotion="normal",this._systemHighContrast=!1,this.loadPreferences(),this.setupSystemPreferenceDetection(),this.applyTheme()}get preferences(){return _t(this._preferences)}get state(){const{customColors:e,...t}=this._preferences;return{...t,customColors:{...e},systemColorScheme:this._systemColorScheme,systemMotion:this._systemMotion,systemHighContrast:this._systemHighContrast,resolvedColorScheme:this.resolvedColorScheme}}get resolvedColorScheme(){return this._preferences.highContrastMode||this._systemHighContrast?"high-contrast":this._preferences.colorScheme==="auto"?this._systemColorScheme:this._preferences.colorScheme==="high-contrast"?"high-contrast":this._preferences.colorScheme}get resolvedMotion(){return this._systemMotion==="reduced"?"reduced":this._preferences.motion}setColorScheme(e){this._preferences.colorScheme=e,this.saveAndApply()}setDensity(e){this._preferences.density=e,this.saveAndApply()}setFontSize(e){this._preferences.fontSize=e,this.saveAndApply()}setFontScale(e){this._preferences.fontScale=Math.max(.85,Math.min(1.5,e)),this.saveAndApply()}setMotion(e){this._preferences.motion=e,this.saveAndApply()}setCustomColors(e){this._preferences.customColors={...this._preferences.customColors,...e},this.saveAndApply()}setHighContrastMode(e){this._preferences.highContrastMode=e,this.saveAndApply()}updatePreferences(e){this._preferences=wt(this._preferences,e),this.saveAndApply()}reset(){this._preferences=_t(ft),this.saveAndApply()}export(){return JSON.stringify(this._preferences,null,2)}import(e){try{const t=JSON.parse(e);return this.validatePreferences(t)?(this._preferences=wt(ft,t),this.saveAndApply(),!0):!1}catch{return!1}}loadPreferences(){if(!(typeof window>"u"))try{const e=localStorage.getItem(Vt);if(e){const t=JSON.parse(e);this.validatePreferences(t)&&(this._preferences=wt(ft,t))}}catch(e){console.warn("Failed to load preferences from localStorage:",e)}}savePreferences(){if(!(typeof window>"u"))try{localStorage.setItem(Vt,JSON.stringify(this._preferences))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}}saveAndApply(){this.savePreferences(),this.applyTheme()}validatePreferences(e){const t=["light","dark","high-contrast","auto"],a=["compact","comfortable","spacious"],s=["small","medium","large"],i=["normal","reduced"];return!(e.colorScheme&&!t.includes(e.colorScheme)||e.density&&!a.includes(e.density)||e.fontSize&&!s.includes(e.fontSize)||e.motion&&!i.includes(e.motion))}setupSystemPreferenceDetection(){typeof window>"u"||(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._systemColorScheme=this.darkModeQuery.matches?"dark":"light",this.darkModeQuery.addEventListener("change",e=>{this._systemColorScheme=e.matches?"dark":"light",this._preferences.colorScheme==="auto"&&this.applyTheme()}),this.reducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this._systemMotion=this.reducedMotionQuery.matches?"reduced":"normal",this.reducedMotionQuery.addEventListener("change",e=>{this._systemMotion=e.matches?"reduced":"normal",this.applyTheme()}),this.highContrastQuery=window.matchMedia("(prefers-contrast: high)"),this._systemHighContrast=this.highContrastQuery.matches,this.highContrastQuery.addEventListener("change",e=>{this._systemHighContrast=e.matches,this.applyTheme()}))}applyTheme(){if(typeof window>"u")return;const e=document.documentElement;e.setAttribute("data-theme",this.resolvedColorScheme),e.setAttribute("data-density",this._preferences.density),e.setAttribute("data-font-size",this._preferences.fontSize),e.setAttribute("data-motion",this.resolvedMotion),this.applyCustomProperties()}applyCustomProperties(){if(typeof window>"u")return;const e=document.documentElement;this._preferences.customColors.primary&&e.style.setProperty("--gr-custom-primary",this._preferences.customColors.primary),this._preferences.customColors.secondary&&e.style.setProperty("--gr-custom-secondary",this._preferences.customColors.secondary),this._preferences.customColors.accent&&e.style.setProperty("--gr-custom-accent",this._preferences.customColors.accent),e.style.setProperty("--gr-font-scale",String(this._preferences.fontScale));const t={compact:.85,comfortable:1,spacious:1.2};e.style.setProperty("--gr-density-scale",String(t[this._preferences.density]))}destroy(){this.darkModeQuery}};new qi;_(["click","change","input"]);var Hi=f('<meta name="description"/> <meta property="og:title"/> <meta property="og:description"/>',1),Vi=f('<div class="base-layout svelte-1q4t6f0"><!></div>');function Qi(o,e){ke(e,!0);let t=T(e,"title",3,"Greater"),a=T(e,"description",3,"A modern Mastodon client");Ke(()=>{typeof document<"u"&&(document.title=t())});var s=Vi();Rr("1q4t6f0",n=>{var l=Hi(),d=te(l),h=g(d,2),m=g(h,2);U(()=>{I(d,"content",a()),I(h,"content",t()),I(m,"content",a())}),c(n,l)});var i=v(s);We(i,()=>e.children),u(s),c(o,s),xe()}var Gi=f('<img class="user-avatar svelte-jxkij"/>'),Ki=f('<div class="user-avatar-icon svelte-jxkij"><!></div>'),Yi=f('<div class="user-menu svelte-jxkij"><!> <div class="user-info svelte-jxkij"><div class="user-name svelte-jxkij"> </div> <div class="user-handle svelte-jxkij"> </div></div></div>'),Ji=f('<a href="/auth/login" class="sign-in-button svelte-jxkij"><!> <span>Sign In</span></a>'),Zi=f('<span class="active-indicator svelte-jxkij"></span>'),Xi=f('<span class="badge svelte-jxkij"> </span>'),$i=f('<li><a><!> <span class="nav-icon svelte-jxkij"><!> <!></span> <span class="nav-label svelte-jxkij"> </span></a></li>'),es=f('<div class="compose-button-wrapper svelte-jxkij"><a href="/compose" class="compose-button svelte-jxkij"><span class="compose-icon svelte-jxkij">‚úèÔ∏è</span> <span>Compose</span></a></div>'),ts=f('<span class="mobile-indicator svelte-jxkij"></span>'),rs=f('<span class="mobile-indicator svelte-jxkij"></span>'),is=f('<span class="mobile-indicator svelte-jxkij"></span>'),ss=f('<span class="mobile-badge svelte-jxkij"> </span>'),as=f('<span class="mobile-indicator svelte-jxkij"></span>'),ns=f('<nav class="nav svelte-jxkij"><div class="user-section svelte-jxkij"><!></div> <ul class="nav-list svelte-jxkij"></ul> <!></nav> <nav class="mobile-nav svelte-jxkij"><a href="/home"><!> <span>üè†</span></a> <a href="/local"><!> <!></a> <a href="/notifications"><!> <span class="mobile-icon-wrapper svelte-jxkij">üîî <!></span></a> <a href="/compose" class="mobile-compose-button svelte-jxkij"><span>‚úèÔ∏è</span></a> <a href="/settings"><!> <span>‚öôÔ∏è</span></a></nav>',1);function os(o,e){ke(e,!0);const t=[{href:"/local",label:"Local",icon:Ht},{href:"/federated",label:"Federated",icon:Br}],a=[{href:"/home",label:"Home",icon:hi,exact:!0},{href:"/notifications",label:"Notifications",icon:mi},{href:"/bookmarks",label:"Bookmarks",icon:ui},{href:"/lists",label:"Lists",icon:yi},{href:"/settings",label:"Settings",icon:pi}];let s=pe(vt(t));Ke(()=>{$.isAuthenticated?K(s,[...a.slice(0,1),...t,...a.slice(1)],!0):K(s,t,!0)});let i=pe(""),n=0,l;Xe(()=>{K(i,window.location.pathname,!0),l=Wr.subscribe(W=>{n=W}),$.currentUser&&qr()}),Ur(()=>{l&&l()});function d(W,E=!1){return E?r(i)===W:r(i).startsWith(W)}var h=ns(),m=te(h),p=v(m),C=v(p);{var A=W=>{var E=Yi(),Y=v(E);{var oe=be=>{var Z=Gi();U(()=>{I(Z,"src",$.currentUser.avatar),I(Z,"alt",$.currentUser.display_name)}),c(be,Z)},fe=be=>{var Z=Ki(),V=v(Z);qt(V,{size:40}),u(Z),c(be,Z)};x(Y,be=>{$.currentUser.avatar?be(oe):be(fe,!1)})}var we=g(Y,2),ie=v(we),se=v(ie,!0);u(ie);var le=g(ie,2),Me=v(le);u(le),u(we),u(E),U(()=>{X(se,$.currentUser.display_name||$.currentUser.username),X(Me,`@${$.currentUser.acct??""}`)}),c(W,E)},B=W=>{var E=Ji(),Y=v(E);qt(Y,{size:20}),it(2),u(E),c(W,E)};x(C,W=>{$.isAuthenticated&&$.currentUser?W(A):W(B,!1)})}u(p);var w=g(p,2);Qe(w,21,()=>r(s),ut,(W,E)=>{var Y=$i(),oe=v(Y),fe=v(oe);{var we=V=>{var ee=Zi();c(V,ee)};x(fe,V=>{d(r(E).href,r(E).exact)&&V(we)})}var ie=g(fe,2),se=v(ie);at(se,()=>r(E).icon,(V,ee)=>{ee(V,{size:20})});var le=g(se,2);{var Me=V=>{var ee=Xi(),ve=v(ee,!0);u(ee),U(()=>X(ve,n>99?"99+":n)),c(V,ee)};x(le,V=>{r(E).href==="/notifications"&&n>0&&V(Me)})}u(ie);var be=g(ie,2),Z=v(be,!0);u(be),u(oe),u(Y),U((V,ee)=>{I(oe,"href",r(E).href),he(oe,1,`nav-link ${V??""}`,"svelte-jxkij"),I(oe,"aria-current",ee),X(Z,r(E).label)},[()=>d(r(E).href,r(E).exact)?"active":"",()=>d(r(E).href,r(E).exact)?"page":void 0]),c(W,Y)}),u(w);var q=g(w,2);{var y=W=>{var E=es();c(W,E)};x(q,W=>{$.isAuthenticated&&W(y)})}u(m);var M=g(m,2),R=v(M),G=v(R);{var D=W=>{var E=ts();c(W,E)};x(G,W=>{d("/home",!0)&&W(D)})}it(2),u(R);var H=g(R,2),P=v(H);{var S=W=>{var E=rs();c(W,E)};x(P,W=>{d("/local")&&W(S)})}var J=g(P,2);Ht(J,{size:24}),u(H);var j=g(H,2),re=v(j);{var ne=W=>{var E=is();c(W,E)};x(re,W=>{d("/notifications")&&W(ne)})}var O=g(re,2),L=g(v(O));{var k=W=>{var E=ss(),Y=v(E,!0);u(E),U(()=>X(Y,n>9?"9+":n)),c(W,E)};x(L,W=>{n>0&&W(k)})}u(O),u(j);var F=g(j,4),ue=v(F);{var me=W=>{var E=as();c(W,E)};x(ue,W=>{d("/settings")&&W(me)})}it(2),u(F),u(M),U((W,E,Y,oe)=>{he(R,1,`mobile-nav-link ${W??""}`,"svelte-jxkij"),he(H,1,`mobile-nav-link ${E??""}`,"svelte-jxkij"),he(j,1,`mobile-nav-link ${Y??""}`,"svelte-jxkij"),he(F,1,`mobile-nav-link ${oe??""}`,"svelte-jxkij")},[()=>d("/home",!0)?"active":"",()=>d("/local")?"active":"",()=>d("/notifications")?"active":"",()=>d("/settings")?"active":""]),c(o,h),xe()}var ls=f('<div class="main-layout svelte-1vud52s"><aside class="sidebar svelte-1vud52s"><!></aside> <main class="content svelte-1vud52s"><!></main></div>');function cs(o,e){let t=T(e,"title",3,"Greater");Qi(o,{get title(){return t()},children:(a,s)=>{var i=ls(),n=v(i),l=v(n);os(l,{}),u(n);var d=g(n,2),h=v(d);We(h,()=>e.children),u(d),u(i),c(a,i)},$$slots:{default:!0}})}var ds=f('<button role="tab"> </button>'),us=f('<div class="tabs-container svelte-16064hu" role="tablist"></div>');function vs(o,e){ke(e,!0);const t=[{id:"home",label:"Home",href:"/home",authRequired:!0},{id:"local",label:"Local",href:"/local"},{id:"federated",label:"Federated",href:"/federated"}],a=Q(()=>t.filter(l=>!l.authRequired||$.isAuthenticated));let s=pe(vt(e.activeTab||"local"));Ke(()=>{e.activeTab&&K(s,e.activeTab,!0)}),Xe(()=>{if(!(typeof window>"u")&&!e.activeTab){const l=window.location.pathname;l==="/"||l.startsWith("/home")?K(s,"home"):l.startsWith("/local")?K(s,"local"):l.startsWith("/federated")&&K(s,"federated")}});function i(l){if(l===r(s))return;K(s,l,!0);const d=r(a).find(h=>h.id===l)?.href??"/local";window.location.href=d}var n=us();Qe(n,21,()=>r(a),l=>l.id,(l,d)=>{var h=ds();h.__click=()=>i(r(d).id);let m;var p=v(h,!0);u(h),U(()=>{I(h,"aria-selected",r(s)===r(d).id),m=he(h,1,"svelte-16064hu",null,m,{active:r(s)===r(d).id}),X(p,r(d).label)}),c(l,h)}),u(n),c(o,n),xe()}_(["click"]);var hs=f('<div class="timeline-layout svelte-e1b9ru"><!> <div class="timeline-content svelte-e1b9ru"><!></div></div>');function An(o,e){ke(e,!0);let t=T(e,"title",3,"Timeline"),a=T(e,"activeTab",3,"home");const s=Q(()=>a()==="home"&&!$.isAuthenticated?"local":a());cs(o,{get title(){return t()},children:(i,n)=>{var l=hs(),d=v(l);vs(d,{get activeTab(){return r(s)}});var h=g(d,2),m=v(h);We(m,()=>e.children),u(h),u(l),c(i,l)},$$slots:{default:!0}}),xe()}const fs=300*1e3,St=20,Ct={statuses:[],hasMore:!0,isLoading:!1,isLoadingMore:!1,error:null,lastFetch:0,stream:null,gaps:[],endCursor:null};function pt(o){const e=o.object||o,t=gs(e);return{id:e.id,uri:e.id,url:e.id,created_at:e.published||e.createdAt||new Date().toISOString(),account:tr(e.actor||e.attributedTo||e.author),content:e.content||"",visibility:e.visibility?.toLowerCase()||"public",sensitive:e.sensitive??!1,spoiler_text:e.summary??e.spoilerText??"",media_attachments:(e.attachments||[]).map(_s),mentions:(e.mentions||e.tag?.filter(a=>a.type==="Mention")||[]).map(ps),tags:(e.hashtags||e.tag?.filter(a=>a.type==="Hashtag")||[]).map(bs),emojis:[],reblogs_count:e.shares?.totalCount||e.sharesCount||0,favourites_count:e.likes?.totalCount||e.likesCount||0,replies_count:e.replies?.totalCount||e.repliesCount||0,reblogged:Zt(e),favourited:Jt(e),bookmarked:Yt(e),pinned:Hr(e),reblog:e.shareOf?pt(e.shareOf):null,in_reply_to_id:e.inReplyTo?.id||null,in_reply_to_account_id:null,application:null,language:e.language||null,muted:!1,poll:e.poll?ys(e.poll):null,card:null,edited_at:e.updated||null,quote_id:t?.original_note_id||e.quoteUrl||null,quote_url:e.quoteUrl||null,quote_context:t}}function tr(o){if(!o)return{id:"unknown",username:"unknown",acct:"unknown",display_name:"Unknown",avatar:"",header:""};try{return Xt(o)}catch(e){return console.warn("[Timeline Store] Failed to map actor, falling back to minimal data.",e),{id:o.id||"unknown",username:o.username||o.preferredUsername||"unknown",acct:o.webfinger||o.username||"unknown",display_name:o.displayName||o.name||o.username||"Unknown",avatar:o.avatar||o.icon?.url||"",header:o.header||o.image?.url||""}}}function ms(o){if(o)try{return new URL(o).hostname}catch{return}}function gs(o){if(!o.quoteContext&&!o.quoteUrl)return null;const e=o.quoteContext;if(!e)return null;const t=e.originalAuthor?tr(e.originalAuthor):null;return{quote_allowed:e.quoteAllowed??!1,quote_type:e.quoteType||null,withdrawn:e.withdrawn??!1,original_author:t,original_note_id:e.originalNote?.id||o.quoteUrl||null}}function _s(o){return $t(o)}function ps(o){const e=o.username||o.name?.replace("@","")||"",t=o.domain||ms(o.url||o.href),a=t?`${e}@${t}`:e;return{id:o.id||o.href||a,username:e,url:o.url||o.href||"",acct:a}}function bs(o){return{name:o.name?.replace("#","")||"",url:o.href||""}}function ys(o){return{id:o.id,expires_at:o.endTime,expired:new Date(o.endTime)<new Date,multiple:o.anyOf!==void 0,votes_count:o.votersCount||0,voters_count:o.votersCount||0,voted:o.voted||!1,own_votes:o.ownVotes||[],options:(o.oneOf||o.anyOf||[]).map(e=>({title:e.name,votes_count:e.replies?.totalCount||0})),emojis:[]}}class ks{#e=pe(vt({}));get timelines(){return r(this.#e)}set timelines(e){K(this.#e,e,!0)}#t=pe(!1);get isLoading(){return r(this.#t)}set isLoading(e){K(this.#t,e,!0)}#r=pe(null);get error(){return r(this.#r)}set error(e){K(this.#r,e,!0)}_initialized=!1;_previousInstance=null;constructor(){}initialize(){typeof window>"u"||this._initialized||(this._initialized=!0,$.initialize(),this._previousInstance=$.currentInstance,setInterval(()=>{$.currentInstance!==this._previousInstance&&(this._previousInstance!==null&&Object.keys(this.timelines).forEach(e=>{this.disconnectStream(e),this.clearTimeline(e)}),this._previousInstance=$.currentInstance)},1e3))}async loadTimeline(e,t){const a=this.timelines[e]||{...Ct},s=Date.now();if(!(!t?.since_id&&a.lastFetch&&s-a.lastFetch<fs&&a.statuses.length>0)){this.isLoading=!0,this.error=null,this.timelines[e]||(this.timelines[e]={...Ct}),this.timelines[e]={...this.timelines[e],isLoading:!0,error:null};try{Ve("[Timeline Store] Loading timeline:",{type:e,currentInstance:$.currentInstance,isAuthenticated:$.isAuthenticated,currentUser:$.currentUser?.username});const i=await Oe($.currentInstance||void 0);let n;const l={first:t?.limit||St,after:t?.since_id?void 0:a.endCursor};if(e.startsWith("list:")){const p=e.replace("list:","");n=await i.fetchListTimeline(p,l)}else switch(e){case"home":n=await i.fetchHomeTimeline(l);break;case"local":n=await i.fetchPublicTimeline(l,"LOCAL");break;case"federated":n=await i.fetchPublicTimeline(l,"PUBLIC");break;default:throw new Error(`Unknown timeline type: ${e}`)}const d=(n?.edges||[]).map(p=>pt(p.node)),h=n?.pageInfo;Ve("[Timeline Store] Loaded statuses:",d.length),Ve("[Timeline Store] First status:",d[0]),Ve("[Timeline Store] PageInfo:",h);const m={...this.timelines[e],statuses:t?.since_id?[...d,...this.timelines[e].statuses]:d,hasMore:h?.hasNextPage||!1,endCursor:h?.endCursor||null,isLoading:!1,lastFetch:s,error:null};Ve("[Timeline Store] Setting timeline state:",{type:e,statusCount:m.statuses.length,isLoading:m.isLoading,error:m.error,hasMore:m.hasMore}),this.timelines[e]=m,this.isLoading=!1,Ve("[Timeline Store] Timeline state after update:",this.timelines[e])}catch(i){console.error("[Timeline Store] Error loading timeline:",i),this.timelines[e]={...this.timelines[e],isLoading:!1,error:i},this.isLoading=!1,this.error=i instanceof Error?i.message:"Failed to load timeline"}}}async loadMore(e){const t=this.timelines[e];if(!(!t||!t.hasMore||t.isLoadingMore)){this.timelines[e]={...this.timelines[e],isLoadingMore:!0};try{const a=await Oe($.currentInstance||void 0);let s;const i={first:St,after:t.endCursor};if(e.startsWith("list:")){const d=e.replace("list:","");s=await a.fetchListTimeline(d,i)}else switch(e){case"home":s=await a.fetchHomeTimeline(i);break;case"local":s=await a.fetchPublicTimeline(i,"LOCAL");break;case"federated":s=await a.fetchPublicTimeline(i,"PUBLIC");break;default:throw new Error(`Unknown timeline type: ${e}`)}const n=(s?.edges||[]).map(d=>pt(d.node)),l=s?.pageInfo;this.timelines[e]={...this.timelines[e],statuses:[...this.timelines[e].statuses,...n],hasMore:l?.hasNextPage||!1,endCursor:l?.endCursor||null,isLoadingMore:!1}}catch(a){console.error("[Timeline Store] Error loading more:",a),this.timelines[e]={...this.timelines[e],isLoadingMore:!1,error:a}}}}async refreshTimeline(e){const t=this.timelines[e];if(!t||t.statuses.length===0)return this.loadTimeline(e);try{await this.loadTimeline(e,{limit:St})}catch(a){console.error("[Timeline Store] Error refreshing timeline:",a)}}prependStatus(e,t){this.timelines[e]&&(this.timelines[e]={...this.timelines[e],statuses:[t,...this.timelines[e].statuses]})}updateStatus(e,t){Ve("[Timeline Store] Updating status:",{statusId:e,updates:t}),Object.entries(this.timelines).forEach(([a,s])=>{this.timelines[a]={...s,statuses:s.statuses.map(i=>{if(i.id===e){const n={...i,...t};return Ve("[Timeline Store] Status updated:",{id:e,wasFavorited:i.favourited,isFavorited:n.favourited,wasBookmarked:i.bookmarked,isBookmarked:n.bookmarked}),n}return i.reblog?.id===e?{...i,reblog:{...i.reblog,...t}}:i})}})}removeStatus(e){Object.entries(this.timelines).forEach(([t,a])=>{this.timelines[t]={...a,statuses:a.statuses.filter(s=>s.id!==e&&s.reblog?.id!==e)}})}clearTimeline(e){this.timelines[e]={...Ct}}async favoriteStatus(e){const t=await Oe($.currentInstance||void 0);let a;for(const s of Object.values(this.timelines))if(a=s.statuses.find(i=>i.id===e||i.reblog?.id===e),a)break;this.updateStatus(e,{favourited:!0,favourites_count:(a?.favourites_count||0)+1});try{const s=await t.likeObject(e);this.updateStatus(e,{favourited:s.userInteractions?.liked||!0,favourites_count:s.likes?.totalCount||s.likesCount||(a?.favourites_count||0)+1})}catch(s){throw this.updateStatus(e,{favourited:!1,favourites_count:(a?.favourites_count||1)-1}),s}}async unfavoriteStatus(e){const t=await Oe($.currentInstance||void 0);let a;for(const s of Object.values(this.timelines))if(a=s.statuses.find(i=>i.id===e||i.reblog?.id===e),a)break;this.updateStatus(e,{favourited:!1,favourites_count:Math.max(0,(a?.favourites_count||1)-1)});try{const s=await t.unlikeObject(e);this.updateStatus(e,{favourited:s.userInteractions?.liked||!1,favourites_count:s.likes?.totalCount||s.likesCount||Math.max(0,(a?.favourites_count||1)-1)})}catch(s){throw this.updateStatus(e,{favourited:!0,favourites_count:(a?.favourites_count||0)+1}),s}}async reblogStatus(e){const t=await Oe($.currentInstance||void 0);let a;for(const s of Object.values(this.timelines))if(a=s.statuses.find(i=>i.id===e||i.reblog?.id===e),a)break;this.updateStatus(e,{reblogged:!0,reblogs_count:(a?.reblogs_count||0)+1});try{const s=await t.shareObject(e);this.updateStatus(e,{reblogged:s.userInteractions?.shared||!0,reblogs_count:s.shares?.totalCount||s.sharesCount||(a?.reblogs_count||0)+1})}catch(s){throw this.updateStatus(e,{reblogged:!1,reblogs_count:(a?.reblogs_count||1)-1}),s}}async unreblogStatus(e){const t=await Oe($.currentInstance||void 0);let a;for(const s of Object.values(this.timelines))if(a=s.statuses.find(i=>i.id===e||i.reblog?.id===e),a)break;this.updateStatus(e,{reblogged:!1,reblogs_count:Math.max(0,(a?.reblogs_count||1)-1)});try{const s=await t.unshareObject(e);this.updateStatus(e,{reblogged:s.userInteractions?.shared||!1,reblogs_count:s.shares?.totalCount||s.sharesCount||Math.max(0,(a?.reblogs_count||1)-1)})}catch(s){throw this.updateStatus(e,{reblogged:!0,reblogs_count:(a?.reblogs_count||0)+1}),s}}async bookmarkStatus(e){const t=await Oe($.currentInstance||void 0);this.updateStatus(e,{bookmarked:!0});try{const a=await t.bookmarkObject(e);this.updateStatus(e,{bookmarked:a.userInteractions?.bookmarked||!0})}catch(a){throw this.updateStatus(e,{bookmarked:!1}),a}}async unbookmarkStatus(e){const t=await Oe($.currentInstance||void 0);this.updateStatus(e,{bookmarked:!1});try{const a=await t.unbookmarkObject(e);this.updateStatus(e,{bookmarked:a.userInteractions?.bookmarked||!1})}catch(a){throw this.updateStatus(e,{bookmarked:!0}),a}}async deleteStatus(e){const t=await Oe($.currentInstance||void 0);try{await t.deleteObject(e),this.removeStatus(e)}catch(a){throw a}}async connectStream(e){if(!this.timelines[e]?.stream){if(!$.isAuthenticated||!$.currentInstance){Ve("[Timeline Stream] Cannot connect - not authenticated");return}try{const a=await Oe($.currentInstance);let s,i;if(e.startsWith("list:"))s="LIST",i=e.replace("list:","");else switch(e){case"home":s="HOME";break;case"local":s="LOCAL";break;case"federated":s="PUBLIC";break;default:console.warn(`[Timeline Stream] Unknown timeline type for streaming: ${e}`);return}const n=a.subscribeToTimelineUpdates({type:s,listId:i}).subscribe({next:l=>{try{const d=l.data?.timelineUpdates;if(!d)return;const h=pt(d),m=this.timelines[e];if(!m)return;m.statuses.some(C=>C.id===h.id)?this.updateStatus(h.id,h):this.prependStatus(e,h)}catch(d){console.error("[Timeline Stream] Failed to process update:",d)}},error:l=>{console.error("[Timeline Stream] Error:",l),this.timelines[e]={...this.timelines[e],stream:null},setTimeout(()=>{this.connectStream(e)},5e3)},complete:()=>{Ve("[Timeline Stream] Connection closed"),this.timelines[e]={...this.timelines[e],stream:null}}});this.timelines[e]={...this.timelines[e],stream:n}}catch(a){console.error("[Timeline Stream] Failed to connect stream:",a)}}}disconnectStream(e){const t=this.timelines[e];t?.stream&&(t.stream.unsubscribe(),this.timelines[e]={...this.timelines[e],stream:null})}}const Te=new ks;function xs(o,e){ke(e,!0);let t=T(e,"variant",3,"primary"),a=T(e,"size",3,"md"),s=T(e,"fullWidth",3,!1),i=T(e,"loading",3,!1),n=T(e,"disabled",3,!1),l=T(e,"class",3,""),d=T(e,"style",3,""),h=Ye(e,["$$slots","$$events","$$legacy","variant","size","fullWidth","loading","disabled","prefix","suffix","children","class","style","type"]);const m={primary:"solid",secondary:"outline",tertiary:"ghost",ghost:"ghost",danger:"solid",success:"solid"},p={sm:"sm",md:"md",lg:"lg",small:"sm",medium:"md",large:"lg"},C={danger:["--gr-semantic-action-primary-default: var(--gr-semantic-action-error-default);","--gr-semantic-action-primary-hover: var(--gr-semantic-action-error-hover);","--gr-semantic-action-primary-active: var(--gr-semantic-action-error-active);"].join(" "),success:["--gr-semantic-action-primary-default: var(--gr-semantic-action-success-default);","--gr-semantic-action-primary-hover: var(--gr-semantic-action-success-hover);","--gr-semantic-action-primary-active: var(--gr-semantic-action-success-active);"].join(" ")},A=Q(()=>()=>m[t()]??"solid"),B=Q(()=>()=>p[a()]??"md"),w=Q(()=>()=>e.type??"submit"),q=Q(()=>()=>[C[t()],d()].filter(Boolean).join(" ").trim()),y=Q(()=>()=>[s()?"w-full":"",l()].filter(Boolean).join(" ").trim());{let M=Q(()=>n()||i()),R=Q(()=>r(y)||void 0),G=Q(()=>r(q)||void 0);Mi(o,Ir({get variant(){return r(A)},get size(){return r(B)},get type(){return r(w)},get loading(){return i()},get disabled(){return r(M)},get class(){return r(R)},get style(){return r(G)},get prefix(){return e.prefix},get suffix(){return e.suffix}},()=>h,{children:(D,H)=>{var P=de(),S=te(P);We(S,()=>e.children??Tt),c(D,P)},$$slots:{default:!0}}))}xe()}var ws=f('<div class="relative rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 aspect-video flex items-center justify-center"><div class="text-center p-4"><svg class="w-12 h-12 mx-auto mb-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg> <p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Sensitive content</p> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Show</button></div></div>'),Ss=f('<video class="h-full w-full object-cover" playsinline="" controls></video> <div class="pointer-events-none absolute inset-0 flex items-center justify-center"><div class="rounded-full bg-black/60 p-3"><svg class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path></svg></div></div>',3),Cs=f('<video class="h-full w-full object-cover" loop autoplay playsinline=""></video>',2),Ms=f('<div class="absolute inset-0 animate-pulse bg-gray-200 dark:bg-gray-700"></div>'),zs=f('<img class="h-full w-full object-cover" loading="lazy"/> <!>',1),Ts=f('<div class="absolute left-2 top-2 rounded-full bg-black/60 px-2 py-1 text-[11px] font-medium uppercase tracking-wide text-white">CW</div>'),Es=f('<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2"><span class="text-xs text-white">ALT</span></div>'),As=f('<button><!> <!> <div class="absolute right-2 top-2 rounded-full bg-black/50 px-2 py-1 text-[11px] uppercase tracking-wide text-white"> </div> <!></button>'),js=f('<div class="flex items-center space-x-3 rounded-lg bg-gray-100 p-4 dark:bg-gray-800"><svg class="h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg> <div class="flex-1"><audio controls class="w-full" preload="metadata"></audio></div></div>'),Ls=f('<div class="flex h-32 items-center justify-center rounded-lg bg-gray-100 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-gray-300"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9l-6-6H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> Document attachment</div>'),Os=f('<div class="flex h-32 items-center justify-center rounded-lg bg-gray-100 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-gray-300">Unsupported media</div>'),Ps=f('<div class="relative group"><!></div>'),Is=f("<div></div>"),Rs=f('<button class="absolute left-4 text-white/80 hover:text-white p-2" aria-label="Previous"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <button class="absolute right-4 text-white/80 hover:text-white p-2" aria-label="Next"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>',1),Bs=f('<img class="max-w-full max-h-[90vh] object-contain"/>'),Fs=f('<video autoplay class="max-w-full max-h-[90vh]"></video>',2),Ns=f('<div class="absolute bottom-0 left-0 right-0 bg-black/80 p-4"><p class="text-white text-sm"> </p></div>'),Ds=f('<div class="max-w-[90vw] max-h-[90vh] relative"><!> <!></div>'),Us=f('<div class="fixed inset-0 z-50 bg-black/90 flex items-center justify-center"><button class="absolute top-4 right-4 text-white/80 hover:text-white p-2" aria-label="Close"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <!> <!></div>'),Ws=f('<div class="media-gallery"><!> <!></div>');function qs(o,e){ke(e,!0);let t=T(e,"sensitive",3,!1),a=pe(!t()),s=pe(null),i=vt({});function n(D){K(s,D,!0),document.body.style.overflow="hidden"}function l(){K(s,null),document.body.style.overflow=""}function d(D){r(s)!==null&&(D==="prev"?K(s,r(s)>0?r(s)-1:e.media.length-1,!0):K(s,r(s)<e.media.length-1?r(s)+1:0,!0))}function h(D){if(r(s)!==null)switch(D.key){case"Escape":l();break;case"ArrowLeft":d("prev");break;case"ArrowRight":d("next");break}}const m=Q(()=>{switch(e.media.length){case 1:return"grid-cols-1";case 2:return"grid-cols-2";case 3:return"grid-cols-2";case 4:return"grid-cols-2";default:return"grid-cols-3"}}),p=Q(()=>e.media.length===3?D=>D===0?"row-span-2":"":()=>"");function C(D){return D.meta?.small?.aspect?`${D.meta.small.aspect}`:"1"}function A(D,H="small"){return H==="preview"&&D.preview_url||H==="small"&&D.preview_url?D.preview_url:D.url}function B(D){if(D.meta?.media_category)return D.meta.media_category;switch(D.type){case"image":return"IMAGE";case"video":return"VIDEO";case"audio":return"AUDIO";case"gifv":return"GIFV";default:return"UNKNOWN"}}Xe(()=>(document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),r(s)!==null&&(document.body.style.overflow="")}));var w=Ws(),q=v(w);{var y=D=>{var H=ws(),P=v(H),S=g(v(P),4);S.__click=()=>K(a,!0),u(P),u(H),c(D,H)},M=D=>{var H=Is();Qe(H,21,()=>e.media,ut,(P,S,J)=>{const j=Q(()=>B(r(S)));var re=Ps(),ne=v(re);{var O=k=>{var F=As();F.__click=()=>n(J);var ue=v(F);{var me=se=>{var le=Ss(),Me=te(le);Me.muted=!0,it(2),U(()=>{I(Me,"src",r(S).url),I(Me,"poster",r(S).preview_url)}),c(se,le)},W=se=>{var le=de(),Me=te(le);{var be=V=>{var ee=Cs();ee.muted=!0,U(()=>{I(ee,"src",r(S).url),I(ee,"poster",r(S).preview_url)}),c(V,ee)},Z=V=>{var ee=zs(),ve=te(ee),ge=g(ve,2);{var ce=ae=>{var Ee=Ms();c(ae,Ee)};x(ge,ae=>{i[r(S).id]||ae(ce)})}U(ae=>{I(ve,"src",ae),I(ve,"alt",r(S).description||"")},[()=>A(r(S),"small")]),ye("load",ve,()=>i[r(S).id]=!0),Kt(ve),c(V,ee)};x(Me,V=>{r(j)==="GIFV"?V(be):V(Z,!1)},!0)}c(se,le)};x(ue,se=>{r(j)==="VIDEO"?se(me):se(W,!1)})}var E=g(ue,2);{var Y=se=>{var le=Ts();c(se,le)};x(E,se=>{r(S).spoiler_text&&se(Y)})}var oe=g(E,2),fe=v(oe,!0);u(oe);var we=g(oe,2);{var ie=se=>{var le=Es();c(se,le)};x(we,se=>{r(S).description&&se(ie)})}u(F),U((se,le)=>{he(F,1,`relative overflow-hidden bg-gray-100 dark:bg-gray-800 ${se??""} focus:outline-none focus:ring-2 focus:ring-blue-500`),Ue(F,`aspect-ratio: ${le??""}`),X(fe,r(j))},[()=>r(p)(J),()=>C(r(S))]),c(k,F)},L=k=>{var F=de(),ue=te(F);{var me=E=>{var Y=js(),oe=g(v(Y),2),fe=v(oe);u(oe),u(Y),U(()=>I(fe,"src",r(S).url)),c(E,Y)},W=E=>{var Y=de(),oe=te(Y);{var fe=ie=>{var se=Ls();c(ie,se)},we=ie=>{var se=Os();c(ie,se)};x(oe,ie=>{r(j)==="DOCUMENT"?ie(fe):ie(we,!1)},!0)}c(E,Y)};x(ue,E=>{r(j)==="AUDIO"?E(me):E(W,!1)},!0)}c(k,F)};x(ne,k=>{r(j)==="IMAGE"||r(j)==="GIFV"||r(j)==="VIDEO"?k(O):k(L,!1)})}u(re),c(P,re)}),u(H),U(()=>he(H,1,`grid gap-1 ${r(m)??""} rounded-lg overflow-hidden`)),c(D,H)};x(q,D=>{t()&&!r(a)?D(y):D(M,!1)})}var R=g(q,2);{var G=D=>{var H=Us();H.__click=l;var P=v(H);P.__click=l;var S=g(P,2);{var J=ne=>{var O=Rs(),L=te(O);L.__click=F=>{F.stopPropagation(),d("prev")};var k=g(L,2);k.__click=F=>{F.stopPropagation(),d("next")},c(ne,O)};x(S,ne=>{e.media.length>1&&ne(J)})}var j=g(S,2);{var re=ne=>{const O=Q(()=>e.media[r(s)]);var L=Ds();L.__click=E=>E.stopPropagation();var k=v(L);{var F=E=>{var Y=Bs();U(()=>{I(Y,"src",r(O).url),I(Y,"alt",r(O).description||"")}),c(E,Y)},ue=E=>{var Y=de(),oe=te(Y);{var fe=we=>{var ie=Fs();U(()=>{I(ie,"src",r(O).url),I(ie,"poster",r(O).preview_url),ie.controls=r(O).type==="video",ie.loop=r(O).type==="gifv",ie.muted=r(O).type==="gifv"}),c(we,ie)};x(oe,we=>{(r(O).type==="video"||r(O).type==="gifv")&&we(fe)},!0)}c(E,Y)};x(k,E=>{r(O).type==="image"?E(F):E(ue,!1)})}var me=g(k,2);{var W=E=>{var Y=Ns(),oe=v(Y),fe=v(oe,!0);u(oe),u(Y),U(()=>X(fe,r(O).description)),c(E,Y)};x(me,E=>{r(O).description&&E(W)})}u(L),c(ne,L)};x(j,ne=>{r(s)!==null&&ne(re)})}u(H),c(D,H)};x(R,D=>{r(s)!==null&&D(G)})}u(w),c(o,w),xe()}_(["click"]);var Hs=f('<div class="card p-4 space-y-3"><div class="flex items-start gap-3"><!> <div class="flex-1 space-y-3"><div class="flex items-center gap-2"><!> <!></div> <div class="space-y-2"><!> <!> <!></div> <!> <div class="flex items-center gap-6 pt-2"><!> <!> <!> <!></div></div></div></div>');function rr(o){var e=Hs(),t=v(e),a=v(t);De(a,{variant:"circular",width:"48px",height:"48px"});var s=g(a,2),i=v(s),n=v(i);De(n,{variant:"text",width:"128px",height:"16px"});var l=g(n,2);De(l,{variant:"text",width:"96px",height:"12px"}),u(i);var d=g(i,2),h=v(d);De(h,{variant:"text",width:"100%",height:"16px"});var m=g(h,2);De(m,{variant:"text",width:"80%",height:"16px"});var p=g(m,2);De(p,{variant:"text",width:"60%",height:"16px"}),u(d);var C=g(d,2);{var A=R=>{De(R,{variant:"rectangular",width:"100%",height:"192px",class:"rounded-lg"})};x(C,R=>{Math.random()>.5&&R(A)})}var B=g(C,2),w=v(B);De(w,{variant:"circular",width:"20px",height:"20px"});var q=g(w,2);De(q,{variant:"circular",width:"20px",height:"20px"});var y=g(q,2);De(y,{variant:"circular",width:"20px",height:"20px"});var M=g(y,2);De(M,{variant:"circular",width:"20px",height:"20px"}),u(B),u(s),u(t),u(e),c(o,e)}var Vs=f('<div class="quote-loading"><!></div>'),Qs=f('<div class="quote-error svelte-1f9da5d"><p> </p> <a target="_blank" rel="noreferrer">Open original</a></div>'),Gs=f('<div class="quote-content" role="note" aria-label="Quoted post"><div class="quote-author svelte-1f9da5d"><span class="name"> </span> <span class="handle svelte-1f9da5d"> </span></div> <div class="quote-text svelte-1f9da5d" tabindex="0"><!></div> <a class="quote-link svelte-1f9da5d">View original</a></div>'),Ks=f('<div class="quote-content" role="note" aria-label="Quoted post"><div class="quote-author svelte-1f9da5d"><span class="name"> </span> <span class="handle svelte-1f9da5d"> </span></div> <a class="quote-link svelte-1f9da5d">View original</a></div>'),Ys=f('<div class="quote-preview svelte-1f9da5d"><!></div>');function Js(o,e){ke(e,!0);const t=T(e,"quoteUrl",3,null),a=T(e,"author",3,null);class s{static instance;cache=new Map;static getInstance(){return s.instance||(s.instance=new s),s.instance}get(y){return this.cache.get(y)}set(y,M){this.cache.set(y,M)}}const i=s.getInstance();let n=pe(null),l=pe(!0),d=pe(null);Xe(async()=>{if($.initialize(),!e.quoteId){K(d,"Missing quote reference"),K(l,!1);return}const q=i.get(e.quoteId);if(q){K(n,q,!0),K(l,!1);return}try{const M=await(await Oe($.currentInstance||void 0)).getObject(e.quoteId),R=p(M);K(n,R,!0),i.set(e.quoteId,R)}catch(y){console.error("[QuotePreview] Failed to fetch quote:",y),K(d,y instanceof Error?y.message:"Unable to load quoted post",!0)}finally{K(l,!1)}});function h(){return r(n)?.url?r(n).url:t()?t().startsWith("http")?t():`/status/${t()}`:`/status/${e.quoteId}`}function m(q){return q&&(q.display_name||q.username||q.acct)||"Unknown"}function p(q){const y=q?.object??q,M=y?.actor??y?.attributedTo;return{id:y?.id,uri:y?.id,url:y?.url??y?.id??null,created_at:y?.published??y?.createdAt??new Date().toISOString(),account:M?Xt(M):{},content:y?.content??"",visibility:y?.visibility?.toLowerCase()||"public",sensitive:y?.sensitive??!1,spoiler_text:y?.summary??y?.spoilerText??"",media_attachments:(y?.attachments??[]).map($t),mentions:[],tags:[],emojis:[],reblogs_count:y?.shares?.totalCount??y?.sharesCount??0,favourites_count:y?.likes?.totalCount??y?.likesCount??0,replies_count:y?.replies?.totalCount??y?.repliesCount??0,reblogged:Zt(y),favourited:Jt(y),bookmarked:Yt(y),pinned:!1,reblog:null,in_reply_to_id:y?.inReplyTo?.id??null,in_reply_to_account_id:null,application:null,language:y?.language??null,muted:!1,poll:null,card:null,edited_at:y?.updated??null,quote_id:y?.quoteUrl??null,quote_url:y?.quoteUrl??null,quote_context:null}}var C=Ys(),A=v(C);{var B=q=>{var y=Vs(),M=v(y);rr(M),u(y),c(q,y)},w=q=>{var y=de(),M=te(y);{var R=D=>{var H=Qs(),P=v(H),S=v(P,!0);u(P);var J=g(P,2);u(H),U(j=>{X(S,r(d)),I(J,"href",j)},[h]),c(D,H)},G=D=>{var H=de(),P=te(H);{var S=j=>{var re=Gs(),ne=v(re),O=v(ne),L=v(O,!0);u(O);var k=g(O,2),F=v(k);u(k),u(ne);var ue=g(ne,2),me=v(ue);zt(me,()=>r(n).content),u(ue);var W=g(ue,2);u(re),U(E=>{X(L,r(n).account.display_name||r(n).account.username),X(F,`@${r(n).account.acct??""}`),I(W,"href",E)},[h]),c(j,re)},J=j=>{var re=Ks(),ne=v(re),O=v(ne),L=v(O,!0);u(O);var k=g(O,2),F=v(k,!0);u(k),u(ne);var ue=g(ne,2);u(re),U((me,W)=>{X(L,me),X(F,e.quoteId),I(ue,"href",W)},[()=>m(a()),h]),c(j,re)};x(P,j=>{r(n)?j(S):j(J,!1)},!0)}c(D,H)};x(M,D=>{r(d)?D(R):D(G,!1)},!0)}c(q,y)};x(A,q=>{r(l)?q(B):q(w,!1)})}u(C),c(o,C),xe()}var Zs=f('<div class="flex items-center gap-2 text-sm text-text-secondary"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"></path></svg> <span> </span></div>'),Xs=f('<div class="flex items-center gap-2 text-sm text-text-secondary"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"></path></svg> <span>Replying to thread</span></div>'),$s=f('<span class="text-text-secondary"> </span>'),ea=f('<details class="mt-2"><summary class="cursor-pointer text-text-secondary hover:text-text"> </summary> <div class="mt-2 prose prose-sm max-w-none text-text"><!></div></details>'),ta=f('<div class="mt-2 prose prose-sm max-w-none text-text"><!></div>'),ra=f('<div class="mt-3"><!></div>'),ia=f('<div class="mt-3"><!></div>'),sa=f('<div class="flex-1"><div class="flex justify-between items-center"><span class="text-sm"> </span> <span class="text-sm text-text-secondary"> </span></div> <div class="mt-1 h-2 bg-surface rounded-full overflow-hidden"><div class="h-full bg-primary transition-all duration-300"></div></div></div>'),aa=f('<button class="flex-1 text-left p-2 rounded-lg border border-border hover:bg-surface-variant transition-colors"> </button>'),na=f('<div class="flex items-center gap-2"><!></div>'),oa=f('<div class="mt-3 space-y-2 p-3 rounded-lg bg-surface-variant"><!> <div class="text-sm text-text-secondary mt-2"> <!></div></div>'),la=f('<img alt="" class="w-20 h-20 object-cover rounded" loading="lazy"/>'),ca=f('<div class="text-sm text-text-secondary line-clamp-2"> </div>'),da=f('<a target="_blank" rel="noopener noreferrer" class="mt-3 flex gap-3 p-3 rounded-lg border border-border hover:bg-surface-variant transition-colors"><!> <div class="flex-1 min-w-0"><div class="font-medium text-sm truncate"> </div> <!> <div class="text-xs text-text-secondary truncate"> </div></div></a>'),ua=f("<span> </span>"),va=f('<p class="text-sm text-blue-800 dark:text-blue-200"> </p> <div class="mt-2 flex items-center gap-4 text-xs text-blue-600 dark:text-blue-400"><span> </span> <!></div>',1),ha=f('<div class="mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"><div class="flex items-center gap-2 mb-2"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium text-blue-900 dark:text-blue-100">Community Note</span></div> <!></div>'),fa=f('<div class="mt-2 text-xs text-text-secondary"> </div>'),ma=f('<span class="text-sm" aria-hidden="true"> </span>'),ga=f('<span class="text-sm" aria-hidden="true"> </span>'),_a=f('<div class="absolute bottom-full mb-2 left-0 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[150px]"><button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Boost</button> <button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h13m0 0l-4-4m4 4l-4 4m-9 4v-4a1 1 0 011-1h2m0-4V5a1 1 0 011-1h7"></path></svg> Quote</button></div>'),pa=f('<span class="text-sm" aria-hidden="true"> </span>'),ba=f('<div class="absolute right-0 bottom-full mb-1 w-48 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10"><button class="w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div>'),ya=f('<div class="relative"><button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors" title="More options" aria-label="More options for this post" aria-haspopup="menu"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg></button> <!></div>'),ka=f('<article class="card p-4 space-y-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors" role="article" tabindex="0"><!> <!> <div class="flex items-start gap-3"><a class="flex-shrink-0"><!></a> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><a class="font-semibold text-text hover:underline"> </a> <span class="text-text-secondary"> </span> <!> <span class="text-text-secondary">¬∑</span> <time class="text-text-secondary"> </time> <!></div> <!> <!> <!> <!> <!> <!> <!> <div class="mt-3 flex items-center gap-1 -ml-2"><button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors" title="Reply"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <!></button> <div class="relative boost-menu-container"><button title="Boost"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <!></button> <!></div> <button title="Favorite"><svg class="w-5 h-5" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg> <!></button> <button title="Bookmark"><svg class="w-5 h-5" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg></button> <button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors ml-auto" title="Share" aria-label="Share post"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.632 4.658a3 3 0 01-5.266 0m5.266 0a3 3 0 00-5.266 0m5.266 0L18 18m-5.684-2.342a3 3 0 01-5.266 0M6.75 6l1.266 1.342M18 6l-1.266 1.342M12 12h.01"></path></svg></button> <!></div></div></div></article>');function ir(o,e){ke(e,!0);const t=Q(()=>e.status),a=Q(()=>e.showThread??!1),s=Q(()=>r(t));Ke(()=>{r(t).content||console.warn("[StatusCard] Status missing content:",{id:r(t).id,created_at:r(t).created_at,account:r(t).account?.username,hasContent:!!r(t).content,contentLength:r(t).content?.length})});const i=Q(()=>r(t).reblog||r(t)),n=Q(()=>!!r(t).reblog),l=Q(()=>r(i).quote_context||null),d=Q(()=>(r(i).account.display_name||r(i).account.username).charAt(0).toUpperCase()),h=Q(()=>{const b=new Date(r(i).created_at),N=Math.floor((new Date().getTime()-b.getTime())/1e3);return N<60?`${N}s`:N<3600?`${Math.floor(N/60)}m`:N<86400?`${Math.floor(N/3600)}h`:N<604800?`${Math.floor(N/86400)}d`:b.toLocaleDateString()}),m=Q(()=>{switch(r(i).visibility){case"public":return"üåê";case"unlisted":return"üîì";case"private":return"üîí";case"direct":return"‚úâÔ∏è";default:return""}});let p=pe(!1),C=pe(!1),A=pe(!1),B=null,w=!1;const q=Q(()=>r(i).account.id===$.currentUser?.id);Xe(()=>{const b=z=>{const N=z.target;r(C)&&!N.closest(".menu-container")&&K(C,!1),r(A)&&!N.closest(".boost-menu-container")&&K(A,!1)};return document.addEventListener("click",b),()=>document.removeEventListener("click",b)}),Xe(async()=>{if(!r(q)&&$.currentUser)try{const b=await Oe(),z=r(i).account?.id;if(!z){console.warn("[StatusCard] Skipping relationship request: missing account id",{statusId:r(i).id,account:r(i).account});return}const N=await b.getRelationship(z);B={id:z,following:N.following||!1,followed_by:N.followedBy||!1,blocking:N.blocking||!1,blocked_by:N.blockedBy||!1,muting:N.muting||!1,muting_notifications:N.mutingNotifications||!1,requested:N.requested||!1,domain_blocking:!1,showing_reblogs:!0,endorsed:!1,notifying:!1,note:""}}catch(b){console.error("Failed to load relationship:",b)}});async function y(){if(!(r(p)||!$.currentUser)){K(p,!0),console.log("[StatusCard] Before favorite:",{id:r(i).id,favourited:r(i).favourited,content:r(i).content?.substring(0,50)});try{r(i).favourited?await Te.unfavoriteStatus(r(i).id):await Te.favoriteStatus(r(i).id)}finally{K(p,!1)}}}async function M(){if(!(r(p)||!$.currentUser)){K(p,!0),K(A,!1);try{r(i).reblogged?await Te.unreblogStatus(r(i).id):await Te.reblogStatus(r(i).id)}catch(b){console.error("[StatusCard] Boost failed:",b)}finally{K(p,!1)}}}function R(){if(K(A,!1),!$.currentUser){console.log("[StatusCard] Cannot quote: not logged in");return}const b={statusId:r(i).id,quotedStatus:r(i)};sessionStorage.setItem("compose_quote_context",JSON.stringify(b)),window.location.href="/compose"}async function G(){if(!(r(p)||!$.currentUser)){K(p,!0);try{r(i).bookmarked?await Te.unbookmarkStatus(r(i).id):await Te.bookmarkStatus(r(i).id)}finally{K(p,!1)}}}function D(){if(typeof window>"u")return;const b={replyToId:r(i).id,mention:`@${r(i).account.acct} `};sessionStorage.setItem("compose_reply_context",JSON.stringify(b)),window.location.href="/compose"}function H(){typeof window>"u"||(navigator.share?navigator.share({title:`Post by ${r(i).account.display_name||r(i).account.username}`,text:r(i).content.replace(/<[^>]*>/g,""),url:r(i).url||r(i).uri}):navigator.clipboard&&navigator.clipboard.writeText(r(i).url||r(i).uri))}async function P(){if(confirm("Are you sure you want to delete this post?")){K(p,!0);try{await Te.deleteStatus(r(i).id),typeof window<"u"&&window.location.pathname.startsWith("/status/")&&window.history.back()}catch(b){console.error("Failed to delete status:",b),alert("Failed to delete post")}finally{K(p,!1)}}}async function S(){if(!(!$.currentUser||w)){w=!0;try{const b=await Oe(),z=r(i).account?.id;if(!z){console.warn("[StatusCard] Cannot follow/unfollow: missing account id",{statusId:r(i).id,account:r(i).account});return}B?.following?await b.unfollowActor(z):await b.followActor(z);const N=await b.getRelationship(z);B={id:z,following:N.following||!1,followed_by:N.followedBy||!1,blocking:N.blocking||!1,blocked_by:N.blockedBy||!1,muting:N.muting||!1,muting_notifications:N.mutingNotifications||!1,requested:N.requested||!1,domain_blocking:!1,showing_reblogs:!0,endorsed:!1,notifying:!1,note:""}}catch(b){console.error("Follow/unfollow failed:",b)}finally{w=!1}}}var J=ka();J.__click=b=>{if(typeof window>"u")return;const z=b.target;z.closest("button")||z.closest("a")||z.closest("video")||z.closest("audio")||(window.location.href=`/status/${r(i).id}`)},J.__keydown=b=>{typeof window>"u"||b.key==="Enter"&&!b.target.closest("button")&&!b.target.closest("a")&&(window.location.href=`/status/${r(i).id}`)};var j=v(J);{var re=b=>{var z=Zs(),N=g(v(z),2),ze=v(N);u(N),u(z),U(()=>X(ze,`${(r(t).account.display_name||r(t).account.username)??""} boosted`)),c(b,z)};x(j,b=>{r(n)&&b(re)})}var ne=g(j,2);{var O=b=>{var z=Xs();c(b,z)};x(ne,b=>{r(a)&&r(i).in_reply_to_id&&b(O)})}var L=g(ne,2),k=v(L),F=v(k);{let b=Q(()=>r(i).account.display_name||r(i).account.username);Ni(F,{get src(){return r(i).account.avatar},get alt(){return r(b)},size:"md",get fallback(){return r(d)}})}u(k);var ue=g(k,2),me=v(ue),W=v(me),E=v(W,!0);u(W);var Y=g(W,2),oe=v(Y);u(Y);var fe=g(Y,2);{var we=b=>{{let z=Q(()=>B.following?"secondary":"primary");xs(b,{onclick:N=>{N.stopPropagation(),S()},get loading(){return w},get variant(){return r(z)},size:"sm",class:"ml-auto rounded-full",children:(N,ze)=>{var Se=de(),Ce=te(Se);{var Ie=_e=>{var Ae=gt("Following");c(_e,Ae)},Le=_e=>{var Ae=gt("Follow");c(_e,Ae)};x(Ce,_e=>{B.following?_e(Ie):_e(Le,!1)})}c(N,Se)},$$slots:{default:!0}})}};x(fe,b=>{!r(q)&&$.currentUser&&B&&b(we)})}var ie=g(fe,4),se=v(ie,!0);u(ie);var le=g(ie,2);{var Me=b=>{var z=$s(),N=v(z,!0);u(z),U(()=>{I(z,"title",r(i).visibility),X(N,r(m))}),c(b,z)};x(le,b=>{r(m)&&b(Me)})}u(me);var be=g(me,2);{var Z=b=>{var z=ea(),N=v(z),ze=v(N);u(N);var Se=g(N,2),Ce=v(Se);zt(Ce,()=>Ft(r(i).content)),u(Se),u(z),U(()=>X(ze,`CW: ${r(i).spoiler_text??""}`)),c(b,z)},V=b=>{var z=ta(),N=v(z);zt(N,()=>Ft(r(i).content)),u(z),c(b,z)};x(be,b=>{r(i).spoiler_text?b(Z):b(V,!1)})}var ee=g(be,2);{var ve=b=>{var z=ra(),N=v(z);Js(N,{get quoteId(){return r(l).original_note_id},get quoteUrl(){return r(i).quote_url},get author(){return r(l).original_author}}),u(z),c(b,z)};x(ee,b=>{r(l)?.original_note_id&&b(ve)})}var ge=g(ee,2);{var ce=b=>{var z=ia(),N=v(z);qs(N,{get media(){return r(i).media_attachments},get sensitive(){return r(i).sensitive}}),u(z),c(b,z)};x(ge,b=>{r(i).media_attachments.length>0&&b(ce)})}var ae=g(ge,2);{var Ee=b=>{var z=oa(),N=v(z);Qe(N,17,()=>r(i).poll.options,ut,(Le,_e)=>{var Ae=na(),ot=v(Ae);{var Fe=Be=>{var Ne=sa(),rt=v(Ne),xt=v(rt),pr=v(xt,!0);u(xt);var Lt=g(xt,2),br=v(Lt);u(Lt),u(rt);var Ot=g(rt,2),yr=v(Ot);u(Ot),u(Ne),U(kr=>{X(pr,r(_e).title),X(br,`${kr??""}%`),Ue(yr,`width: ${r(_e).votes_count/r(i).poll.votes_count*100}%`)},[()=>Math.round(r(_e).votes_count/r(i).poll.votes_count*100)]),c(Be,Ne)},He=Be=>{var Ne=aa(),rt=v(Ne,!0);u(Ne),U(()=>X(rt,r(_e).title)),c(Be,Ne)};x(ot,Be=>{r(i).poll.expired||r(i).poll.voted?Be(Fe):Be(He,!1)})}u(Ae),c(Le,Ae)});var ze=g(N,2),Se=v(ze),Ce=g(Se);{var Ie=Le=>{var _e=gt();U(Ae=>X(_e,`¬∑ ${r(i).poll.expired?"Ended":"Ends"} ${Ae??""}`),[()=>new Date(r(i).poll.expires_at).toLocaleDateString()]),c(Le,_e)};x(Ce,Le=>{r(i).poll.expires_at&&Le(Ie)})}u(ze),u(z),U(()=>X(Se,`${r(i).poll.votes_count??""} votes `)),c(b,z)};x(ae,b=>{r(i).poll&&b(Ee)})}var qe=g(ae,2);{var Ge=b=>{var z=da(),N=v(z);{var ze=Fe=>{var He=la();U(()=>I(He,"src",r(i).card.image)),c(Fe,He)};x(N,Fe=>{r(i).card.image&&Fe(ze)})}var Se=g(N,2),Ce=v(Se),Ie=v(Ce,!0);u(Ce);var Le=g(Ce,2);{var _e=Fe=>{var He=ca(),Be=v(He,!0);u(He),U(()=>X(Be,r(i).card.description)),c(Fe,He)};x(Le,Fe=>{r(i).card.description&&Fe(_e)})}var Ae=g(Le,2),ot=v(Ae,!0);u(Ae),u(Se),u(z),U(()=>{I(z,"href",r(i).card.url),X(Ie,r(i).card.title),X(ot,new URL(r(i).card.url).hostname)}),c(b,z)};x(qe,b=>{r(i).card&&!r(i).media_attachments.length&&b(Ge)})}var je=g(qe,2);{var Pe=b=>{var z=ha(),N=g(v(z),2);Qe(N,17,()=>r(s).community_notes.slice(0,1),ut,(ze,Se)=>{var Ce=va(),Ie=te(Ce),Le=v(Ie,!0);u(Ie);var _e=g(Ie,2),Ae=v(_e),ot=v(Ae);u(Ae);var Fe=g(Ae,2);{var He=Be=>{var Ne=ua(),rt=v(Ne);u(Ne),U(()=>X(rt,`${r(Se).votes_unhelpful??""} found unhelpful`)),c(Be,Ne)};x(Fe,Be=>{r(Se).votes_unhelpful>0&&Be(He)})}u(_e),U(()=>{X(Le,r(Se).content),X(ot,`${r(Se).votes_helpful??""} found helpful`)}),c(ze,Ce)}),u(z),c(b,z)};x(je,b=>{r(s).community_notes&&r(s).community_notes.length>0&&b(Pe)})}var Je=g(je,2);{var nr=b=>{var z=fa(),N=v(z);u(z),U(ze=>X(N,`Delivery cost: $${ze??""}`),[()=>(r(s).delivery_cost/1e6).toFixed(6)]),c(b,z)};x(Je,b=>{r(s).delivery_cost&&$.currentUser&&b(nr)})}var Et=g(Je,2),nt=v(Et);nt.__click=D;var or=g(v(nt),2);{var lr=b=>{var z=ma(),N=v(z,!0);u(z),U(()=>X(N,r(i).replies_count)),c(b,z)};x(or,b=>{r(i).replies_count>0&&b(lr)})}u(nt);var kt=g(nt,2),Ze=v(kt);Ze.__click=b=>{b.stopPropagation(),r(i).reblogged?M():K(A,!r(A))};var cr=g(v(Ze),2);{var dr=b=>{var z=ga(),N=v(z,!0);u(z),U(()=>X(N,r(i).reblogs_count)),c(b,z)};x(cr,b=>{r(i).reblogs_count>0&&b(dr)})}u(Ze);var ur=g(Ze,2);{var vr=b=>{var z=_a(),N=v(z);N.__click=M;var ze=g(N,2);ze.__click=R,u(z),c(b,z)};x(ur,b=>{r(A)&&b(vr)})}u(kt);var et=g(kt,2);et.__click=y;var At=v(et),hr=g(At,2);{var fr=b=>{var z=pa(),N=v(z,!0);u(z),U(()=>X(N,r(i).favourites_count)),c(b,z)};x(hr,b=>{r(i).favourites_count>0&&b(fr)})}u(et);var tt=g(et,2);tt.__click=G;var mr=v(tt);u(tt);var jt=g(tt,2);jt.__click=H;var gr=g(jt,2);{var _r=b=>{var z=ya(),N=v(z);N.__click=Ce=>{Ce.stopPropagation(),K(C,!r(C))};var ze=g(N,2);{var Se=Ce=>{var Ie=ba(),Le=v(Ie);Le.__click=_e=>{_e.stopPropagation(),K(C,!1),P()},u(Ie),c(Ce,Ie)};x(ze,Ce=>{r(C)&&Ce(Se)})}u(z),U(()=>I(N,"aria-expanded",r(C))),c(b,z)};x(gr,b=>{r(q)&&b(_r)})}u(Et),u(ue),u(L),u(J),U(()=>{I(J,"aria-label",`Post by ${(r(i).account.display_name||r(i).account.username)??""}`),I(k,"href",`/@${r(i).account.acct}`),I(W,"href",`/@${r(i).account.acct}`),X(E,r(i).account.display_name||r(i).account.username),X(oe,`@${r(i).account.acct??""}`),I(ie,"datetime",r(i).created_at),X(se,r(h)),I(nt,"aria-label",`Reply to post${r(i).replies_count>0?`, ${r(i).replies_count} replies`:""}`),he(Ze,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${r(i).reblogged?"text-green-500":"text-text-secondary"} hover:text-green-500 hover:bg-green-500/10`),I(Ze,"aria-label",`${r(i).reblogged?"Unboost":"Boost"} post${r(i).reblogs_count>0?`, ${r(i).reblogs_count} boosts`:""}`),I(Ze,"aria-pressed",r(i).reblogged),Ze.disabled=r(i).visibility==="private"||r(i).visibility==="direct",he(et,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${r(i).favourited?"text-amber-500":"text-text-secondary"} hover:text-amber-500 hover:bg-amber-500/10`),I(et,"aria-label",`${r(i).favourited?"Unfavorite":"Favorite"} post${r(i).favourites_count>0?`, ${r(i).favourites_count} favorites`:""}`),I(et,"aria-pressed",r(i).favourited),I(At,"fill",r(i).favourited?"currentColor":"none"),he(tt,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${r(i).bookmarked?"text-primary":"text-text-secondary"} hover:text-primary hover:bg-primary/10`),I(tt,"aria-label",`${r(i).bookmarked?"Remove bookmark":"Bookmark"} post`),I(tt,"aria-pressed",r(i).bookmarked),I(mr,"fill",r(i).bookmarked?"currentColor":"none")}),c(o,J),xe()}_(["click","keydown"]);var xa=f('<div class="space-y-2"></div>');function wa(o,e){let t=T(e,"count",3,5);var a=xa();Qe(a,21,()=>Array(t()),ut,(s,i)=>{rr(s)}),u(a),c(o,a)}var Sa=f('<button class="btn btn-primary"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Try again</button>'),Ca=f('<div class="flex-1 flex items-center justify-center p-8"><div class="text-center max-w-md"><div class="mx-auto w-16 h-16 mb-4 rounded-full bg-error/10 flex items-center justify-center"><svg class="w-8 h-8 text-error" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h2 class="text-xl font-semibold text-text mb-2"> </h2> <p class="text-text-secondary mb-6"> </p> <!> <!></div></div>');function Ma(o,e){ke(e,!0);let t=T(e,"error",3,null),a=T(e,"title",3,"Something went wrong"),s=T(e,"message",3,"We encountered an error while loading this content.");const i=Q(()=>t()?.message||s());var n=Ca(),l=v(n),d=g(v(l),2),h=v(d,!0);u(d);var m=g(d,2),p=v(m,!0);u(m);var C=g(m,2);{var A=w=>{var q=Sa();q.__click=function(...y){e.onRetry?.apply(this,y)},c(w,q)};x(C,w=>{e.onRetry&&w(A)})}var B=g(C,2);x(B,w=>{}),u(l),u(n),U(()=>{X(h,a()),X(p,r(i))}),c(o,n),xe()}_(["click"]);var za=Re('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>'),Ta=Re('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>'),Ea=Re('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),Aa=f('<button class="btn btn-primary"> </button>'),ja=f('<div class="flex-1 flex items-center justify-center p-8"><div class="text-center max-w-md"><div class="mx-auto w-16 h-16 mb-4 rounded-full bg-surface-variant flex items-center justify-center"><!></div> <h2 class="text-xl font-semibold text-text mb-2"> </h2> <p class="text-text-secondary mb-6"> </p> <!></div></div>');function La(o,e){ke(e,!0);let t=T(e,"title",3,"No content yet"),a=T(e,"message",3,"When there's something to show, it will appear here."),s=T(e,"icon",3,"inbox");var i=ja(),n=v(i),l=v(n),d=v(l);{var h=y=>{var M=za();c(y,M)},m=y=>{var M=de(),R=te(M);{var G=H=>{var P=Ta();c(H,P)},D=H=>{var P=de(),S=te(P);{var J=j=>{var re=Ea();c(j,re)};x(S,j=>{s()==="users"&&j(J)},!0)}c(H,P)};x(R,H=>{s()==="search"?H(G):H(D,!1)},!0)}c(y,M)};x(d,y=>{s()==="inbox"?y(h):y(m,!1)})}u(l);var p=g(l,2),C=v(p,!0);u(p);var A=g(p,2),B=v(A,!0);u(A);var w=g(A,2);{var q=y=>{var M=Aa();M.__click=function(...G){e.action.onClick?.apply(this,G)};var R=v(M,!0);u(M),U(()=>X(R,e.action.label)),c(y,M)};x(w,y=>{e.action&&y(q)})}u(n),u(i),U(()=>{X(C,t()),X(B,a())}),c(o,i),xe()}_(["click"]);const Qt=(o,e=Tt)=>{var t=Oa(),a=te(t);ir(a,{get status(){return e().status}});var s=g(a,2);{var i=n=>{sr(n,()=>e().replies)};x(s,n=>{e().replies.length>0&&n(i)})}c(o,t)},sr=(o,e=Tt,t)=>{var a=de(),s=te(a);Qe(s,17,e,i=>i.status.id,(i,n)=>{var l=Pa(),d=v(l);ir(d,{get status(){return r(n).status}});var h=g(d,2);{var m=p=>{sr(p,()=>r(n).replies)};x(h,p=>{r(n).replies.length>0&&p(m)})}u(l),c(i,l)}),c(o,a)};var Oa=f("<!> <!>",1),Pa=f('<div class="ml-12"><!> <!></div>'),Ia=f('<div class="flex-1 overflow-y-auto px-4 py-4"><!></div>'),Ra=f('<div class="w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"></div> <span>Refreshing...</span>',1),Ba=f('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg> <span>Release to refresh</span>',1),Fa=f('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg> <span>Pull to refresh</span>',1),Na=f('<div><div class="flex items-center gap-2 text-text-secondary"><!></div></div>'),Da=f('<div class="px-4"><!></div>'),Ua=f('<div class="px-4"></div>'),Wa=f('<div class="px-4 py-4 space-y-4"></div>'),qa=f('<div class="w-6 h-6 border-3 border-primary border-t-transparent rounded-full animate-spin mx-auto"></div>'),Ha=f('<button class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 transition-colors">Load more</button>'),Va=f('<div class="py-4 text-center"><!></div>'),Qa=f('<div class="py-4 text-center text-text-secondary"><p>No more posts</p></div>'),Ga=f('<div class="flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin"><!> <!> <div class="h-1"></div> <!></div>'),Ka=f('<div class="relative h-full flex flex-col"><!></div>');function jn(o,e){ke(e,!0);let t=T(e,"type",3,"home"),a=T(e,"enableVirtualization",3,"auto"),s=T(e,"groupConversations",19,()=>t()==="home"),i=T(e,"enablePullToRefresh",3,!0);const n=Q(()=>Te.timelines[t()]||{statuses:[],hasMore:!0,isLoading:!1,isLoadingMore:!1,error:null,lastFetch:0,stream:null,gaps:[]});Ke(()=>{console.log("[Timeline] Timeline state:",{type:t(),statusCount:r(n).statuses.length,isLoading:r(n).isLoading,hasTimeline:!!Te.timelines[t()],groupedStatusCount:r(l).length,shouldVirtualize:r(B),virtualizer:!!r(w)})});const l=Q(()=>{if(console.log("[Timeline] Computing groupedStatuses:",{groupConversations:s(),statusCount:r(n).statuses.length}),!s())return r(n).statuses.map(O=>({status:O,replies:[]}));const J=new Map(r(n).statuses.map(O=>[O.id,O])),j=[],re=new Set;function ne(O){const L=[];for(const k of r(n).statuses)k.in_reply_to_id===O&&!re.has(k.id)&&(re.add(k.id),L.push({status:k,replies:ne(k.id)}));return L}for(const O of r(n).statuses)re.has(O.id)||O.in_reply_to_id&&J.has(O.in_reply_to_id)||(re.add(O.id),j.push({status:O,replies:ne(O.id)}));return j});let d,h,m,p=pe(!1),C=pe(0),A=pe(!1);const B=Q(()=>a()===!0||a()==="auto"&&r(l).length>50);let w=pe(null);Ke(()=>{if(!r(B)||!d||r(l).length===0){K(w,null);return}K(w,ci({count:r(l).length,getScrollElement:()=>d,estimateSize:()=>200,overscan:5,gap:8}),!0)});const q=Q(()=>r(w)?.getVirtualItems()||[]),y=Q(()=>r(w)?.getTotalSize()||0);let M;Xe(()=>{if(Te.initialize(),Te.loadTimeline(t()),Te.connectStream(t()),M=new IntersectionObserver(J=>{J[0].isIntersecting&&r(n).hasMore&&!r(n).isLoadingMore&&Te.loadMore(t())},{rootMargin:"100px"}),h&&M.observe(h),i()){let J=0,j=0;const re=L=>{d.scrollTop===0&&(J=L.touches[0].clientY)},ne=L=>{if(!J)return;j=L.touches[0].clientY;const k=j-J;k>0&&d.scrollTop===0&&(L.preventDefault(),K(p,!0),K(C,Math.min(k,100),!0),m&&(m.style.transform=`translateY(${r(C)}px)`))},O=async()=>{r(C)>60&&!r(A)&&(K(A,!0),await Te.refreshTimeline(t()),K(A,!1)),K(p,!1),K(C,0),J=0,m&&(m.style.transform="translateY(0)")};return d?.addEventListener("touchstart",re,{passive:!0}),d?.addEventListener("touchmove",ne,{passive:!1}),d?.addEventListener("touchend",O),()=>{d?.removeEventListener("touchstart",re),d?.removeEventListener("touchmove",ne),d?.removeEventListener("touchend",O)}}return()=>{Te.disconnectStream(t()),M?.disconnect()}});function R(){Te.refreshTimeline(t())}function G(){!r(n).hasMore||r(n).isLoadingMore||Te.loadMore(t())}var D=Ka(),H=v(D);{var P=J=>{var j=Ia(),re=v(j);wa(re,{count:10}),u(j),c(J,j)},S=J=>{var j=de(),re=te(j);{var ne=L=>{Ma(L,{get error(){return r(n).error},title:"Unable to load timeline",onRetry:R})},O=L=>{var k=de(),F=te(k);{var ue=W=>{{let E=Q(()=>t()==="home"?"Your timeline is empty":"No posts yet"),Y=Q(()=>t()==="home"?"Follow some people to see their posts here!":t()==="local"?"Be the first to post something on this instance!":"No public posts from other instances yet.");La(W,{get title(){return r(E)},get message(){return r(Y)},icon:"inbox"})}},me=W=>{var E=Ga(),Y=v(E);{var oe=Z=>{var V=Na(),ee=v(V),ve=v(ee);{var ge=ae=>{var Ee=Ra();it(2),c(ae,Ee)},ce=ae=>{var Ee=de(),qe=te(Ee);{var Ge=Pe=>{var Je=Ba();it(2),c(Pe,Je)},je=Pe=>{var Je=Fa();it(2),c(Pe,Je)};x(qe,Pe=>{r(C)>60?Pe(Ge):Pe(je,!1)},!0)}c(ae,Ee)};x(ve,ae=>{r(A)?ae(ge):ae(ce,!1)})}u(ee),u(V),dt(V,ae=>m=ae,()=>m),U(()=>he(V,1,`absolute top-0 left-0 right-0 flex justify-center py-4 transition-transform duration-300 ${r(p)?"":"-translate-y-full"}`)),c(Z,V)};x(Y,Z=>{i()&&Z(oe)})}var fe=g(Y,2);{var we=Z=>{var V=Ua();Qe(V,21,()=>r(q),ee=>r(l)[ee.index].status.id,(ee,ve)=>{var ge=Da(),ce=v(ge);Qt(ce,()=>r(l)[r(ve).index]),u(ge),U(()=>Ue(ge,`
								position: absolute;
								top: 0;
								left: 0;
								width: 100%;
								height: ${r(ve).size??""}px;
								transform: translateY(${r(ve).start??""}px);
							`)),c(ee,ge)}),u(V),U(()=>Ue(V,`height: ${r(y)??""}px; width: 100%; position: relative;`)),c(Z,V)},ie=Z=>{var V=Wa();Qe(V,21,()=>r(l),ee=>ee.status.id,(ee,ve)=>{Qt(ee,()=>r(ve))}),u(V),c(Z,V)};x(fe,Z=>{r(B)&&r(w)?Z(we):Z(ie,!1)})}var se=g(fe,2);dt(se,Z=>h=Z,()=>h);var le=g(se,2);{var Me=Z=>{var V=Va(),ee=v(V);{var ve=ce=>{var ae=qa();c(ce,ae)},ge=ce=>{var ae=de(),Ee=te(ae);{var qe=Ge=>{var je=Ha();je.__click=G,c(Ge,je)};x(Ee,Ge=>{r(B)||Ge(qe)},!0)}c(ce,ae)};x(ee,ce=>{r(n).isLoadingMore?ce(ve):ce(ge,!1)})}u(V),c(Z,V)},be=Z=>{var V=de(),ee=te(V);{var ve=ge=>{var ce=Qa();c(ge,ce)};x(ee,ge=>{r(n).statuses.length>0&&ge(ve)},!0)}c(Z,V)};x(le,Z=>{r(n).hasMore?Z(Me):Z(be,!1)})}u(E),dt(E,Z=>d=Z,()=>d),c(W,E)};x(F,W=>{r(n).statuses.length===0?W(ue):W(me,!1)},!0)}c(L,k)};x(re,L=>{r(n).error?L(ne):L(O,!1)},!0)}c(J,j)};x(H,J=>{r(n).isLoading&&r(n).statuses.length===0?J(P):J(S,!1)})}u(D),c(o,D),xe()}_(["click"]);_(["click"]);_(["click"]);_(["click"]);_(["input","change"]);_(["change"]);_(["change"]);_(["change"]);_(["change","click"]);_(["keydown","click"]);_(["click","keydown"]);_(["click","keydown"]);_(["click","keydown","keyup"]);_(["click","keydown","keyup"]);const Gt="gr-preferences-v1",mt={colorScheme:"auto",density:"comfortable",fontSize:"medium",motion:"normal",customColors:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#ec4899"},highContrastMode:!1,fontScale:1};function bt(o){return{...o,customColors:{...o.customColors}}}function Mt(o,e){const t={...o,...e};return t.customColors={...o.customColors,...e.customColors??{}},bt(t)}class Ya{_preferences=bt(mt);_systemColorScheme="light";_systemMotion="normal";_systemHighContrast=!1;darkModeQuery;reducedMotionQuery;highContrastQuery;constructor(){this.loadPreferences(),this.setupSystemPreferenceDetection(),this.applyTheme()}get preferences(){return bt(this._preferences)}get state(){const{customColors:e,...t}=this._preferences;return{...t,customColors:{...e},systemColorScheme:this._systemColorScheme,systemMotion:this._systemMotion,systemHighContrast:this._systemHighContrast,resolvedColorScheme:this.resolvedColorScheme}}get resolvedColorScheme(){return this._preferences.highContrastMode||this._systemHighContrast?"high-contrast":this._preferences.colorScheme==="auto"?this._systemColorScheme:this._preferences.colorScheme==="high-contrast"?"high-contrast":this._preferences.colorScheme}get resolvedMotion(){return this._systemMotion==="reduced"?"reduced":this._preferences.motion}setColorScheme(e){this._preferences.colorScheme=e,this.saveAndApply()}setDensity(e){this._preferences.density=e,this.saveAndApply()}setFontSize(e){this._preferences.fontSize=e,this.saveAndApply()}setFontScale(e){this._preferences.fontScale=Math.max(.85,Math.min(1.5,e)),this.saveAndApply()}setMotion(e){this._preferences.motion=e,this.saveAndApply()}setCustomColors(e){this._preferences.customColors={...this._preferences.customColors,...e},this.saveAndApply()}setHighContrastMode(e){this._preferences.highContrastMode=e,this.saveAndApply()}updatePreferences(e){this._preferences=Mt(this._preferences,e),this.saveAndApply()}reset(){this._preferences=bt(mt),this.saveAndApply()}export(){return JSON.stringify(this._preferences,null,2)}import(e){try{const t=JSON.parse(e);return this.validatePreferences(t)?(this._preferences=Mt(mt,t),this.saveAndApply(),!0):!1}catch{return!1}}loadPreferences(){if(!(typeof window>"u"))try{const e=localStorage.getItem(Gt);if(e){const t=JSON.parse(e);this.validatePreferences(t)&&(this._preferences=Mt(mt,t))}}catch(e){console.warn("Failed to load preferences from localStorage:",e)}}savePreferences(){if(!(typeof window>"u"))try{localStorage.setItem(Gt,JSON.stringify(this._preferences))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}}saveAndApply(){this.savePreferences(),this.applyTheme()}validatePreferences(e){const t=["light","dark","high-contrast","auto"],a=["compact","comfortable","spacious"],s=["small","medium","large"],i=["normal","reduced"];return!(e.colorScheme&&!t.includes(e.colorScheme)||e.density&&!a.includes(e.density)||e.fontSize&&!s.includes(e.fontSize)||e.motion&&!i.includes(e.motion))}setupSystemPreferenceDetection(){typeof window>"u"||(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._systemColorScheme=this.darkModeQuery.matches?"dark":"light",this.darkModeQuery.addEventListener("change",e=>{this._systemColorScheme=e.matches?"dark":"light",this._preferences.colorScheme==="auto"&&this.applyTheme()}),this.reducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this._systemMotion=this.reducedMotionQuery.matches?"reduced":"normal",this.reducedMotionQuery.addEventListener("change",e=>{this._systemMotion=e.matches?"reduced":"normal",this.applyTheme()}),this.highContrastQuery=window.matchMedia("(prefers-contrast: high)"),this._systemHighContrast=this.highContrastQuery.matches,this.highContrastQuery.addEventListener("change",e=>{this._systemHighContrast=e.matches,this.applyTheme()}))}applyTheme(){if(typeof window>"u")return;const e=document.documentElement;e.setAttribute("data-theme",this.resolvedColorScheme),e.setAttribute("data-density",this._preferences.density),e.setAttribute("data-font-size",this._preferences.fontSize),e.setAttribute("data-motion",this.resolvedMotion),this.applyCustomProperties()}applyCustomProperties(){if(typeof window>"u")return;const e=document.documentElement;this._preferences.customColors.primary&&e.style.setProperty("--gr-custom-primary",this._preferences.customColors.primary),this._preferences.customColors.secondary&&e.style.setProperty("--gr-custom-secondary",this._preferences.customColors.secondary),this._preferences.customColors.accent&&e.style.setProperty("--gr-custom-accent",this._preferences.customColors.accent),e.style.setProperty("--gr-font-scale",String(this._preferences.fontScale));const t={compact:.85,comfortable:1,spacious:1.2};e.style.setProperty("--gr-density-scale",String(t[this._preferences.density]))}destroy(){this.darkModeQuery}}new Ya;_(["click","change","input"]);_(["click"]);_(["click"]);_(["click"]);_(["click","keydown"]);_(["click","change"]);_(["click"]);_(["click","keydown"]);_(["input","click","keydown"]);_(["input","click"]);_(["click","input","change"]);_(["click","change"]);_(["keydown","click"]);_(["keydown","click"]);_(["click"]);_(["click","keydown"]);_(["click","keydown"]);_(["change","click","keydown"]);_(["click"]);class Ja{constructor(e={}){this.cache=new Map,this.accessOrder=[],this.maxSize=e.maxSize??1e3,this.defaultTTL=e.defaultTTL??3e5,this.debug=e.debug??!1,this.hits=0,this.misses=0,this.logger=e.logger}get(e){const t=this.cache.get(e);if(!t){this.misses++,this.log("miss",e);return}if(Date.now()-t.timestamp>t.ttl){this.cache.delete(e),this.removeFromAccessOrder(e),this.misses++,this.log("expired",e);return}return this.updateAccessOrder(e),this.hits++,this.log("hit",e),t.value}set(e,t,a){const s={value:t,timestamp:Date.now(),ttl:a??this.defaultTTL,size:this.estimateSize(t)};this.cache.size>=this.maxSize&&!this.cache.has(e)&&this.evictLRU(),this.cache.set(e,s),this.updateAccessOrder(e),this.log("set",e,`ttl=${s.ttl}ms`)}has(e){return this.get(e)!==void 0}delete(e){const t=this.cache.delete(e);return t&&(this.removeFromAccessOrder(e),this.log("delete",e)),t}clear(){this.cache.clear(),this.accessOrder=[],this.hits=0,this.misses=0,this.log("clear","all")}getStats(){return{size:this.cache.size,maxSize:this.maxSize,hits:this.hits,misses:this.misses,hitRate:this.hits/(this.hits+this.misses)||0}}invalidate(e){const t=typeof e=="string"?new RegExp(e):e,a=e.toString();let s=0;for(const i of this.cache.keys())t.test(i)&&(this.delete(i),s++);return this.log("invalidate",a,`${s} entries`),s}updateAccessOrder(e){this.removeFromAccessOrder(e),this.accessOrder.push(e)}removeFromAccessOrder(e){const t=this.accessOrder.indexOf(e);t!==-1&&this.accessOrder.splice(t,1)}evictLRU(){if(this.accessOrder.length===0)return;const e=this.accessOrder[0];e!==void 0&&(this.cache.delete(e),this.accessOrder.shift(),this.log("evict",e))}estimateSize(e){try{return JSON.stringify(e).length}catch{return 1e3}}log(e,t,a){if(!this.debug)return;const s=this.getStats(),i={scope:"cache",action:e,message:`${t}${a?` ${a}`:""}`.trim(),stats:s};this.logger?this.logger(i):typeof console<"u"&&typeof console.warn=="function"&&console.warn(`[Cache] ${e} key="${t}" ${a||""} (${s.size}/${s.maxSize}, hit rate: ${(s.hitRate*100).toFixed(1)}%)`)}}new Ja({maxSize:1e3,defaultTTL:3e5,debug:!1});_(["click"]);_(["click"]);_(["change","click"]);_(["change","click"]);_(["change","click"]);_(["input","click"]);_(["input","click"]);_(["click"]);_(["click"]);_(["click"]);_(["click"]);_(["input","keydown","click"]);_(["click"]);_(["click","keydown"]);_(["click","keydown"]);_(["click"]);_(["click"]);_(["click"]);_(["click"]);_(["change"]);_(["click"]);_(["keydown"]);_(["click"]);_(["change","click","input"]);_(["click"]);_(["click","change"]);_(["change","keydown","click"]);_(["click"]);_(["keydown","click"]);_(["click"]);_(["click"]);_(["click"]);_(["input","keydown","change"]);const ar=Symbol("compose-context");function Za(o={},e={},t={},a){const s=o.characterLimit||500,i={content:"",contentWarning:"",visibility:o.defaultVisibility||"public",mediaAttachments:[],submitting:!1,error:null,characterCount:0,overLimit:!1,inReplyTo:void 0,contentWarningEnabled:!1},n=a||{...i,...t};function l(){Object.assign(n,i)}const d={config:{characterLimit:s,allowMedia:o.allowMedia??!0,maxMediaAttachments:o.maxMediaAttachments||4,allowPolls:o.allowPolls??!0,allowContentWarnings:o.allowContentWarnings??!0,defaultVisibility:o.defaultVisibility||"public",enableMarkdown:o.enableMarkdown??!1,placeholder:o.placeholder||"What's on your mind?",class:o.class||""},handlers:e,state:n,updateState:h=>{Object.assign(n,h)},reset:l};return Or(ar,d),d}function yt(){const o=Lr(ar);if(!o)throw new Error("Compose context not found. Make sure you are using Compose components inside <Compose.Root>.");return o}var Xa=f('<div class="compose-root__error svelte-1mhx2b6" role="alert"> </div>'),$a=f('<div class="compose-root__reply-indicator svelte-1mhx2b6">Replying to post</div>'),en=f("<form><!> <!> <!></form>");function tn(o,e){ke(e,!0);let t=T(e,"config",19,()=>({})),a=T(e,"handlers",19,()=>({})),s=T(e,"initialState",19,()=>({}));const i=t().characterLimit||500,n={content:"",contentWarning:"",visibility:t().defaultVisibility||"public",mediaAttachments:[],submitting:!1,error:null,characterCount:0,overLimit:!1,inReplyTo:void 0,contentWarningEnabled:!1};let l=vt({...n,...s()});l.characterCount=l.content.length+l.contentWarning.length,l.overLimit=l.characterCount>i,Ke(()=>{const R=l.content.length+l.contentWarning.length;l.characterCount=R,l.overLimit=R>i});function d(){Object.assign(l,n),l.characterCount=l.content.length+l.contentWarning.length,l.overLimit=l.characterCount>i}const h=Za(t(),a(),s(),l);h.reset=d;async function m(R){if(R.preventDefault(),!(h.state.overLimit||h.state.submitting)){if(!h.handlers.onSubmit){console.warn("No onSubmit handler provided to Compose.Root");return}h.updateState({submitting:!0,error:null});try{await h.handlers.onSubmit({content:h.state.content,visibility:h.state.visibility,contentWarning:h.state.contentWarningEnabled?h.state.contentWarning:void 0,mediaAttachments:h.state.mediaAttachments,inReplyTo:h.state.inReplyTo}),h.reset()}catch(G){h.updateState({error:G})}finally{h.updateState({submitting:!1})}}}var p=en();let C;var A=v(p);{var B=R=>{var G=Xa(),D=v(G,!0);u(G),U(()=>X(D,h.state.error.message)),c(R,G)};x(A,R=>{h.state.error&&R(B)})}var w=g(A,2);{var q=R=>{var G=$a();c(R,G)};x(w,R=>{h.state.inReplyTo&&R(q)})}var y=g(w,2);{var M=R=>{var G=de(),D=te(G);We(D,()=>e.children),c(R,G)};x(y,R=>{e.children&&R(M)})}u(p),U(()=>{C=he(p,1,`compose-root ${h.config.class}`,"svelte-1mhx2b6",C,{"compose-root--submitting":h.state.submitting,"compose-root--over-limit":h.state.overLimit}),I(p,"aria-busy",h.state.submitting)}),ye("submit",p,m),c(o,p),xe()}var rn=f('<textarea aria-label="Compose post content" aria-describedby="compose-character-count"></textarea>');function sn(o,e){ke(e,!0);let t=T(e,"rows",3,4),a=T(e,"autofocus",3,!1),s=T(e,"class",3,"");const i=yt();let n;a()&&Xe(()=>{queueMicrotask(()=>n?.focus())});function l(){n&&(n.style.height="auto",n.style.height=`${n.scrollHeight}px`)}function d(p){const C=p.target;i.updateState({content:C.value}),l()}function h(p){if((p.metaKey||p.ctrlKey)&&p.key==="Enter"){p.preventDefault();const C=n.closest("form");C&&C.requestSubmit()}}var m=rn();Pr(m),m.__input=d,m.__keydown=h,dt(m,p=>n=p,()=>n),U(()=>{he(m,1,`compose-editor ${s()}`,"svelte-1hb5xix"),I(m,"rows",t()),I(m,"placeholder",i.config.placeholder),Fr(m,i.state.content),m.disabled=i.state.submitting}),c(o,m),xe()}_(["input","keydown"]);var an=f('<span class="compose-submit__spinner svelte-gc2xzq"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-gc2xzq"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"></path><path fill="currentColor" d="M12 4a8 8 0 0 0-8 8h2a6 6 0 0 1 6-6z"></path></svg></span> ',1),nn=f("<button><!></button>");function on(o,e){ke(e,!0);let t=T(e,"text",3,"Post"),a=T(e,"loadingText",3,"Posting..."),s=T(e,"class",3,"");const i=yt(),n=Zr({type:"submit"}),l=Q(()=>i.state.submitting||i.state.overLimit||i.state.content.trim().length===0);Ke(()=>{n.helpers.setDisabled(r(l)),n.helpers.setLoading(i.state.submitting)});var d=nn(),h=v(d);{var m=C=>{var A=an(),B=g(te(A));U(()=>X(B,` ${a()??""}`)),c(C,A)},p=C=>{var A=gt();U(()=>X(A,t())),c(C,A)};x(h,C=>{i.state.submitting?C(m):C(p,!1)})}u(d),Gr(d,C=>n.actions.button?.(C)),U(()=>he(d,1,`compose-submit ${s()}`,"svelte-gc2xzq")),c(o,d),xe()}var ln=Re('<svg class="compose-character-count__progress svelte-1gfrkus" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" fill="none" stroke="var(--compose-progress-bg, #e1e8ed)" stroke-width="2"></circle><circle cx="16" cy="16" fill="none" stroke="currentColor" stroke-width="2" transform="rotate(-90 16 16)" class="compose-character-count__progress-circle svelte-1gfrkus"></circle></svg>'),cn=f('<span class="compose-character-count__text svelte-1gfrkus"> </span>'),dn=f('<div id="compose-character-count" role="status" aria-live="polite"><!> <!></div>');function un(o,e){ke(e,!0);let t=T(e,"showProgress",3,!0),a=T(e,"class",3,"");const s=yt(),i=Q(()=>s.state.characterCount/s.config.characterLimit*100),n=Q(()=>r(i)>=80),l=Q(()=>s.state.overLimit),d=14,h=2*Math.PI*d,m=Q(()=>h-r(i)/100*h);var p=dn();let C;var A=v(p);{var B=y=>{var M=ln(),R=v(M);I(R,"r",d);var G=g(R);I(G,"r",d),I(G,"stroke-dasharray",h),u(M),U(()=>I(G,"stroke-dashoffset",r(m))),c(y,M)};x(A,y=>{t()&&y(B)})}var w=g(A,2);{var q=y=>{var M=cn(),R=v(M);u(M),U(()=>X(R,`${s.state.characterCount??""} / ${s.config.characterLimit??""}`)),c(y,M)};x(w,y=>{(r(n)||r(l))&&y(q)})}u(p),U(()=>{C=he(p,1,`compose-character-count ${a()}`,"svelte-1gfrkus",C,{"compose-character-count--near-limit":r(n),"compose-character-count--over-limit":r(l)}),I(p,"aria-label",`${s.state.characterCount} of ${s.config.characterLimit} characters used`)}),c(o,p),xe()}var vn=f("<option> </option>"),hn=f('<div><label for="compose-visibility" class="compose-visibility-select__label svelte-sjbzfi">Visibility</label> <select id="compose-visibility" class="compose-visibility-select__select svelte-sjbzfi" aria-label="Post visibility"></select> <p class="compose-visibility-select__description svelte-sjbzfi"> </p></div>');function fn(o,e){ke(e,!0);let t=T(e,"class",3,"");const a=yt(),s=[{value:"public",label:"Public",icon:"üåê",description:"Anyone can see this post"},{value:"unlisted",label:"Unlisted",icon:"üîì",description:"Not shown in public timelines"},{value:"private",label:"Followers only",icon:"üîí",description:"Only your followers can see"},{value:"direct",label:"Direct",icon:"‚úâÔ∏è",description:"Only mentioned users can see"}],i=Q(()=>s.find(C=>C.value===a.state.visibility)||s[0]);function n(C){const A=C.target;a.updateState({visibility:A.value})}var l=hn(),d=g(v(l),2);d.__change=n,Qe(d,21,()=>s,C=>C.value,(C,A)=>{var B=vn(),w=v(B);u(B);var q={};U(()=>{X(w,`${r(A).icon??""}
				${r(A).label??""}`),q!==(q=r(A).value)&&(B.value=(B.__value=r(A).value)??"")}),c(C,B)}),u(d);var h;Nr(d);var m=g(d,2),p=v(m,!0);u(m),u(l),U(()=>{he(l,1,`compose-visibility-select ${t()}`,"svelte-sjbzfi"),d.disabled=a.state.submitting,h!==(h=a.state.visibility)&&(d.value=(d.__value=a.state.visibility)??"",Dr(d,a.state.visibility)),X(p,r(i).description)}),c(o,l),xe()}_(["change"]);_(["click"]);_(["input","keydown"]);_(["click"]);_(["click","input"]);_(["change","click","keydown","input"]);_(["mousedown","click","input"]);const lt={Root:tn,Editor:sn,Submit:on,CharacterCount:un,VisibilitySelect:fn};_(["click"]);_(["click"]);_(["click","keydown"]);_(["click"]);_(["click"]);_(["click"]);_(["click","keydown"]);_(["click","keydown"]);_(["click"]);_(["click"]);_(["click"]);_(["click"]);_(["click"]);_(["click"]);var mn=f("<!> <!> <!> <!>",1);function Ln(o,e){ke(e,!0);const t={onSubmit:async i=>{try{const n=await Oe(),d={public:"PUBLIC",unlisted:"UNLISTED",private:"FOLLOWERS",direct:"DIRECT"}[i.visibility||"public"]||"PUBLIC",h=await n.createNote({content:i.content,visibility:d,sensitive:i.sensitive||!1,summary:i.spoilerText||void 0,inReplyToId:e.replyTo||i.inReplyToId||void 0});console.log("[ComposeBoxGC] Post created via GraphQL:",h),e.onPostSuccess?.(),typeof window<"u"&&window.location.reload()}catch(n){throw console.error("[ComposeBoxGC] Post failed:",n),n}}};var a=de(),s=te(a);at(s,()=>lt.Root,(i,n)=>{n(i,{get handlers(){return t},children:(l,d)=>{var h=mn(),m=te(h);{let B=Q(()=>e.initialText||"What's on your mind?");at(m,()=>lt.Editor,(w,q)=>{q(w,{autofocus:!0,get placeholder(){return r(B)}})})}var p=g(m,2);at(p,()=>lt.CharacterCount,(B,w)=>{w(B,{})});var C=g(p,2);at(C,()=>lt.VisibilitySelect,(B,w)=>{w(B,{})});var A=g(C,2);at(A,()=>lt.Submit,(B,w)=>{w(B,{})}),c(l,h)},$$slots:{default:!0}})}),c(o,a),xe()}export{Ln as C,An as T,jn as a};
