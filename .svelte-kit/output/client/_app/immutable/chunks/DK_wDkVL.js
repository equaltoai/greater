import{i as Ba,j as Cr,k as Mr,g as Tr,c as Re,l as Pe,a as g,b as v,d as Le,f as _,e as H,s as se,n as Ve,r as ir,o as Oe,p as ra,t as Yt}from"./LQvIjRXQ.js";import{ba as Na,a1 as N,j as Wa,y as Va,z as zr,bb as Lr,F as Ha,G as Er,t as jr,b7 as Ir,b2 as Ar,d as Or,x as _a,ae as Ga,S as m,bc as qr,V as Dr,a5 as Rr,a4 as Pr,L as Ur,bd as Fr,M as Ue,T as W,a2 as me,g as t,P as u,N as h,R as p,Q as c,O as Fe,W as b,a0 as _e,X as ke,ay as rt,Z as I,aj as ft,U as It,be as Br,_ as _t,Y as pe,a7 as Oa,bf as qa,A as Nr,bg as Wr,bh as Vr,bi as Hr,bj as ha,bk as Qa}from"./DIpZa-rG.js";import{p as ne,r as sr,s as bt,w as Ot,a as Gr}from"./DSqW2YpI.js";import{h as Qr,a as xe,b as xt,l as Je}from"./DLudcOmY.js";import{b as Kr,s as ze,c as vt,d as G,e as fa,f as Ka,H as Yr,g as Xr,h as Jr,L as Zr,S as $r,G as en,U as Ya,i as Zt,j as tn,k as an,r as Xa,l as rn,m as nn}from"./rm3Wd_Ll.js";import{i as z}from"./sirv-2-2.js";import{e as lt,i as ma}from"./BXn8meFs.js";import{b as St,c as Qt}from"./CC1uldkI.js";import{u as sn,s as on,r as ln,a as or,b as lr,c as cr,m as dr,d as ur,e as Ja}from"./BdV_69hN.js";import"./DQIc1P_2.js";import{d as cn,w as dn}from"./BxAlUqMe.js";import{g as st}from"./D3HftPX2.js";function wa(s,...e){(typeof s!="object"||!(s instanceof Node))&&Na();for(let a of e)typeof a!="function"&&Na()}function un(s,e,a){if(!e||e===Mr(String(a??"")))return;let n;const i=s.__svelte_meta?.loc;i?n=`near ${i.file}:${i.line}:${i.column}`:Ga?.[m]&&(n=`in ${Ga[m]}`),qr(Tr(n))}function Ia(s,e,a=!1,n=!1,i=!1){var r=s,o="";N(()=>{var l=zr;if(o===(o=e()??"")){Wa&&Va();return}if(l.nodes_start!==null&&(Lr(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!==""){if(Wa){for(var d=Ha.data,f=Va(),y=f;f!==null&&(f.nodeType!==Er||f.data!=="");)y=f,f=jr(f);if(f===null)throw Ir(),Ar;i||un(f.parentNode,d,o),Ba(Ha,y),r=Or(f);return}var E=o+"";a?E=`<svg>${E}</svg>`:n&&(E=`<math>${E}</math>`);var L=Cr(E);if((a||n)&&(L=_a(L)),Ba(_a(L),L.lastChild),a||n)for(;_a(L);)r.before(_a(L));else r.before(L)}})}function Wt(s,e,a){Dr(()=>{var n=Rr(()=>e(s,a?.())||{});if(n?.destroy)return()=>n.destroy()})}function At(s,e){Pr(()=>{const a=new Map,n=s(),i=Ur(n)?n:n==null?[]:Array.from(n),r=i.length;for(let o=0;o<r;o++){const l=e(i[o],o);if(a.has(l)){const d=String(a.get(l)),f=String(o);let y=String(l);y.startsWith("[object ")&&(y=null),Fr(d,f,y)}a.set(l,o)}})}let vn=0;function fn(s="greater"){return`${s}-${++vn}`}function mn(s){return s.key==="Enter"||s.key===" "||s.key==="Spacebar"}function Vt(s={}){const{type:e="button",disabled:a=!1,loading:n=!1,pressed:i=!1,id:r,label:o,onClick:l,onPressedChange:d,onKeyDown:f,onFocus:y,onBlur:E,onDestroy:L}=s;let M=null;const Q={disabled:a,loading:n,pressed:i,id:r||fn("button"),focused:!1},R=new Proxy(Q,{set(x,le,te){const Ce=x[le];return x[le]=te,le==="pressed"&&Ce!==te&&d?.(te),ce(),!0}});function ce(){M&&A(M)}function $(x){if(R.disabled||R.loading){x.preventDefault(),x.stopPropagation();return}l?.(x)}function C(x){if(!(R.disabled||R.loading)){if(mn(x)&&(x.preventDefault(),M&&l)){const le=new MouseEvent("click",{bubbles:!0,cancelable:!0});$(le)}f?.(x)}}function D(x){R.focused=!0,y?.(x)}function P(x){R.focused=!1,E?.(x)}function ee(x){return M=x,x.setAttribute("type",e),x.id=R.id,A(x),x.addEventListener("click",$),x.addEventListener("keydown",C),x.addEventListener("focus",D),x.addEventListener("blur",P),{update(){A(x)},destroy(){x.removeEventListener("click",$),x.removeEventListener("keydown",C),x.removeEventListener("focus",D),x.removeEventListener("blur",P),M=null,L?.()}}}function A(x){const le=!R.disabled&&!R.loading;x.disabled=R.disabled||R.loading,x.setAttribute("aria-disabled",String(R.disabled||R.loading)),x.setAttribute("aria-busy",String(R.loading)),x.setAttribute("aria-pressed",String(R.pressed)),o&&x.setAttribute("aria-label",o),le?x.removeAttribute("tabindex"):x.setAttribute("tabindex","-1")}function ie(){M&&!R.disabled&&!R.loading&&M.click()}function V(){M&&!R.disabled&&M.focus()}function k(){M&&M.blur()}function X(){R.pressed=!R.pressed}function T(x){R.disabled=x}function ve(x){R.loading=x}function fe(x){R.pressed=x}function U(){if(M){const x=M;x.removeEventListener("click",$),x.removeEventListener("keydown",C),x.removeEventListener("focus",D),x.removeEventListener("blur",P),M=null}L?.()}return{state:R,actions:{button:ee},helpers:{click:ie,focus:V,blur:k,toggle:X,setDisabled:T,setLoading:ve,setPressed:fe,destroy:U}}}function Gt(s,e,a){let n=a.initialDeps??[],i;function r(){var o,l,d,f;let y;a.key&&((o=a.debug)!=null&&o.call(a))&&(y=Date.now());const E=s();if(!(E.length!==n.length||E.some((Q,R)=>n[R]!==Q)))return i;n=E;let M;if(a.key&&((l=a.debug)!=null&&l.call(a))&&(M=Date.now()),i=e(...E),a.key&&((d=a.debug)!=null&&d.call(a))){const Q=Math.round((Date.now()-y)*100)/100,R=Math.round((Date.now()-M)*100)/100,ce=R/16,$=(C,D)=>{for(C=String(C);C.length<D;)C=" "+C;return C};console.info(`%c‚è± ${$(R,5)} /${$(Q,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*ce,120))}deg 100% 31%);`,a?.key)}return(f=a?.onChange)==null||f.call(a,i),i}return r.updateDeps=o=>{n=o},r}function Za(s,e){if(s===void 0)throw new Error("Unexpected undefined");return s}const hn=(s,e)=>Math.abs(s-e)<1.01,gn=(s,e,a)=>{let n;return function(...i){s.clearTimeout(n),n=s.setTimeout(()=>e.apply(this,i),a)}},$a=s=>{const{offsetWidth:e,offsetHeight:a}=s;return{width:e,height:a}},pn=s=>s,_n=s=>{const e=Math.max(s.startIndex-s.overscan,0),a=Math.min(s.endIndex+s.overscan,s.count-1),n=[];for(let i=e;i<=a;i++)n.push(i);return n},bn=(s,e)=>{const a=s.scrollElement;if(!a)return;const n=s.targetWindow;if(!n)return;const i=o=>{const{width:l,height:d}=o;e({width:Math.round(l),height:Math.round(d)})};if(i($a(a)),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(o=>{const l=()=>{const d=o[0];if(d?.borderBoxSize){const f=d.borderBoxSize[0];if(f){i({width:f.inlineSize,height:f.blockSize});return}}i($a(a))};s.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return r.observe(a,{box:"border-box"}),()=>{r.unobserve(a)}},er={passive:!0},tr=typeof window>"u"?!0:"onscrollend"in window,yn=(s,e)=>{const a=s.scrollElement;if(!a)return;const n=s.targetWindow;if(!n)return;let i=0;const r=s.options.useScrollendEvent&&tr?()=>{}:gn(n,()=>{e(i,!1)},s.options.isScrollingResetDelay),o=y=>()=>{const{horizontal:E,isRtl:L}=s.options;i=E?a.scrollLeft*(L&&-1||1):a.scrollTop,r(),e(i,y)},l=o(!0),d=o(!1);d(),a.addEventListener("scroll",l,er);const f=s.options.useScrollendEvent&&tr;return f&&a.addEventListener("scrollend",d,er),()=>{a.removeEventListener("scroll",l),f&&a.removeEventListener("scrollend",d)}},xn=(s,e,a)=>{if(e?.borderBoxSize){const n=e.borderBoxSize[0];if(n)return Math.round(n[a.options.horizontal?"inlineSize":"blockSize"])}return s[a.options.horizontal?"offsetWidth":"offsetHeight"]},wn=(s,{adjustments:e=0,behavior:a},n)=>{var i,r;const o=s+e;(r=(i=n.scrollElement)==null?void 0:i.scrollTo)==null||r.call(i,{[n.options.horizontal?"left":"top"]:o,behavior:a})};class kn{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let a=null;const n=()=>a||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:a=new this.targetWindow.ResizeObserver(i=>{i.forEach(r=>{const o=()=>{this._measureElement(r.target,r)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var i;(i=n())==null||i.disconnect(),a=null},observe:i=>{var r;return(r=n())==null?void 0:r.observe(i,{box:"border-box"})},unobserve:i=>{var r;return(r=n())==null?void 0:r.unobserve(i)}}})(),this.range=null,this.setOptions=a=>{Object.entries(a).forEach(([n,i])=>{typeof i>"u"&&delete a[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:pn,rangeExtractor:_n,onChange:()=>{},measureElement:xn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...a}},this.notify=a=>{var n,i;(i=(n=this.options).onChange)==null||i.call(n,this,a)},this.maybeNotify=Gt(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),a=>{this.notify(a)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(a=>a()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var a;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((a=this.scrollElement)==null?void 0:a.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(a,n)=>{const i=new Map,r=new Map;for(let o=n-1;o>=0;o--){const l=a[o];if(i.has(l.lane))continue;const d=r.get(l.lane);if(d==null||l.end>d.end?r.set(l.lane,l):l.end<d.end&&i.set(l.lane,!0),i.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Gt(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(a,n,i,r,o)=>(this.pendingMeasuredCacheIndexes=[],{count:a,paddingStart:n,scrollMargin:i,getItemKey:r,enabled:o}),{key:!1}),this.getMeasurements=Gt(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:a,paddingStart:n,scrollMargin:i,getItemKey:r,enabled:o},l)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(y=>{this.itemSizeCache.set(y.key,y.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,d);for(let y=d;y<a;y++){const E=r(y),L=this.options.lanes===1?f[y-1]:this.getFurthestMeasurement(f,y),M=L?L.end+this.options.gap:n+i,Q=l.get(E),R=typeof Q=="number"?Q:this.options.estimateSize(y),ce=M+R,$=L?L.lane:y%this.options.lanes;f[y]={index:y,start:M,size:R,end:ce,key:E,lane:$}}return this.measurementsCache=f,f},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=Gt(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(a,n,i,r)=>this.range=a.length>0&&n>0?Sn({measurements:a,outerSize:n,scrollOffset:i,lanes:r}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=Gt(()=>{let a=null,n=null;const i=this.calculateRange();return i&&(a=i.startIndex,n=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,a,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,a,n]},(a,n,i,r,o)=>r===null||o===null?[]:a({startIndex:r,endIndex:o,overscan:n,count:i}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=a=>{const n=this.options.indexAttribute,i=a.getAttribute(n);return i?parseInt(i,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(a,n)=>{const i=this.indexFromElement(a),r=this.measurementsCache[i];if(!r)return;const o=r.key,l=this.elementsCache.get(o);l!==a&&(l&&this.observer.unobserve(l),this.observer.observe(a),this.elementsCache.set(o,a)),a.isConnected&&this.resizeItem(i,this.options.measureElement(a,n,this))},this.resizeItem=(a,n)=>{const i=this.measurementsCache[a];if(!i)return;const r=this.itemSizeCache.get(i.key)??i.size,o=n-r;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",o),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,n)),this.notify(!1))},this.measureElement=a=>{if(!a){this.elementsCache.forEach((n,i)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(i))});return}this._measureElement(a,void 0)},this.getVirtualItems=Gt(()=>[this.getVirtualIndexes(),this.getMeasurements()],(a,n)=>{const i=[];for(let r=0,o=a.length;r<o;r++){const l=a[r],d=n[l];i.push(d)}return i},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=a=>{const n=this.getMeasurements();if(n.length!==0)return Za(n[vr(0,n.length-1,i=>Za(n[i]).start,a)])},this.getOffsetForAlignment=(a,n,i=0)=>{const r=this.getSize(),o=this.getScrollOffset();n==="auto"&&(n=a>=o+r?"end":"start"),n==="center"?a+=(i-r)/2:n==="end"&&(a-=r);const l=this.getTotalSize()+this.options.scrollMargin-r;return Math.max(Math.min(l,a),0)},this.getOffsetForIndex=(a,n="auto")=>{a=Math.max(0,Math.min(a,this.options.count-1));const i=this.measurementsCache[a];if(!i)return;const r=this.getSize(),o=this.getScrollOffset();if(n==="auto")if(i.end>=o+r-this.options.scrollPaddingEnd)n="end";else if(i.start<=o+this.options.scrollPaddingStart)n="start";else return[o,n];const l=n==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,n,i.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(a,{align:n="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(a,n),{adjustments:void 0,behavior:i})},this.scrollToIndex=(a,{align:n="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),a=Math.max(0,Math.min(a,this.options.count-1));let r=0;const o=10,l=f=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(a,f);if(!y){console.warn("Failed to get offset for index:",a);return}const[E,L]=y;this._scrollToOffset(E,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const M=this.getScrollOffset(),Q=this.getOffsetForIndex(a,L);if(!Q){console.warn("Failed to get offset for index:",a);return}hn(Q[0],M)||d(L)})},d=f=>{this.targetWindow&&(r++,r<o?(this.options.debug&&console.info("Schedule retry",r,o),this.targetWindow.requestAnimationFrame(()=>l(f))):console.warn(`Failed to scroll to index ${a} after ${o} attempts.`))};l(n)},this.scrollBy=(a,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+a,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var a;const n=this.getMeasurements();let i;if(n.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((a=n[n.length-1])==null?void 0:a.end)??0;else{const r=Array(this.options.lanes).fill(null);let o=n.length-1;for(;o>=0&&r.some(l=>l===null);){const l=n[o];r[l.lane]===null&&(r[l.lane]=l.end),o--}i=Math.max(...r.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(a,{adjustments:n,behavior:i})=>{this.options.scrollToFn(a,{behavior:i,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const vr=(s,e,a,n)=>{for(;s<=e;){const i=(s+e)/2|0,r=a(i);if(r<n)s=i+1;else if(r>n)e=i-1;else return i}return s>0?s-1:0};function Sn({measurements:s,outerSize:e,scrollOffset:a,lanes:n}){const i=s.length-1,r=d=>s[d].start;if(s.length<=n)return{startIndex:0,endIndex:i};let o=vr(0,i,r,a),l=o;if(n===1)for(;l<i&&s[l].end<a+e;)l++;else if(n>1){const d=Array(n).fill(0);for(;l<i&&d.some(y=>y<a+e);){const y=s[l];d[y.lane]=y.end,l++}const f=Array(n).fill(a+e);for(;o>=0&&f.some(y=>y>=a);){const y=s[o];f[y.lane]=y.start,o--}o=Math.max(0,o-o%n),l=Math.min(i,l+(n-1-l%n))}return{startIndex:o,endIndex:l}}function Cn(s){const e=new kn(s),a=e.setOptions;let n;const i=r=>{const o={...e.options,...r,onChange:r.onChange};a({...o,onChange:(l,d)=>{n.set(l),o.onChange?.(l,d)}}),e._willUpdate()};return n=dn(e,()=>(i(s),e._didMount())),cn(n,r=>Object.assign(r,{setOptions:i}))}function Mn(s){return Cn({observeElementRect:bn,observeElementOffset:yn,scrollToFn:wn,...s})}ot[m]="node_modules/.pnpm/@equaltoai+greater-components@file+..+greater-components+packages+greater-components_re_b4c086aa19ba9ae4cdaac7df975eaac6/node_modules/@equaltoai/greater-components/dist/primitives/src/components/Button.svelte";var Tn=g(_('<span class="gr-button__prefix"><!></span>'),ot[m],[[169,4]]),zn=g(_('<span class="gr-button__spinner" aria-hidden="true"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"></path></svg></span>'),ot[m],[[175,4,[[176,6,[[186,8]]]]]]),Ln=g(_('<span class="gr-button__suffix"><!></span>'),ot[m],[[198,4]]),En=g(_("<button><!> <!> <span><!></span> <!></button>"),ot[m],[[157,0,[[191,2]]]]);function ot(s,e){Re(new.target),Ue(e,!0,ot);let a=ne(e,"variant",3,"solid"),n=ne(e,"size",3,"md"),i=ne(e,"type",3,"button"),r=ne(e,"disabled",3,!1),o=ne(e,"loading",3,!1),l=ne(e,"class",3,""),d=sr(e,["$$slots","$$events","$$legacy","variant","size","type","disabled","loading","class","children","prefix","suffix","onclick","onkeydown"],"restProps");const f=W(me(()=>()=>["gr-button",`gr-button--${a()}`,`gr-button--${n()}`,o()&&"gr-button--loading",r()&&"gr-button--disabled",l()].filter(Boolean).join(" ")),"buttonClass");function y(V){(b(V.key,"Enter")||b(V.key," "))&&(V.preventDefault(),!r()&&!o()&&e.onclick&&e.onclick(V)),e.onkeydown?.(V)}function E(V){if(r()||o()){V.preventDefault(),V.stopPropagation();return}e.onclick?.(V)}var L={...Pe()},M=En();Kr(M,V=>({class:V,type:i(),disabled:r()||o(),"aria-disabled":r()||o(),"aria-busy":o(),tabindex:r()?-1:0,onclick:E,onkeydown:y,...d}),[()=>t(f)()]);var Q=u(M);{var R=V=>{var k=Tn(),X=u(k);h(()=>bt(X,()=>e.prefix),"render",ot,170,6),c(k),v(V,k)};h(()=>z(Q,V=>{e.prefix&&V(R)}),"if",ot,168,2)}var ce=p(Q,2);{var $=V=>{var k=zn();v(V,k)};h(()=>z(ce,V=>{o()&&V($)}),"if",ot,174,2)}var C=p(ce,2);let D;var P=u(C);{var ee=V=>{var k=Le(),X=_e(k);h(()=>bt(X,()=>e.children),"render",ot,193,6),v(V,k)};h(()=>z(P,V=>{e.children&&V(ee)}),"if",ot,192,4)}c(C);var A=p(C,2);{var ie=V=>{var k=Ln(),X=u(k);h(()=>bt(X,()=>e.suffix),"render",ot,199,6),c(k),v(V,k)};h(()=>z(A,V=>{e.suffix&&V(ie)}),"if",ot,197,2)}return c(M),N(()=>D=ze(C,1,"gr-button__content",null,D,{"gr-button__content--loading":o()})),v(s,M),Fe(L)}H(["keydown","click"]);H(["input","change"]);H(["change"]);H(["change"]);H(["change"]);H(["change","click"]);ye[m]="node_modules/.pnpm/@equaltoai+greater-components@file+..+greater-components+packages+greater-components_re_b4c086aa19ba9ae4cdaac7df975eaac6/node_modules/@equaltoai/greater-components/dist/primitives/src/components/Avatar.svelte";var jn=g(_('<div class="gr-avatar__loading" aria-hidden="true"><svg class="gr-avatar__spinner" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"></path></svg></div>'),ye[m],[[190,4,[[191,6,[[202,8]]]]]]),In=g(_('<span class="gr-avatar__initials"> </span>'),ye[m],[[219,10]]),An=g(ra('<svg class="gr-avatar__fallback-icon" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg>'),ye[m],[[228,10,[[235,12]]]]),On=g(_('<div class="gr-avatar__placeholder" aria-hidden="true"><!></div>'),ye[m],[[217,6]]),qn=g(_('<img class="gr-avatar__image"/> <!>',1),ye[m],[[206,4]]),Dn=g(_('<span class="gr-avatar__initials"> </span>'),ye[m],[[244,8]]),Rn=g(ra('<svg class="gr-avatar__fallback-icon" width="100%" height="100%" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg>'),ye[m],[[253,8,[[260,10]]]]),Pn=g(_('<div class="gr-avatar__placeholder" aria-hidden="true"><!></div>'),ye[m],[[242,4]]),Un=g(_('<div role="status"></div>'),ye[m],[[267,4]]),Fn=g(_("<!> <!>",1),ye[m],[]),Bn=g(_('<button type="button"><!></button>'),ye[m],[[277,2]]),Nn=g(_("<div><!></div>"),ye[m],[[298,2]]);function ye(s,e){Re(new.target),Ue(e,!0,ye);const a=Ot(ye,function(U){wa(...arguments);var x=Fn(),le=_e(x);{var te=q=>{var re=jn();v(q,re)},Ce=q=>{var re=Le(),j=_e(re);{var K=ue=>{var ge=qn(),Z=_e(ge);St(Z,F=>I(ce,F),()=>t(ce));var S=p(Z,2);{var B=F=>{var J=On(),de=u(J);{var Me=je=>{var we=In(),Qe=u(we,!0);c(we),N(et=>{vt(we,`background-color: ${et??""}`),se(Qe,t(D))},[()=>t(P)()]),v(je,we)},Ne=je=>{var we=Le(),Qe=_e(we);{var et=Ge=>{var Ze=Le(),ct=_e(Ze);h(()=>bt(ct,()=>e.fallback),"render",ye,226,10),v(Ge,Ze)},nt=Ge=>{var Ze=An();v(Ge,Ze)};h(()=>z(Qe,Ge=>{e.fallback?Ge(et):Ge(nt,!1)},!0),"if",ye,225,8)}v(je,we)};h(()=>z(de,je=>{t(D)?je(Me):je(Ne,!1)}),"if",ye,218,8)}c(J),v(F,J)};h(()=>z(S,F=>{t(Q)||F(B)}),"if",ye,216,4)}N(()=>{G(Z,"src",e.src),G(Z,"alt",e.alt||n()||"Avatar"),vt(Z,`display: ${t(Q)?"block":"none"}`)}),Ve("load",Z,ee),Ve("error",Z,A),ir(Z),v(ue,ge)},oe=ue=>{var ge=Pn(),Z=u(ge);{var S=F=>{var J=Dn(),de=u(J,!0);c(J),N(Me=>{vt(J,`background-color: ${Me??""}; color: white;`),se(de,t(D))},[()=>t(P)()]),v(F,J)},B=F=>{var J=Le(),de=_e(J);{var Me=je=>{var we=Le(),Qe=_e(we);h(()=>bt(Qe,()=>e.fallback),"render",ye,251,8),v(je,we)},Ne=je=>{var we=Rn();v(je,we)};h(()=>z(de,je=>{e.fallback?je(Me):je(Ne,!1)},!0),"if",ye,250,6)}v(F,J)};h(()=>z(Z,F=>{t(D)?F(S):F(B,!1)}),"if",ye,243,6)}c(ge),v(ue,ge)};h(()=>z(j,ue=>{e.src&&!t(R)?ue(K):ue(oe,!1)},!0),"if",ye,205,2)}v(q,re)};h(()=>z(le,q=>{o()?q(te):q(Ce,!1)}),"if",ye,189,2)}var qe=p(le,2);{var ae=q=>{var re=Un();N(j=>{ze(re,1,j),G(re,"id",V),G(re,"aria-label",`Status: ${e.status}`)},[()=>fa(t(C)())]),v(q,re)};h(()=>z(qe,q=>{e.status&&q(ae)}),"if",ye,266,2)}v(U,x)});let n=ne(e,"name",3,""),i=ne(e,"size",3,"md"),r=ne(e,"shape",3,"circle"),o=ne(e,"loading",3,!1),l=ne(e,"statusPosition",3,"bottom-right"),d=ne(e,"class",3,"");const f=new Set(["button","checkbox","combobox","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","searchbox","slider","spinbutton","switch","tab","textbox","treeitem"]),y=W(me(()=>()=>{if(b(e.tabindex,void 0)||b(e.tabindex,null))return;if(b(typeof e.tabindex,"number"))return Number.isFinite(e.tabindex)?e.tabindex:void 0;const U=Number(e.tabindex);return Number.isFinite(U)?U:void 0}),"parsedTabIndex"),E=W(me(()=>()=>!!(e.onclick||e.onkeydown||e.onkeyup)),"hasInteractiveHandlers"),L=U=>U?f.has(U):!1,M=W(me(()=>()=>!!(L(e.role)||t(E)||b(t(y),void 0,!1)&&t(y)>=0)),"isInteractive");let Q=W(ke(!1),"imageLoaded"),R=W(ke(!1),"imageError"),ce=W(ke(null),"imageElement");const $=W(me(()=>()=>["gr-avatar",`gr-avatar--${i()}`,`gr-avatar--${r()}`,o()&&"gr-avatar--loading",e.status&&"gr-avatar--has-status",d()].filter(Boolean).join(" ")),"avatarClass"),C=W(me(()=>()=>e.status?["gr-avatar__status",`gr-avatar__status--${e.status}`,`gr-avatar__status--${l()}`].filter(Boolean).join(" "):""),"statusClass"),D=W(me(()=>()=>{if(!n())return"";const U=n().trim().split(/\s+/);return b(U.length,1)?U[0].substring(0,2).toUpperCase():U.slice(0,2).map(x=>x.charAt(0)).join("").toUpperCase()}),"initials"),P=W(me(()=>()=>{if(!n())return"var(--gr-semantic-background-secondary)";let U=0;for(let le=0;le<n().length;le++)U=n().charCodeAt(le)+((U<<5)-U);return`hsl(${Math.abs(U)%360}, 65%, 55%)`}),"initialsBackgroundColor");function ee(){I(Q,!0),I(R,!1)}function A(){I(Q,!1),I(R,!0)}rt(()=>{e.src&&(I(Q,!1),I(R,!1))});const ie=W(me(()=>()=>e.alt?e.alt:n()?n():"Avatar"),"accessibleName"),V=`avatar-status-${Math.random().toString(36).substr(2,9)}`;var k={...Pe()},X=Le(),T=_e(X);{var ve=U=>{var x=Bn();x.__click=function(...te){Oe(()=>e.onclick,this,te,ye,[284,5])},x.__keydown=function(...te){Oe(()=>e.onkeydown,this,te,ye,[289,5])},x.__keyup=function(...te){Oe(()=>e.onkeyup,this,te,ye,[290,5])};var le=u(x);h(()=>a(le),"render",ye,295,4),c(x),N((te,Ce)=>{ze(x,1,te),G(x,"aria-label",Ce),G(x,"aria-labelledby",e["aria-labelledby"]),G(x,"aria-describedby",e["aria-describedby"]??(e.status?V:void 0)),G(x,"id",e.id),vt(x,e.style),G(x,"role",e.role),G(x,"tabindex",t(y))},[()=>fa(t($)()),()=>e["aria-label"]??t(ie)()]),Ve("mouseenter",x,function(...te){Oe(()=>e.onmouseenter,this,te,ye,[285,5])}),Ve("mouseleave",x,function(...te){Oe(()=>e.onmouseleave,this,te,ye,[286,5])}),Ve("focus",x,function(...te){Oe(()=>e.onfocus,this,te,ye,[287,5])}),Ve("blur",x,function(...te){Oe(()=>e.onblur,this,te,ye,[288,5])}),v(U,x)},fe=U=>{var x=Nn();x.__click=function(...te){Oe(()=>e.onclick,this,te,ye,[306,5])},x.__keydown=function(...te){Oe(()=>e.onkeydown,this,te,ye,[311,5])},x.__keyup=function(...te){Oe(()=>e.onkeyup,this,te,ye,[312,5])};var le=u(x);h(()=>a(le),"render",ye,314,4),c(x),N((te,Ce)=>{ze(x,1,te),G(x,"role",e.role??"img"),G(x,"aria-label",Ce),G(x,"aria-labelledby",e["aria-labelledby"]),G(x,"aria-describedby",e["aria-describedby"]??(e.status?V:void 0)),G(x,"id",e.id),vt(x,e.style)},[()=>fa(t($)()),()=>e["aria-label"]??t(ie)()]),Ve("mouseenter",x,function(...te){Oe(()=>e.onmouseenter,this,te,ye,[307,5])}),Ve("mouseleave",x,function(...te){Oe(()=>e.onmouseleave,this,te,ye,[308,5])}),Ve("focus",x,function(...te){Oe(()=>e.onfocus,this,te,ye,[309,5])}),Ve("blur",x,function(...te){Oe(()=>e.onblur,this,te,ye,[310,5])}),v(U,x)};h(()=>z(T,U=>{t(M)?U(ve):U(fe,!1)}),"if",ye,276,0)}return v(s,X),Fe(k)}H(["click","keydown","keyup"]);Te[m]="node_modules/.pnpm/@equaltoai+greater-components@file+..+greater-components+packages+greater-components_re_b4c086aa19ba9ae4cdaac7df975eaac6/node_modules/@equaltoai/greater-components/dist/primitives/src/components/Skeleton.svelte";var Wn=g(_('<div class="gr-skeleton__wave"></div>'),Te[m],[[140,4]]),Vn=g(_('<button type="button"><!></button>'),Te[m],[[146,4]]),Hn=g(_('<div aria-hidden="true"><!></div>'),Te[m],[[167,4]]);function Te(s,e){Re(new.target),Ue(e,!0,Te);const a=Ot(Te,function(D){wa(...arguments);var P=Le(),ee=_e(P);{var A=ie=>{var V=Wn();v(ie,V)};h(()=>z(ee,ie=>{b(i(),"wave")&&ie(A)}),"if",Te,139,2)}v(D,P)});let n=ne(e,"variant",3,"text"),i=ne(e,"animation",3,"pulse"),r=ne(e,"class",3,""),o=ne(e,"loading",3,!0);const l=new Set(["button","checkbox","combobox","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","searchbox","slider","spinbutton","switch","tab","textbox","treeitem"]),d=W(me(()=>()=>{if(b(e.tabindex,void 0)||b(e.tabindex,null))return;if(b(typeof e.tabindex,"number"))return Number.isFinite(e.tabindex)?e.tabindex:void 0;const D=Number(e.tabindex);return Number.isFinite(D)?D:void 0}),"parsedTabIndex"),f=W(me(()=>()=>!!(e.onclick||e.onkeydown||e.onkeyup)),"hasInteractiveHandlers"),y=D=>D?l.has(D):!1,E=W(me(()=>()=>!!(y(e.role)||t(f)||b(t(d),void 0,!1)&&t(d)>=0)),"isInteractive"),L=W(me(()=>()=>["gr-skeleton",`gr-skeleton--${n()}`,b(i(),"none",!1)&&`gr-skeleton--${i()}`,r()].filter(Boolean).join(" ")),"skeletonClass"),M=W(me(()=>()=>{const D={};if(b(e.width,void 0,!1)&&(D.width=b(typeof e.width,"number")?`${e.width}px`:e.width),b(e.height,void 0,!1)&&(D.height=b(typeof e.height,"number")?`${e.height}px`:e.height),b(n(),"text"))e.height||(D.height="1em"),e.width||(D.width="100%");else if(b(n(),"circular")){const ee=e.width||e.height||"40px";D.width=b(typeof ee,"number")?`${ee}px`:ee,D.height=b(typeof ee,"number")?`${ee}px`:ee}else(b(n(),"rectangular")||b(n(),"rounded"))&&(e.width||(D.width="100%"),e.height||(D.height="120px"));const P=Object.entries(D).map(([ee,A])=>`${ee}: ${A}`).join("; ");return e.style?`${P}; ${e.style}`:P}),"skeletonStyle");var Q={...Pe()},R=Le(),ce=_e(R);{var $=D=>{var P=Le(),ee=_e(P);{var A=V=>{var k=Vn();k.__click=function(...T){Oe(()=>e.onclick,this,T,Te,[154,7])},k.__keydown=function(...T){Oe(()=>e.onkeydown,this,T,Te,[159,7])},k.__keyup=function(...T){Oe(()=>e.onkeyup,this,T,Te,[160,7])};var X=u(k);h(()=>a(X),"render",Te,164,6),c(k),N((T,ve)=>{ze(k,1,T),vt(k,ve),G(k,"role",e.role),G(k,"aria-label",e["aria-label"]??"Loading"),G(k,"aria-labelledby",e["aria-labelledby"]),G(k,"aria-describedby",e["aria-describedby"]),G(k,"id",e.id),G(k,"tabindex",t(d))},[()=>fa(t(L)()),()=>t(M)()]),Ve("mouseenter",k,function(...T){Oe(()=>e.onmouseenter,this,T,Te,[155,7])}),Ve("mouseleave",k,function(...T){Oe(()=>e.onmouseleave,this,T,Te,[156,7])}),Ve("focus",k,function(...T){Oe(()=>e.onfocus,this,T,Te,[157,7])}),Ve("blur",k,function(...T){Oe(()=>e.onblur,this,T,Te,[158,7])}),v(V,k)},ie=V=>{var k=Hn();k.__click=function(...T){Oe(()=>e.onclick,this,T,Te,[176,7])},k.__keydown=function(...T){Oe(()=>e.onkeydown,this,T,Te,[181,7])},k.__keyup=function(...T){Oe(()=>e.onkeyup,this,T,Te,[182,7])};var X=u(k);h(()=>a(X),"render",Te,184,6),c(k),N((T,ve)=>{ze(k,1,T),vt(k,ve),G(k,"role",e.role??"status"),G(k,"aria-label",e["aria-label"]??"Loading"),G(k,"aria-labelledby",e["aria-labelledby"]),G(k,"aria-describedby",e["aria-describedby"]),G(k,"id",e.id)},[()=>fa(t(L)()),()=>t(M)()]),Ve("mouseenter",k,function(...T){Oe(()=>e.onmouseenter,this,T,Te,[177,7])}),Ve("mouseleave",k,function(...T){Oe(()=>e.onmouseleave,this,T,Te,[178,7])}),Ve("focus",k,function(...T){Oe(()=>e.onfocus,this,T,Te,[179,7])}),Ve("blur",k,function(...T){Oe(()=>e.onblur,this,T,Te,[180,7])}),v(V,k)};h(()=>z(ee,V=>{t(E)?V(A):V(ie,!1)}),"if",Te,145,2)}v(D,P)},C=D=>{var P=Le(),ee=_e(P);{var A=ie=>{var V=Le(),k=_e(V);h(()=>bt(k,()=>e.children),"render",Te,188,2),v(ie,V)};h(()=>z(ee,ie=>{e.children&&ie(A)},!0),"if",Te,187,0)}v(D,P)};h(()=>z(ce,D=>{o()?D($):D(C,!1)}),"if",Te,144,0)}return v(s,R),Fe(Q)}H(["click","keydown","keyup"]);H(["click","keydown"]);H(["click","keydown"]);const ar="gr-preferences-v1",ba={colorScheme:"auto",density:"comfortable",fontSize:"medium",motion:"normal",customColors:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#ec4899"},highContrastMode:!1,fontScale:1};function ya(s){return{...s,customColors:{...s.customColors}}}function La(s,e){const a={...s,...e};return a.customColors={...s.customColors,...e.customColors??{}},ya(a)}class Gn{constructor(){this._preferences=ya(ba),this._systemColorScheme="light",this._systemMotion="normal",this._systemHighContrast=!1,this.loadPreferences(),this.setupSystemPreferenceDetection(),this.applyTheme()}get preferences(){return ya(this._preferences)}get state(){const{customColors:e,...a}=this._preferences;return{...a,customColors:{...e},systemColorScheme:this._systemColorScheme,systemMotion:this._systemMotion,systemHighContrast:this._systemHighContrast,resolvedColorScheme:this.resolvedColorScheme}}get resolvedColorScheme(){return this._preferences.highContrastMode||this._systemHighContrast?"high-contrast":this._preferences.colorScheme==="auto"?this._systemColorScheme:this._preferences.colorScheme==="high-contrast"?"high-contrast":this._preferences.colorScheme}get resolvedMotion(){return this._systemMotion==="reduced"?"reduced":this._preferences.motion}setColorScheme(e){this._preferences.colorScheme=e,this.saveAndApply()}setDensity(e){this._preferences.density=e,this.saveAndApply()}setFontSize(e){this._preferences.fontSize=e,this.saveAndApply()}setFontScale(e){this._preferences.fontScale=Math.max(.85,Math.min(1.5,e)),this.saveAndApply()}setMotion(e){this._preferences.motion=e,this.saveAndApply()}setCustomColors(e){this._preferences.customColors={...this._preferences.customColors,...e},this.saveAndApply()}setHighContrastMode(e){this._preferences.highContrastMode=e,this.saveAndApply()}updatePreferences(e){this._preferences=La(this._preferences,e),this.saveAndApply()}reset(){this._preferences=ya(ba),this.saveAndApply()}export(){return JSON.stringify(this._preferences,null,2)}import(e){try{const a=JSON.parse(e);return this.validatePreferences(a)?(this._preferences=La(ba,a),this.saveAndApply(),!0):!1}catch{return!1}}loadPreferences(){if(!(typeof window>"u"))try{const e=localStorage.getItem(ar);if(e){const a=JSON.parse(e);this.validatePreferences(a)&&(this._preferences=La(ba,a))}}catch(e){console.warn("Failed to load preferences from localStorage:",e)}}savePreferences(){if(!(typeof window>"u"))try{localStorage.setItem(ar,JSON.stringify(this._preferences))}catch(e){console.warn("Failed to save preferences to localStorage:",e)}}saveAndApply(){this.savePreferences(),this.applyTheme()}validatePreferences(e){const a=["light","dark","high-contrast","auto"],n=["compact","comfortable","spacious"],i=["small","medium","large"],r=["normal","reduced"];return!(e.colorScheme&&!a.includes(e.colorScheme)||e.density&&!n.includes(e.density)||e.fontSize&&!i.includes(e.fontSize)||e.motion&&!r.includes(e.motion))}setupSystemPreferenceDetection(){typeof window>"u"||(this.darkModeQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._systemColorScheme=this.darkModeQuery.matches?"dark":"light",this.darkModeQuery.addEventListener("change",e=>{this._systemColorScheme=e.matches?"dark":"light",this._preferences.colorScheme==="auto"&&this.applyTheme()}),this.reducedMotionQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this._systemMotion=this.reducedMotionQuery.matches?"reduced":"normal",this.reducedMotionQuery.addEventListener("change",e=>{this._systemMotion=e.matches?"reduced":"normal",this.applyTheme()}),this.highContrastQuery=window.matchMedia("(prefers-contrast: high)"),this._systemHighContrast=this.highContrastQuery.matches,this.highContrastQuery.addEventListener("change",e=>{this._systemHighContrast=e.matches,this.applyTheme()}))}applyTheme(){if(typeof window>"u")return;const e=document.documentElement;e.setAttribute("data-theme",this.resolvedColorScheme),e.setAttribute("data-density",this._preferences.density),e.setAttribute("data-font-size",this._preferences.fontSize),e.setAttribute("data-motion",this.resolvedMotion),this.applyCustomProperties()}applyCustomProperties(){if(typeof window>"u")return;const e=document.documentElement;this._preferences.customColors.primary&&e.style.setProperty("--gr-custom-primary",this._preferences.customColors.primary),this._preferences.customColors.secondary&&e.style.setProperty("--gr-custom-secondary",this._preferences.customColors.secondary),this._preferences.customColors.accent&&e.style.setProperty("--gr-custom-accent",this._preferences.customColors.accent),e.style.setProperty("--gr-font-scale",String(this._preferences.fontScale));const a={compact:.85,comfortable:1,spacious:1.2};e.style.setProperty("--gr-density-scale",String(a[this._preferences.density]))}destroy(){this.darkModeQuery}}new Gn;H(["click","change","input"]);$t[m]="src/lib/layouts/BaseLayout.svelte";var Qn=g(_('<meta name="description"/> <meta property="og:title"/> <meta property="og:description"/>',1),$t[m],[[22,2],[23,2],[24,2]]),Kn=g(_('<div class="base-layout svelte-1q4t6f0"><!></div>'),$t[m],[[27,0]]);function $t(s,e){Re(new.target),Ue(e,!0,$t);let a=ne(e,"title",3,"Greater"),n=ne(e,"description",3,"A modern Mastodon client");rt(()=>{b(typeof document,"undefined",!1)&&(document.title=a())});var i={...Pe()},r=Kn();Qr("1q4t6f0",l=>{var d=Qn(),f=_e(d),y=p(f,2),E=p(y,2);N(()=>{G(f,"content",n()),G(y,"content",a()),G(E,"content",n())}),v(l,d)});var o=u(r);return h(()=>bt(o,()=>e.children),"render",$t,28,2),c(r),v(s,r),Fe(i)}Ae[m]="src/lib/components/islands/svelte/Navigation.svelte";var Yn=g(_('<img class="user-avatar svelte-jxkij"/>'),Ae[m],[[75,10]]),Xn=g(_('<div class="user-avatar-icon svelte-jxkij"><!></div>'),Ae[m],[[81,10]]),Jn=g(_('<div class="user-menu svelte-jxkij"><!> <div class="user-info svelte-jxkij"><div class="user-name svelte-jxkij"> </div> <div class="user-handle svelte-jxkij"> </div></div></div>'),Ae[m],[[73,6,[[85,8,[[86,10],[87,10]]]]]]),Zn=g(_('<a href="/auth/login" class="sign-in-button svelte-jxkij"><!> <span>Sign In</span></a>'),Ae[m],[[91,6,[[93,8]]]]),$n=g(_('<span class="active-indicator svelte-jxkij"></span>'),Ae[m],[[107,12]]),ei=g(_('<span class="badge svelte-jxkij"> </span>'),Ae[m],[[112,14]]),ti=g(_('<li><a><!> <span class="nav-icon svelte-jxkij"><!> <!></span> <span class="nav-label svelte-jxkij"> </span></a></li>'),Ae[m],[[100,6,[[101,8,[[109,10],[117,10]]]]]]),ai=g(_('<div class="compose-button-wrapper svelte-jxkij"><a href="/compose" class="compose-button svelte-jxkij"><span class="compose-icon svelte-jxkij">‚úèÔ∏è</span> <span>Compose</span></a></div>'),Ae[m],[[124,4,[[125,6,[[126,8],[127,8]]]]]]),ri=g(_('<span class="mobile-indicator svelte-jxkij"></span>'),Ae[m],[[137,6]]),ni=g(_('<span class="mobile-indicator svelte-jxkij"></span>'),Ae[m],[[143,6]]),ii=g(_('<span class="mobile-indicator svelte-jxkij"></span>'),Ae[m],[[149,6]]),si=g(_('<span class="mobile-badge svelte-jxkij"> </span>'),Ae[m],[[154,8]]),oi=g(_('<span class="mobile-indicator svelte-jxkij"></span>'),Ae[m],[[165,6]]),li=g(_('<nav class="nav svelte-jxkij"><div class="user-section svelte-jxkij"><!></div> <ul class="nav-list svelte-jxkij"></ul> <!></nav> <nav class="mobile-nav svelte-jxkij"><a href="/home"><!> <span>üè†</span></a> <a href="/local"><!> <!></a> <a href="/notifications"><!> <span class="mobile-icon-wrapper svelte-jxkij">üîî <!></span></a> <a href="/compose" class="mobile-compose-button svelte-jxkij"><span>‚úèÔ∏è</span></a> <a href="/settings"><!> <span>‚öôÔ∏è</span></a></nav>',1),Ae[m],[[69,0,[[71,2],[98,2]]],[134,0,[[135,2,[[139,4]]],[141,2],[147,2,[[151,4]]],[160,2,[[161,4]]],[163,2,[[167,4]]]]]]);function Ae(s,e){Re(new.target),Ue(e,!0,Ae);const a=[{href:"/local",label:"Local",icon:Ka},{href:"/federated",label:"Federated",icon:en}],n=[{href:"/home",label:"Home",icon:Yr,exact:!0},{href:"/notifications",label:"Notifications",icon:Xr},{href:"/bookmarks",label:"Bookmarks",icon:Jr},{href:"/lists",label:"Lists",icon:Zr},{href:"/settings",label:"Settings",icon:$r}];let i=W(ke(ft(a)),"navItems");rt(()=>{xe.isAuthenticated?I(i,[...n.slice(0,1),...a,...n.slice(1)],!0):I(i,a,!0)});let r=W(ke(""),"currentPath"),o=0,l;It(()=>{I(r,window.location.pathname,!0),l=sn.subscribe(ae=>{o=ae}),xe.currentUser&&on()}),Br(()=>{l&&l()});function d(ae,q=!1){return q?b(t(r),ae):t(r).startsWith(ae)}var f={...Pe()},y=li(),E=_e(y),L=u(E),M=u(L);{var Q=ae=>{var q=Jn(),re=u(q);{var j=B=>{var F=Yn();N(()=>{G(F,"src",xe.currentUser.avatar),G(F,"alt",xe.currentUser.display_name)}),v(B,F)},K=B=>{var F=Xn(),J=u(F);h(()=>Ya(J,{size:40}),"component",Ae,82,12,{componentTag:"UserCircle"}),c(F),v(B,F)};h(()=>z(re,B=>{xe.currentUser.avatar?B(j):B(K,!1)}),"if",Ae,74,8)}var oe=p(re,2),ue=u(oe),ge=u(ue,!0);c(ue);var Z=p(ue,2),S=u(Z);c(Z),c(oe),c(q),N(()=>{se(ge,xe.currentUser.display_name||xe.currentUser.username),se(S,`@${xe.currentUser.acct??""}`)}),v(ae,q)},R=ae=>{var q=Zn(),re=u(q);h(()=>Ya(re,{size:20}),"component",Ae,92,8,{componentTag:"UserCircle"}),_t(2),c(q),v(ae,q)};h(()=>z(M,ae=>{xe.isAuthenticated&&xe.currentUser?ae(Q):ae(R,!1)}),"if",Ae,72,4)}c(L);var ce=p(L,2);h(()=>lt(ce,21,()=>t(i),ma,(ae,q)=>{var re=ti(),j=u(re),K=u(j);{var oe=J=>{var de=$n();v(J,de)};h(()=>z(K,J=>{d(t(q).href,t(q).exact)&&J(oe)}),"if",Ae,106,10)}var ue=p(K,2),ge=u(ue);h(()=>Qt(ge,()=>t(q).icon,(J,de)=>{de(J,{size:20})}),"component",Ae,110,12,{componentTag:"svelte:component"});var Z=p(ge,2);{var S=J=>{var de=ei(),Me=u(de,!0);c(de),N(()=>se(Me,o>99?"99+":o)),v(J,de)};h(()=>z(Z,J=>{b(t(q).href,"/notifications")&&o>0&&J(S)}),"if",Ae,111,12)}c(ue);var B=p(ue,2),F=u(B,!0);c(B),c(j),c(re),N((J,de)=>{G(j,"href",t(q).href),ze(j,1,`nav-link ${J??""}`,"svelte-jxkij"),G(j,"aria-current",de),se(F,t(q).label)},[()=>d(t(q).href,t(q).exact)?"active":"",()=>d(t(q).href,t(q).exact)?"page":void 0]),v(ae,re)}),"each",Ae,99,4),c(ce);var $=p(ce,2);{var C=ae=>{var q=ai();v(ae,q)};h(()=>z($,ae=>{xe.isAuthenticated&&ae(C)}),"if",Ae,123,2)}c(E);var D=p(E,2),P=u(D),ee=u(P);{var A=ae=>{var q=ri();v(ae,q)};h(()=>z(ee,ae=>{d("/home",!0)&&ae(A)}),"if",Ae,136,4)}_t(2),c(P);var ie=p(P,2),V=u(ie);{var k=ae=>{var q=ni();v(ae,q)};h(()=>z(V,ae=>{d("/local")&&ae(k)}),"if",Ae,142,4)}var X=p(V,2);h(()=>Ka(X,{size:24}),"component",Ae,145,4,{componentTag:"LocalIcon"}),c(ie);var T=p(ie,2),ve=u(T);{var fe=ae=>{var q=ii();v(ae,q)};h(()=>z(ve,ae=>{d("/notifications")&&ae(fe)}),"if",Ae,148,4)}var U=p(ve,2),x=p(u(U));{var le=ae=>{var q=si(),re=u(q,!0);c(q),N(()=>se(re,o>9?"9+":o)),v(ae,q)};h(()=>z(x,ae=>{o>0&&ae(le)}),"if",Ae,153,6)}c(U),c(T);var te=p(T,4),Ce=u(te);{var qe=ae=>{var q=oi();v(ae,q)};h(()=>z(Ce,ae=>{d("/settings")&&ae(qe)}),"if",Ae,164,4)}return _t(2),c(te),c(D),N((ae,q,re,j)=>{ze(P,1,`mobile-nav-link ${ae??""}`,"svelte-jxkij"),ze(ie,1,`mobile-nav-link ${q??""}`,"svelte-jxkij"),ze(T,1,`mobile-nav-link ${re??""}`,"svelte-jxkij"),ze(te,1,`mobile-nav-link ${j??""}`,"svelte-jxkij")},[()=>d("/home",!0)?"active":"",()=>d("/local")?"active":"",()=>d("/notifications")?"active":"",()=>d("/settings")?"active":""]),v(s,y),Fe(f)}Dt[m]="src/lib/layouts/MainLayout.svelte";var ci=g(_('<div class="main-layout svelte-1vud52s"><aside class="sidebar svelte-1vud52s"><!></aside> <main class="content svelte-1vud52s"><!></main></div>'),Dt[m],[[15,2,[[16,4],[19,4]]]]);function Dt(s,e){Re(new.target),Ue(e,!0,Dt);let a=ne(e,"title",3,"Greater");var n={...Pe()};return h(()=>$t(s,{get title(){return a()},children:Ot(Dt,(i,r)=>{var o=ci(),l=u(o),d=u(l);h(()=>Ae(d,{}),"component",Dt,17,6,{componentTag:"Navigation"}),c(l);var f=p(l,2),y=u(f);h(()=>bt(y,()=>e.children),"render",Dt,20,6),c(f),c(o),v(i,o)}),$$slots:{default:!0}}),"component",Dt,14,0,{componentTag:"BaseLayout"}),Fe(n)}ea[m]="src/lib/components/islands/svelte/TimelineTabs.svelte";var di=g(_('<button role="tab"> </button>'),ea[m],[[64,4]]),ui=g(_('<div class="tabs-container svelte-16064hu" role="tablist"></div>'),ea[m],[[62,0]]);function ea(s,e){Re(new.target),Ue(e,!0,ea);const a=[{id:"home",label:"Home",href:"/home",authRequired:!0},{id:"local",label:"Local",href:"/local"},{id:"federated",label:"Federated",href:"/federated"}],n=W(me(()=>a.filter(d=>!d.authRequired||xe.isAuthenticated)),"tabs");let i=W(ke(ft(e.activeTab||"local")),"active");rt(()=>{e.activeTab&&I(i,e.activeTab,!0)}),It(()=>{if(!b(typeof window,"undefined")&&!e.activeTab){const d=window.location.pathname;b(d,"/")||d.startsWith("/home")?I(i,"home"):d.startsWith("/local")?I(i,"local"):d.startsWith("/federated")&&I(i,"federated")}});function r(d){if(b(d,t(i)))return;I(i,d,!0);const f=t(n).find(y=>b(y.id,d))?.href??"/local";window.location.href=f}var o={...Pe()},l=ui();return At(()=>t(n),d=>d.id),h(()=>lt(l,21,()=>t(n),d=>d.id,(d,f)=>{var y=di();y.__click=()=>r(t(f).id);let E;var L=u(y,!0);c(y),N(()=>{G(y,"aria-selected",b(t(i),t(f).id)),E=ze(y,1,"svelte-16064hu",null,E,{active:b(t(i),t(f).id)}),se(L,t(f).label)}),v(d,y)}),"each",ea,63,2),c(l),v(s,l),Fe(o)}H(["click"]);Nt[m]="src/lib/layouts/TimelineLayout.svelte";var vi=g(_('<div class="timeline-layout svelte-e1b9ru"><!> <div class="timeline-content svelte-e1b9ru"><!></div></div>'),Nt[m],[[22,2,[[24,4]]]]);function Nt(s,e){Re(new.target),Ue(e,!0,Nt);let a=ne(e,"title",3,"Timeline"),n=ne(e,"activeTab",3,"home");const i=W(me(()=>b(n(),"home")&&!xe.isAuthenticated?"local":n()),"effectiveTab");var r={...Pe()};return h(()=>Dt(s,{get title(){return a()},children:Ot(Nt,(o,l)=>{var d=vi(),f=u(d);h(()=>ea(f,{get activeTab(){return t(i)}}),"component",Nt,23,4,{componentTag:"TimelineTabs"});var y=p(f,2),E=u(y);h(()=>bt(E,()=>e.children),"render",Nt,25,6),c(y),c(d),v(o,d)}),$$slots:{default:!0}}),"component",Nt,21,0,{componentTag:"MainLayout"}),Fe(r)}const fi=300*1e3,Ea=20,ja={statuses:[],hasMore:!0,isLoading:!1,isLoadingMore:!1,error:null,lastFetch:0,stream:null,gaps:[],endCursor:null};function xa(s){const e=s.object||s,a=hi(e);return{id:e.id,uri:e.id,url:e.id,created_at:e.published||e.createdAt||new Date().toISOString(),account:fr(e.actor||e.attributedTo||e.author),content:e.content||"",visibility:e.visibility?.toLowerCase()||"public",sensitive:e.sensitive??!1,spoiler_text:e.summary??e.spoilerText??"",media_attachments:(e.attachments||[]).map(gi),mentions:(e.mentions||e.tag?.filter(n=>b(n.type,"Mention"))||[]).map(pi),tags:(e.hashtags||e.tag?.filter(n=>b(n.type,"Hashtag"))||[]).map(_i),emojis:[],reblogs_count:e.shares?.totalCount||e.sharesCount||0,favourites_count:e.likes?.totalCount||e.likesCount||0,replies_count:e.replies?.totalCount||e.repliesCount||0,reblogged:cr(e),favourited:lr(e),bookmarked:or(e),pinned:ln(e),reblog:e.shareOf?xa(e.shareOf):null,in_reply_to_id:e.inReplyTo?.id||null,in_reply_to_account_id:null,application:null,language:e.language||null,muted:!1,poll:e.poll?bi(e.poll):null,card:null,edited_at:e.updated||null,quote_id:a?.original_note_id||e.quoteUrl||null,quote_url:e.quoteUrl||null,quote_context:a}}function fr(s){if(!s)return{id:"unknown",username:"unknown",acct:"unknown",display_name:"Unknown",avatar:"",header:""};try{return dr(s)}catch(e){return console.warn(...Je("warn","[Timeline Store] Failed to map actor, falling back to minimal data.",e)),{id:s.id||"unknown",username:s.username||s.preferredUsername||"unknown",acct:s.webfinger||s.username||"unknown",display_name:s.displayName||s.name||s.username||"Unknown",avatar:s.avatar||s.icon?.url||"",header:s.header||s.image?.url||""}}}function mi(s){if(s)try{return new URL(s).hostname}catch{return}}function hi(s){if(!s.quoteContext&&!s.quoteUrl)return null;const e=s.quoteContext;if(!e)return null;const a=e.originalAuthor?fr(e.originalAuthor):null;return{quote_allowed:e.quoteAllowed??!1,quote_type:e.quoteType||null,withdrawn:e.withdrawn??!1,original_author:a,original_note_id:e.originalNote?.id||s.quoteUrl||null}}function gi(s){return ur(s)}function pi(s){const e=s.username||s.name?.replace("@","")||"",a=s.domain||mi(s.url||s.href),n=a?`${e}@${a}`:e;return{id:s.id||s.href||n,username:e,url:s.url||s.href||"",acct:n}}function _i(s){return{name:s.name?.replace("#","")||"",url:s.href||""}}function bi(s){return{id:s.id,expires_at:s.endTime,expired:new Date(s.endTime)<new Date,multiple:b(s.anyOf,void 0,!1),votes_count:s.votersCount||0,voters_count:s.votersCount||0,voted:s.voted||!1,own_votes:s.ownVotes||[],options:(s.oneOf||s.anyOf||[]).map(e=>({title:e.name,votes_count:e.replies?.totalCount||0})),emojis:[]}}class yi{#e=W(ke(ft({})),"TimelineStore.timelines");get timelines(){return t(this.#e)}set timelines(e){I(this.#e,e,!0)}#t=W(ke(!1),"TimelineStore.isLoading");get isLoading(){return t(this.#t)}set isLoading(e){I(this.#t,e,!0)}#a=W(ke(null),"TimelineStore.error");get error(){return t(this.#a)}set error(e){I(this.#a,e,!0)}_initialized=!1;_previousInstance=null;constructor(){}initialize(){b(typeof window,"undefined")||this._initialized||(this._initialized=!0,xe.initialize(),this._previousInstance=xe.currentInstance,setInterval(()=>{b(xe.currentInstance,this._previousInstance,!1)&&(b(this._previousInstance,null,!1)&&Object.keys(this.timelines).forEach(e=>{this.disconnectStream(e),this.clearTimeline(e)}),this._previousInstance=xe.currentInstance)},1e3))}async loadTimeline(e,a){const n=this.timelines[e]||{...ja},i=Date.now();if(!(!a?.since_id&&n.lastFetch&&i-n.lastFetch<fi&&n.statuses.length>0)){this.isLoading=!0,this.error=null,this.timelines[e]||(this.timelines[e]={...ja}),this.timelines[e]={...this.timelines[e],isLoading:!0,error:null};try{xt("[Timeline Store] Loading timeline:",{type:e,currentInstance:xe.currentInstance,isAuthenticated:xe.isAuthenticated,currentUser:xe.currentUser?.username});const r=(await pe(st(xe.currentInstance||void 0)))();let o;const l={first:a?.limit||Ea,after:a?.since_id?void 0:n.endCursor};if(e.startsWith("list:")){const E=e.replace("list:","");o=(await pe(r.fetchListTimeline(E,l)))()}else switch(e){case"home":o=(await pe(r.fetchHomeTimeline(l)))();break;case"local":o=(await pe(r.fetchPublicTimeline(l,"LOCAL")))();break;case"federated":o=(await pe(r.fetchPublicTimeline(l,"PUBLIC")))();break;default:throw new Error(`Unknown timeline type: ${e}`)}const d=(o?.edges||[]).map(E=>xa(E.node)),f=o?.pageInfo;xt("[Timeline Store] Loaded statuses:",d.length),xt("[Timeline Store] First status:",d[0]),xt("[Timeline Store] PageInfo:",f);const y={...this.timelines[e],statuses:a?.since_id?[...d,...this.timelines[e].statuses]:d,hasMore:f?.hasNextPage||!1,endCursor:f?.endCursor||null,isLoading:!1,lastFetch:i,error:null};xt("[Timeline Store] Setting timeline state:",{type:e,statusCount:y.statuses.length,isLoading:y.isLoading,error:y.error,hasMore:y.hasMore}),this.timelines[e]=y,this.isLoading=!1,xt("[Timeline Store] Timeline state after update:",this.timelines[e])}catch(r){console.error(...Je("error","[Timeline Store] Error loading timeline:",r)),this.timelines[e]={...this.timelines[e],isLoading:!1,error:r},this.isLoading=!1,this.error=r instanceof Error?r.message:"Failed to load timeline"}}}async loadMore(e){const a=this.timelines[e];if(!(!a||!a.hasMore||a.isLoadingMore)){this.timelines[e]={...this.timelines[e],isLoadingMore:!0};try{const n=(await pe(st(xe.currentInstance||void 0)))();let i;const r={first:Ea,after:a.endCursor};if(e.startsWith("list:")){const d=e.replace("list:","");i=(await pe(n.fetchListTimeline(d,r)))()}else switch(e){case"home":i=(await pe(n.fetchHomeTimeline(r)))();break;case"local":i=(await pe(n.fetchPublicTimeline(r,"LOCAL")))();break;case"federated":i=(await pe(n.fetchPublicTimeline(r,"PUBLIC")))();break;default:throw new Error(`Unknown timeline type: ${e}`)}const o=(i?.edges||[]).map(d=>xa(d.node)),l=i?.pageInfo;this.timelines[e]={...this.timelines[e],statuses:[...this.timelines[e].statuses,...o],hasMore:l?.hasNextPage||!1,endCursor:l?.endCursor||null,isLoadingMore:!1}}catch(n){console.error(...Je("error","[Timeline Store] Error loading more:",n)),this.timelines[e]={...this.timelines[e],isLoadingMore:!1,error:n}}}}async refreshTimeline(e){const a=this.timelines[e];if(!a||b(a.statuses.length,0))return this.loadTimeline(e);try{(await pe(this.loadTimeline(e,{limit:Ea})))()}catch(n){console.error(...Je("error","[Timeline Store] Error refreshing timeline:",n))}}prependStatus(e,a){this.timelines[e]&&(this.timelines[e]={...this.timelines[e],statuses:[a,...this.timelines[e].statuses]})}updateStatus(e,a){xt("[Timeline Store] Updating status:",{statusId:e,updates:a}),Object.entries(this.timelines).forEach(([n,i])=>{this.timelines[n]={...i,statuses:i.statuses.map(r=>{if(b(r.id,e)){const o={...r,...a};return xt("[Timeline Store] Status updated:",{id:e,wasFavorited:r.favourited,isFavorited:o.favourited,wasBookmarked:r.bookmarked,isBookmarked:o.bookmarked}),o}return b(r.reblog?.id,e)?{...r,reblog:{...r.reblog,...a}}:r})}})}removeStatus(e){Object.entries(this.timelines).forEach(([a,n])=>{this.timelines[a]={...n,statuses:n.statuses.filter(i=>b(i.id,e,!1)&&b(i.reblog?.id,e,!1))}})}clearTimeline(e){this.timelines[e]={...ja}}async favoriteStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();let n;for(const i of Object.values(this.timelines))if(n=i.statuses.find(r=>b(r.id,e)||b(r.reblog?.id,e)),n)break;this.updateStatus(e,{favourited:!0,favourites_count:(n?.favourites_count||0)+1});try{const i=(await pe(a.likeObject(e)))();this.updateStatus(e,{favourited:i.userInteractions?.liked||!0,favourites_count:i.likes?.totalCount||i.likesCount||(n?.favourites_count||0)+1})}catch(i){throw this.updateStatus(e,{favourited:!1,favourites_count:(n?.favourites_count||1)-1}),i}}async unfavoriteStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();let n;for(const i of Object.values(this.timelines))if(n=i.statuses.find(r=>b(r.id,e)||b(r.reblog?.id,e)),n)break;this.updateStatus(e,{favourited:!1,favourites_count:Math.max(0,(n?.favourites_count||1)-1)});try{const i=(await pe(a.unlikeObject(e)))();this.updateStatus(e,{favourited:i.userInteractions?.liked||!1,favourites_count:i.likes?.totalCount||i.likesCount||Math.max(0,(n?.favourites_count||1)-1)})}catch(i){throw this.updateStatus(e,{favourited:!0,favourites_count:(n?.favourites_count||0)+1}),i}}async reblogStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();let n;for(const i of Object.values(this.timelines))if(n=i.statuses.find(r=>b(r.id,e)||b(r.reblog?.id,e)),n)break;this.updateStatus(e,{reblogged:!0,reblogs_count:(n?.reblogs_count||0)+1});try{const i=(await pe(a.shareObject(e)))();this.updateStatus(e,{reblogged:i.userInteractions?.shared||!0,reblogs_count:i.shares?.totalCount||i.sharesCount||(n?.reblogs_count||0)+1})}catch(i){throw this.updateStatus(e,{reblogged:!1,reblogs_count:(n?.reblogs_count||1)-1}),i}}async unreblogStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();let n;for(const i of Object.values(this.timelines))if(n=i.statuses.find(r=>b(r.id,e)||b(r.reblog?.id,e)),n)break;this.updateStatus(e,{reblogged:!1,reblogs_count:Math.max(0,(n?.reblogs_count||1)-1)});try{const i=(await pe(a.unshareObject(e)))();this.updateStatus(e,{reblogged:i.userInteractions?.shared||!1,reblogs_count:i.shares?.totalCount||i.sharesCount||Math.max(0,(n?.reblogs_count||1)-1)})}catch(i){throw this.updateStatus(e,{reblogged:!0,reblogs_count:(n?.reblogs_count||0)+1}),i}}async bookmarkStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();this.updateStatus(e,{bookmarked:!0});try{const n=(await pe(a.bookmarkObject(e)))();this.updateStatus(e,{bookmarked:n.userInteractions?.bookmarked||!0})}catch(n){throw this.updateStatus(e,{bookmarked:!1}),n}}async unbookmarkStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();this.updateStatus(e,{bookmarked:!1});try{const n=(await pe(a.unbookmarkObject(e)))();this.updateStatus(e,{bookmarked:n.userInteractions?.bookmarked||!1})}catch(n){throw this.updateStatus(e,{bookmarked:!0}),n}}async deleteStatus(e){const a=(await pe(st(xe.currentInstance||void 0)))();try{(await pe(a.deleteObject(e)))(),this.removeStatus(e)}catch(n){throw n}}async connectStream(e){if(!this.timelines[e]?.stream){if(!xe.isAuthenticated||!xe.currentInstance){xt("[Timeline Stream] Cannot connect - not authenticated");return}try{const n=(await pe(st(xe.currentInstance)))();let i,r;if(e.startsWith("list:"))i="LIST",r=e.replace("list:","");else switch(e){case"home":i="HOME";break;case"local":i="LOCAL";break;case"federated":i="PUBLIC";break;default:console.warn(`[Timeline Stream] Unknown timeline type for streaming: ${e}`);return}const o=n.subscribeToTimelineUpdates({type:i,listId:r}).subscribe({next:l=>{try{const d=l.data?.timelineUpdates;if(!d)return;const f=xa(d),y=this.timelines[e];if(!y)return;y.statuses.some(L=>b(L.id,f.id))?this.updateStatus(f.id,f):this.prependStatus(e,f)}catch(d){console.error(...Je("error","[Timeline Stream] Failed to process update:",d))}},error:l=>{console.error(...Je("error","[Timeline Stream] Error:",l)),this.timelines[e]={...this.timelines[e],stream:null},setTimeout(()=>{this.connectStream(e)},5e3)},complete:()=>{xt("[Timeline Stream] Connection closed"),this.timelines[e]={...this.timelines[e],stream:null}}});this.timelines[e]={...this.timelines[e],stream:o}}catch(n){console.error(...Je("error","[Timeline Stream] Failed to connect stream:",n))}}}disconnectStream(e){const a=this.timelines[e];a?.stream&&(a.stream.unsubscribe(),this.timelines[e]={...this.timelines[e],stream:null})}}const at=new yi;Kt[m]="src/lib/components/islands/svelte/Button.svelte";function Kt(s,e){Re(new.target),Ue(e,!0,Kt);let a=ne(e,"variant",3,"primary"),n=ne(e,"size",3,"md"),i=ne(e,"fullWidth",3,!1),r=ne(e,"loading",3,!1),o=ne(e,"disabled",3,!1),l=ne(e,"class",3,""),d=ne(e,"style",3,""),f=sr(e,["$$slots","$$events","$$legacy","variant","size","fullWidth","loading","disabled","prefix","suffix","children","class","style","type"],"restProps");const y={primary:"solid",secondary:"outline",tertiary:"ghost",ghost:"ghost",danger:"solid",success:"solid"},E={sm:"sm",md:"md",lg:"lg",small:"sm",medium:"md",large:"lg"},L={danger:["--gr-semantic-action-primary-default: var(--gr-semantic-action-error-default);","--gr-semantic-action-primary-hover: var(--gr-semantic-action-error-hover);","--gr-semantic-action-primary-active: var(--gr-semantic-action-error-active);"].join(" "),success:["--gr-semantic-action-primary-default: var(--gr-semantic-action-success-default);","--gr-semantic-action-primary-hover: var(--gr-semantic-action-success-hover);","--gr-semantic-action-primary-active: var(--gr-semantic-action-success-active);"].join(" ")},M=W(me(()=>()=>y[a()]??"solid"),"normalizedVariant"),Q=W(me(()=>()=>E[n()]??"md"),"normalizedSize"),R=W(me(()=>()=>e.type??"submit"),"normalizedType"),ce=W(me(()=>()=>[L[a()],d()].filter(Boolean).join(" ").trim()),"combinedStyle"),$=W(me(()=>()=>[i()?"w-full":"",l()].filter(Boolean).join(" ").trim()),"combinedClass");var C={...Pe()};{let D=me(()=>o()||r()),P=me(()=>t($)||void 0),ee=me(()=>t(ce)||void 0);h(()=>ot(s,Gr({get variant(){return t(M)},get size(){return t(Q)},get type(){return t(R)},get loading(){return r()},get disabled(){return t(D)},get class(){return t(P)},get style(){return t(ee)},get prefix(){return e.prefix},get suffix(){return e.suffix}},()=>f,{children:Ot(Kt,(A,ie)=>{var V=Le(),k=_e(V);h(()=>bt(k,()=>e.children??Oa),"render",Kt,94,2),v(A,V)}),$$slots:{default:!0}})),"component",Kt,82,0,{componentTag:"GCButton"})}return Fe(C)}Se[m]="src/lib/components/islands/svelte/MediaGallery.svelte";var xi=g(_('<div class="relative rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 aspect-video flex items-center justify-center"><div class="text-center p-4"><svg class="w-12 h-12 mx-auto mb-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg> <p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Sensitive content</p> <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Show</button></div></div>'),Se[m],[[129,4,[[130,6,[[131,8,[[132,10]]],[134,8],[135,8]]]]]]),wi=g(_('<video class="h-full w-full object-cover" playsinline="" controls></video> <div class="pointer-events-none absolute inset-0 flex items-center justify-center"><div class="rounded-full bg-black/60 p-3"><svg class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path></svg></div></div>',3),Se[m],[[156,16],[164,16,[[165,18,[[166,20,[[167,22]]]]]]]]),ki=g(_('<video class="h-full w-full object-cover" loop autoplay playsinline=""></video>',2),Se[m],[[172,16]]),Si=g(_('<div class="absolute inset-0 animate-pulse bg-gray-200 dark:bg-gray-700"></div>'),Se[m],[[190,18]]),Ci=g(_('<img class="h-full w-full object-cover" loading="lazy"/> <!>',1),Se[m],[[182,16]]),Mi=g(_('<div class="absolute left-2 top-2 rounded-full bg-black/60 px-2 py-1 text-[11px] font-medium uppercase tracking-wide text-white">CW</div>'),Se[m],[[195,16]]),Ti=g(_('<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2"><span class="text-xs text-white">ALT</span></div>'),Se[m],[[205,16,[[206,18]]]]),zi=g(_('<button><!> <!> <div class="absolute right-2 top-2 rounded-full bg-black/50 px-2 py-1 text-[11px] uppercase tracking-wide text-white"> </div> <!></button>'),Se[m],[[150,12,[[200,14]]]]),Li=g(_('<div class="flex items-center space-x-3 rounded-lg bg-gray-100 p-4 dark:bg-gray-800"><svg class="h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg> <div class="flex-1"><audio controls class="w-full" preload="metadata"></audio></div></div>'),Se[m],[[211,12,[[212,14,[[213,16]]],[215,14,[[216,16]]]]]]),Ei=g(_('<div class="flex h-32 items-center justify-center rounded-lg bg-gray-100 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-gray-300"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9l-6-6H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> Document attachment</div>'),Se[m],[[220,12,[[221,14,[[222,16]]]]]]),ji=g(_('<div class="flex h-32 items-center justify-center rounded-lg bg-gray-100 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-gray-300">Unsupported media</div>'),Se[m],[[227,12]]),Ii=g(_('<div class="relative group"><!></div>'),Se[m],[[148,8]]),Ai=g(_("<div></div>"),Se[m],[[145,4]]),Oi=g(_('<button class="absolute left-4 text-white/80 hover:text-white p-2" aria-label="Previous"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <button class="absolute right-4 text-white/80 hover:text-white p-2" aria-label="Next"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>',1),Se[m],[[253,8,[[261,10,[[262,12]]]]],[266,8,[[274,10,[[275,12]]]]]]),qi=g(_('<img class="max-w-full max-h-[90vh] object-contain"/>'),Se[m],[[284,10]]),Di=g(_('<video autoplay class="max-w-full max-h-[90vh]"></video>',2),Se[m],[[290,10]]),Ri=g(_('<div class="absolute bottom-0 left-0 right-0 bg-black/80 p-4"><p class="text-white text-sm"> </p></div>'),Se[m],[[302,12,[[303,14]]]]),Pi=g(_('<div class="max-w-[90vw] max-h-[90vh] relative"><!> <!></div>'),Se[m],[[282,8]]),Ui=g(_('<div class="fixed inset-0 z-50 bg-black/90 flex items-center justify-center"><button class="absolute top-4 right-4 text-white/80 hover:text-white p-2" aria-label="Close"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <!> <!></div>'),Se[m],[[238,4,[[242,6,[[247,8,[[248,10]]]]]]]]),Fi=g(_('<div class="media-gallery"><!> <!></div>'),Se[m],[[126,0]]);function Se(s,e){Re(new.target),Ue(e,!0,Se);let a=ne(e,"sensitive",3,!1),n=W(ke(!a()),"showSensitive"),i=W(ke(null),"selectedIndex"),r=qa(ft({}),"imageLoadStates");function o(A){I(i,A,!0),document.body.style.overflow="hidden"}function l(){I(i,null),document.body.style.overflow=""}function d(A){b(t(i),null)||(b(A,"prev")?I(i,t(i)>0?t(i)-1:e.media.length-1,!0):I(i,t(i)<e.media.length-1?t(i)+1:0,!0))}function f(A){if(!b(t(i),null))switch(A.key){case"Escape":l();break;case"ArrowLeft":d("prev");break;case"ArrowRight":d("next");break}}const y=W(me(()=>{switch(e.media.length){case 1:return"grid-cols-1";case 2:return"grid-cols-2";case 3:return"grid-cols-2";case 4:return"grid-cols-2";default:return"grid-cols-3"}}),"gridClass"),E=W(me(()=>b(e.media.length,3)?A=>b(A,0)?"row-span-2":"":()=>""),"itemClass");function L(A){return A.meta?.small?.aspect?`${A.meta.small.aspect}`:"1"}function M(A,ie="small"){return b(ie,"preview")&&A.preview_url||b(ie,"small")&&A.preview_url?A.preview_url:A.url}function Q(A){if(A.meta?.media_category)return A.meta.media_category;switch(A.type){case"image":return"IMAGE";case"video":return"VIDEO";case"audio":return"AUDIO";case"gifv":return"GIFV";default:return"UNKNOWN"}}It(()=>(document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f),b(t(i),null,!1)&&(document.body.style.overflow="")}));var R={...Pe()},ce=Fi(),$=u(ce);{var C=A=>{var ie=xi(),V=u(ie),k=p(u(V),4);k.__click=()=>I(n,!0),c(V),c(ie),v(A,ie)},D=A=>{var ie=Ai();h(()=>lt(ie,21,()=>e.media,ma,(V,k,X)=>{const T=W(me(()=>Q(t(k))),"category");t(T);var ve=Ii(),fe=u(ve);{var U=le=>{var te=zi();te.__click=()=>o(X);var Ce=u(te);{var qe=ge=>{var Z=wi(),S=_e(Z);S.muted=!0,_t(2),N(()=>{G(S,"src",t(k).url),G(S,"poster",t(k).preview_url)}),v(ge,Z)},ae=ge=>{var Z=Le(),S=_e(Z);{var B=J=>{var de=ki();de.muted=!0,N(()=>{G(de,"src",t(k).url),G(de,"poster",t(k).preview_url)}),v(J,de)},F=J=>{var de=Ci(),Me=_e(de),Ne=p(Me,2);{var je=we=>{var Qe=Si();v(we,Qe)};h(()=>z(Ne,we=>{r[t(k).id]||we(je)}),"if",Se,189,16)}N(we=>{G(Me,"src",we),G(Me,"alt",t(k).description||"")},[()=>M(t(k),"small")]),Ve("load",Me,()=>r[t(k).id]=!0),ir(Me),v(J,de)};h(()=>z(S,J=>{b(t(T),"GIFV")?J(B):J(F,!1)},!0),"if",Se,171,14)}v(ge,Z)};h(()=>z(Ce,ge=>{b(t(T),"VIDEO")?ge(qe):ge(ae,!1)}),"if",Se,155,14)}var q=p(Ce,2);{var re=ge=>{var Z=Mi();v(ge,Z)};h(()=>z(q,ge=>{t(k).spoiler_text&&ge(re)}),"if",Se,194,14)}var j=p(q,2),K=u(j,!0);c(j);var oe=p(j,2);{var ue=ge=>{var Z=Ti();v(ge,Z)};h(()=>z(oe,ge=>{t(k).description&&ge(ue)}),"if",Se,204,14)}c(te),N((ge,Z)=>{ze(te,1,`relative overflow-hidden bg-gray-100 dark:bg-gray-800 ${ge??""} focus:outline-none focus:ring-2 focus:ring-blue-500`),vt(te,`aspect-ratio: ${Z??""}`),se(K,t(T))},[()=>t(E)(X),()=>L(t(k))]),v(le,te)},x=le=>{var te=Le(),Ce=_e(te);{var qe=q=>{var re=Li(),j=p(u(re),2),K=u(j);c(j),c(re),N(()=>G(K,"src",t(k).url)),v(q,re)},ae=q=>{var re=Le(),j=_e(re);{var K=ue=>{var ge=Ei();v(ue,ge)},oe=ue=>{var ge=ji();v(ue,ge)};h(()=>z(j,ue=>{b(t(T),"DOCUMENT")?ue(K):ue(oe,!1)},!0),"if",Se,219,10)}v(q,re)};h(()=>z(Ce,q=>{b(t(T),"AUDIO")?q(qe):q(ae,!1)},!0),"if",Se,210,10)}v(le,te)};h(()=>z(fe,le=>{b(t(T),"IMAGE")||b(t(T),"GIFV")||b(t(T),"VIDEO")?le(U):le(x,!1)}),"if",Se,149,10)}c(ve),v(V,ve)}),"each",Se,146,6),c(ie),N(()=>ze(ie,1,`grid gap-1 ${t(y)??""} rounded-lg overflow-hidden`)),v(A,ie)};h(()=>z($,A=>{a()&&!t(n)?A(C):A(D,!1)}),"if",Se,127,2)}var P=p($,2);{var ee=A=>{var ie=Ui();ie.__click=l;var V=u(ie);V.__click=l;var k=p(V,2);{var X=fe=>{var U=Oi(),x=_e(U);x.__click=te=>{te.stopPropagation(),d("prev")};var le=p(x,2);le.__click=te=>{te.stopPropagation(),d("next")},v(fe,U)};h(()=>z(k,fe=>{e.media.length>1&&fe(X)}),"if",Se,252,6)}var T=p(k,2);{var ve=fe=>{const U=W(me(()=>e.media[t(i)]),"currentMedia");t(U);var x=Pi();x.__click=q=>q.stopPropagation();var le=u(x);{var te=q=>{var re=qi();N(()=>{G(re,"src",t(U).url),G(re,"alt",t(U).description||"")}),v(q,re)},Ce=q=>{var re=Le(),j=_e(re);{var K=oe=>{var ue=Di();N(()=>{G(ue,"src",t(U).url),G(ue,"poster",t(U).preview_url),ue.controls=b(t(U).type,"video"),ue.loop=b(t(U).type,"gifv"),ue.muted=b(t(U).type,"gifv")}),v(oe,ue)};h(()=>z(j,oe=>{(b(t(U).type,"video")||b(t(U).type,"gifv"))&&oe(K)},!0),"if",Se,289,8)}v(q,re)};h(()=>z(le,q=>{b(t(U).type,"image")?q(te):q(Ce,!1)}),"if",Se,283,10)}var qe=p(le,2);{var ae=q=>{var re=Ri(),j=u(re),K=u(j,!0);c(j),c(re),N(()=>se(K,t(U).description)),v(q,re)};h(()=>z(qe,q=>{t(U).description&&q(ae)}),"if",Se,301,10)}c(x),v(fe,x)};h(()=>z(T,fe=>{b(t(i),null,!1)&&fe(ve)}),"if",Se,280,6)}c(ie),v(A,ie)};h(()=>z(P,A=>{b(t(i),null,!1)&&A(ee)}),"if",Se,237,2)}return c(ce),v(s,ce),Fe(R)}H(["click"]);tt[m]="src/lib/components/islands/svelte/StatusSkeleton.svelte";var Bi=g(_('<div class="card p-4 space-y-3"><div class="flex items-start gap-3"><!> <div class="flex-1 space-y-3"><div class="flex items-center gap-2"><!> <!></div> <div class="space-y-2"><!> <!> <!></div> <!> <div class="flex items-center gap-6 pt-2"><!> <!> <!> <!></div></div></div></div>'),tt[m],[[5,0,[[6,1,[[10,2,[[12,3],[18,3],[30,3]]]]]]]]);function tt(s,e){Re(new.target),Ue(e,!0,tt);var a={...Pe()},n=Bi(),i=u(n),r=u(i);h(()=>Te(r,{variant:"circular",width:"48px",height:"48px"}),"component",tt,8,2,{componentTag:"GCSkeleton"});var o=p(r,2),l=u(o),d=u(l);h(()=>Te(d,{variant:"text",width:"128px",height:"16px"}),"component",tt,13,4,{componentTag:"GCSkeleton"});var f=p(d,2);h(()=>Te(f,{variant:"text",width:"96px",height:"12px"}),"component",tt,14,4,{componentTag:"GCSkeleton"}),c(l);var y=p(l,2),E=u(y);h(()=>Te(E,{variant:"text",width:"100%",height:"16px"}),"component",tt,19,4,{componentTag:"GCSkeleton"});var L=p(E,2);h(()=>Te(L,{variant:"text",width:"80%",height:"16px"}),"component",tt,20,4,{componentTag:"GCSkeleton"});var M=p(L,2);h(()=>Te(M,{variant:"text",width:"60%",height:"16px"}),"component",tt,21,4,{componentTag:"GCSkeleton"}),c(y);var Q=p(y,2);{var R=ee=>{h(()=>Te(ee,{variant:"rectangular",width:"100%",height:"192px",class:"rounded-lg"}),"component",tt,26,4,{componentTag:"GCSkeleton"})};h(()=>z(Q,ee=>{Math.random()>.5&&ee(R)}),"if",tt,25,3)}var ce=p(Q,2),$=u(ce);h(()=>Te($,{variant:"circular",width:"20px",height:"20px"}),"component",tt,31,4,{componentTag:"GCSkeleton"});var C=p($,2);h(()=>Te(C,{variant:"circular",width:"20px",height:"20px"}),"component",tt,32,4,{componentTag:"GCSkeleton"});var D=p(C,2);h(()=>Te(D,{variant:"circular",width:"20px",height:"20px"}),"component",tt,33,4,{componentTag:"GCSkeleton"});var P=p(D,2);return h(()=>Te(P,{variant:"circular",width:"20px",height:"20px"}),"component",tt,34,4,{componentTag:"GCSkeleton"}),c(ce),c(o),c(i),c(n),v(s,n),Fe(a)}gt[m]="src/lib/components/islands/svelte/QuotePreview.svelte";var Ni=g(_('<div class="quote-loading"><!></div>'),gt[m],[[132,4]]),Wi=g(_('<div class="quote-error svelte-1f9da5d"><p> </p> <a target="_blank" rel="noreferrer">Open original</a></div>'),gt[m],[[136,4,[[137,6],[138,6]]]]),Vi=g(_('<div class="quote-content" role="note" aria-label="Quoted post"><div class="quote-author svelte-1f9da5d"><span class="name"> </span> <span class="handle svelte-1f9da5d"> </span></div> <div class="quote-text svelte-1f9da5d" tabindex="0"><!></div> <a class="quote-link svelte-1f9da5d">View original</a></div>'),gt[m],[[141,4,[[142,6,[[143,8],[144,8]]],[146,6],[149,6]]]]),Hi=g(_('<div class="quote-content" role="note" aria-label="Quoted post"><div class="quote-author svelte-1f9da5d"><span class="name"> </span> <span class="handle svelte-1f9da5d"> </span></div> <a class="quote-link svelte-1f9da5d">View original</a></div>'),gt[m],[[152,4,[[153,6,[[154,8],[155,8]]],[157,6]]]]),Gi=g(_('<div class="quote-preview svelte-1f9da5d"><!></div>'),gt[m],[[130,0]]);function gt(s,e){Re(new.target),Ue(e,!0,gt);const a=ne(e,"quoteUrl",3,null),n=ne(e,"author",3,null);class i{static instance;cache=new Map;static getInstance(){return i.instance||(i.instance=new i),i.instance}get(C){return this.cache.get(C)}set(C,D){this.cache.set(C,D)}}const r=i.getInstance();let o=W(ke(null),"quoteStatus"),l=W(ke(!0),"isLoading"),d=W(ke(null),"error");It(async()=>{if(xe.initialize(),!e.quoteId){I(d,"Missing quote reference"),I(l,!1);return}const $=r.get(e.quoteId);if($){I(o,$,!0),I(l,!1);return}try{const C=(await pe(st(xe.currentInstance||void 0)))(),D=(await pe(C.getObject(e.quoteId)))(),P=E(D);I(o,P,!0),r.set(e.quoteId,P)}catch(C){console.error(...Je("error","[QuotePreview] Failed to fetch quote:",C)),I(d,C instanceof Error?C.message:"Unable to load quoted post",!0)}finally{I(l,!1)}});function f(){return t(o)?.url?t(o).url:a()?a().startsWith("http")?a():`/status/${a()}`:`/status/${e.quoteId}`}function y($){return $&&($.display_name||$.username||$.acct)||"Unknown"}function E($){const C=$?.object??$,D=C?.actor??C?.attributedTo;return{id:C?.id,uri:C?.id,url:C?.url??C?.id??null,created_at:C?.published??C?.createdAt??new Date().toISOString(),account:D?dr(D):{},content:C?.content??"",visibility:C?.visibility?.toLowerCase()||"public",sensitive:C?.sensitive??!1,spoiler_text:C?.summary??C?.spoilerText??"",media_attachments:(C?.attachments??[]).map(ur),mentions:[],tags:[],emojis:[],reblogs_count:C?.shares?.totalCount??C?.sharesCount??0,favourites_count:C?.likes?.totalCount??C?.likesCount??0,replies_count:C?.replies?.totalCount??C?.repliesCount??0,reblogged:cr(C),favourited:lr(C),bookmarked:or(C),pinned:!1,reblog:null,in_reply_to_id:C?.inReplyTo?.id??null,in_reply_to_account_id:null,application:null,language:C?.language??null,muted:!1,poll:null,card:null,edited_at:C?.updated??null,quote_id:C?.quoteUrl??null,quote_url:C?.quoteUrl??null,quote_context:null}}var L={...Pe()},M=Gi(),Q=u(M);{var R=$=>{var C=Ni(),D=u(C);h(()=>tt(D,{count:1}),"component",gt,133,6,{componentTag:"StatusSkeleton"}),c(C),v($,C)},ce=$=>{var C=Le(),D=_e(C);{var P=A=>{var ie=Wi(),V=u(ie),k=u(V,!0);c(V);var X=p(V,2);c(ie),N(T=>{se(k,t(d)),G(X,"href",T)},[f]),v(A,ie)},ee=A=>{var ie=Le(),V=_e(ie);{var k=T=>{var ve=Vi(),fe=u(ve),U=u(fe),x=u(U,!0);c(U);var le=p(U,2),te=u(le);c(le),c(fe);var Ce=p(fe,2),qe=u(Ce);Ia(qe,()=>t(o).content),c(Ce);var ae=p(Ce,2);c(ve),N(q=>{se(x,t(o).account.display_name||t(o).account.username),se(te,`@${t(o).account.acct??""}`),G(ae,"href",q)},[f]),v(T,ve)},X=T=>{var ve=Hi(),fe=u(ve),U=u(fe),x=u(U,!0);c(U);var le=p(U,2),te=u(le,!0);c(le),c(fe);var Ce=p(fe,2);c(ve),N((qe,ae)=>{se(x,qe),se(te,e.quoteId),G(Ce,"href",ae)},[()=>y(n()),f]),v(T,ve)};h(()=>z(V,T=>{t(o)?T(k):T(X,!1)},!0),"if",gt,140,2)}v(A,ie)};h(()=>z(D,A=>{t(d)?A(P):A(ee,!1)},!0),"if",gt,135,2)}v($,C)};h(()=>z(Q,$=>{t(l)?$(R):$(ce,!1)}),"if",gt,131,2)}return c(M),v(s,M),Fe(L)}he[m]="src/lib/components/islands/svelte/StatusCard.svelte";var Qi=g(_('<div class="flex items-center gap-2 text-sm text-text-secondary"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"></path></svg> <span> </span></div>'),he[m],[[330,2,[[331,3,[[332,4]]],[334,3]]]]),Ki=g(_('<div class="flex items-center gap-2 text-sm text-text-secondary"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"></path></svg> <span>Replying to thread</span></div>'),he[m],[[339,2,[[340,3,[[341,4]]],[343,3]]]]),Yi=g(_('<span class="text-text-secondary"> </span>'),he[m],[[386,5]]),Xi=g(_('<details class="mt-2"><summary class="cursor-pointer text-text-secondary hover:text-text"> </summary> <div class="mt-2 prose prose-sm max-w-none text-text"><!></div></details>'),he[m],[[393,4,[[394,5],[397,5]]]]),Ji=g(_('<div class="mt-2 prose prose-sm max-w-none text-text"><!></div>'),he[m],[[402,4]]),Zi=g(_('<div class="mt-3"><!></div>'),he[m],[[408,4]]),$i=g(_('<div class="mt-3"><!></div>'),he[m],[[418,4]]),es=g(_('<div class="flex-1"><div class="flex justify-between items-center"><span class="text-sm"> </span> <span class="text-sm text-text-secondary"> </span></div> <div class="mt-1 h-2 bg-surface rounded-full overflow-hidden"><div class="h-full bg-primary transition-all duration-300"></div></div></div>'),he[m],[[431,8,[[432,9,[[433,10],[434,10]]],[438,9,[[439,10]]]]]]),ts=g(_('<button class="flex-1 text-left p-2 rounded-lg border border-border hover:bg-surface-variant transition-colors"> </button>'),he[m],[[446,8]]),as=g(_('<div class="flex items-center gap-2"><!></div>'),he[m],[[429,6]]),rs=g(_('<div class="mt-3 space-y-2 p-3 rounded-lg bg-surface-variant"><!> <div class="text-sm text-text-secondary mt-2"> <!></div></div>'),he[m],[[427,4,[[452,5]]]]),ns=g(_('<img alt="" class="w-20 h-20 object-cover rounded" loading="lazy"/>'),he[m],[[469,6]]),is=g(_('<div class="text-sm text-text-secondary line-clamp-2"> </div>'),he[m],[[479,7]]),ss=g(_('<a target="_blank" rel="noopener noreferrer" class="mt-3 flex gap-3 p-3 rounded-lg border border-border hover:bg-surface-variant transition-colors"><!> <div class="flex-1 min-w-0"><div class="font-medium text-sm truncate"> </div> <!> <div class="text-xs text-text-secondary truncate"> </div></div></a>'),he[m],[[462,4,[[476,5,[[477,6],[481,6]]]]]]),os=g(_("<span> </span>"),he[m],[[499,8]]),ls=g(_('<p class="text-sm text-blue-800 dark:text-blue-200"> </p> <div class="mt-2 flex items-center gap-4 text-xs text-blue-600 dark:text-blue-400"><span> </span> <!></div>',1),he[m],[[495,6],[496,6,[[497,7]]]]),cs=g(_('<div class="mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"><div class="flex items-center gap-2 mb-2"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium text-blue-900 dark:text-blue-100">Community Note</span></div> <!></div>'),he[m],[[487,4,[[488,5,[[489,6,[[490,7]]],[492,6]]]]]]),ds=g(_('<div class="mt-2 text-xs text-text-secondary"> </div>'),he[m],[[507,4]]),us=g(_('<span class="text-sm" aria-hidden="true"> </span>'),he[m],[[523,6]]),vs=g(_('<span class="text-sm" aria-hidden="true"> </span>'),he[m],[[549,6]]),fs=g(_('<div class="absolute bottom-full mb-2 left-0 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[150px]"><button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Boost</button> <button class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h13m0 0l-4-4m4 4l-4 4m-9 4v-4a1 1 0 011-1h2m0-4V5a1 1 0 011-1h7"></path></svg> Quote</button></div>'),he[m],[[554,5,[[555,6,[[559,7,[[560,8]]]]],[564,6,[[568,7,[[569,8]]]]]]]]),ms=g(_('<span class="text-sm" aria-hidden="true"> </span>'),he[m],[[588,6]]),hs=g(_('<div class="absolute right-0 bottom-full mb-1 w-48 bg-white dark:bg-gray-900 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10"><button class="w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div>'),he[m],[[634,7,[[635,8,[[643,9,[[644,10]]]]]]]]),gs=g(_('<div class="relative"><button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors" title="More options" aria-label="More options for this post" aria-haspopup="menu"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg></button> <!></div>'),he[m],[[616,5,[[617,6,[[628,7,[[629,8]]]]]]]]),ps=g(_('<article class="card p-4 space-y-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors" role="article" tabindex="0"><!> <!> <div class="flex items-start gap-3"><a class="flex-shrink-0"><!></a> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><a class="font-semibold text-text hover:underline"> </a> <span class="text-text-secondary"> </span> <!> <span class="text-text-secondary">¬∑</span> <time class="text-text-secondary"> </time> <!></div> <!> <!> <!> <!> <!> <!> <!> <div class="mt-3 flex items-center gap-1 -ml-2"><button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors" title="Reply"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg> <!></button> <div class="relative boost-menu-container"><button title="Boost"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <!></button> <!></div> <button title="Favorite"><svg class="w-5 h-5" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg> <!></button> <button title="Bookmark"><svg class="w-5 h-5" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg></button> <button class="flex items-center gap-1 px-2 py-1 rounded-lg text-text-secondary hover:text-primary hover:bg-primary/10 transition-colors ml-auto" title="Share" aria-label="Share post"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.632 4.658a3 3 0 01-5.266 0m5.266 0a3 3 0 00-5.266 0m5.266 0L18 18m-5.684-2.342a3 3 0 01-5.266 0M6.75 6l1.266 1.342M18 6l-1.266 1.342M12 12h.01"></path></svg></button> <!></div></div></div></article>'),he[m],[[306,0,[[347,1,[[348,2],[357,2,[[358,3,[[359,4],[362,4],[381,4],[382,4]]],[512,3,[[513,4,[[519,5,[[520,6]]]]],[527,4,[[528,5,[[545,5,[[546,6]]]]]]],[577,4,[[584,5,[[585,6]]]]],[592,4,[[599,5,[[600,6]]]]],[604,4,[[610,5,[[611,6]]]]]]]]]]]]]]);function he(s,e){Re(new.target),Ue(e,!0,he);const a=W(me(()=>e.status),"status"),n=W(me(()=>e.showThread??!1),"showThread"),i=W(me(()=>t(a)),"lesserStatus");rt(()=>{t(a).content||console.warn(...Je("warn","[StatusCard] Status missing content:",{id:t(a).id,created_at:t(a).created_at,account:t(a).account?.username,hasContent:!!t(a).content,contentLength:t(a).content?.length}))});const r=W(me(()=>t(a).reblog||t(a)),"displayStatus"),o=W(me(()=>!!t(a).reblog),"isReblog"),l=W(me(()=>t(r).quote_context||null),"quoteMeta"),d=W(me(()=>(t(r).account.display_name||t(r).account.username).charAt(0).toUpperCase()),"avatarPlaceholder"),f=W(me(()=>{const w=new Date(t(r).created_at),Y=Math.floor((new Date().getTime()-w.getTime())/1e3);return Y<60?`${Y}s`:Y<3600?`${Math.floor(Y/60)}m`:Y<86400?`${Math.floor(Y/3600)}h`:Y<604800?`${Math.floor(Y/86400)}d`:w.toLocaleDateString()}),"relativeTime"),y=W(me(()=>{switch(t(r).visibility){case"public":return"üåê";case"unlisted":return"üîì";case"private":return"üîí";case"direct":return"‚úâÔ∏è";default:return""}}),"visibilityIcon");let E=W(ke(!1),"isInteracting"),L=W(ke(!1),"showMenu"),M=W(ke(!1),"showBoostMenu"),Q=null,R=!1;const ce=W(me(()=>b(t(r).account.id,xe.currentUser?.id)),"isOwnStatus");It(()=>{const w=O=>{const Y=O.target;t(L)&&!Y.closest(".menu-container")&&I(L,!1),t(M)&&!Y.closest(".boost-menu-container")&&I(M,!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)}),It(async()=>{if(!t(ce)&&xe.currentUser)try{const w=(await pe(st()))(),O=t(r).account?.id;if(!O){console.warn(...Je("warn","[StatusCard] Skipping relationship request: missing account id",{statusId:t(r).id,account:t(r).account}));return}const Y=(await pe(w.getRelationship(O)))();Q={id:O,following:Y.following||!1,followed_by:Y.followedBy||!1,blocking:Y.blocking||!1,blocked_by:Y.blockedBy||!1,muting:Y.muting||!1,muting_notifications:Y.mutingNotifications||!1,requested:Y.requested||!1,domain_blocking:!1,showing_reblogs:!0,endorsed:!1,notifying:!1,note:""}}catch(w){console.error(...Je("error","Failed to load relationship:",w))}});async function $(){if(!(t(E)||!xe.currentUser)){I(E,!0),console.log(...Je("log","[StatusCard] Before favorite:",{id:t(r).id,favourited:t(r).favourited,content:t(r).content?.substring(0,50)}));try{t(r).favourited?(await pe(at.unfavoriteStatus(t(r).id)))():(await pe(at.favoriteStatus(t(r).id)))()}finally{I(E,!1)}}}async function C(){if(!(t(E)||!xe.currentUser)){I(E,!0),I(M,!1);try{t(r).reblogged?(await pe(at.unreblogStatus(t(r).id)))():(await pe(at.reblogStatus(t(r).id)))()}catch(w){console.error(...Je("error","[StatusCard] Boost failed:",w))}finally{I(E,!1)}}}function D(){if(I(M,!1),!xe.currentUser){console.log("[StatusCard] Cannot quote: not logged in");return}const w={statusId:t(r).id,quotedStatus:t(r)};sessionStorage.setItem("compose_quote_context",JSON.stringify(w)),window.location.href="/compose"}async function P(){if(!(t(E)||!xe.currentUser)){I(E,!0);try{t(r).bookmarked?(await pe(at.unbookmarkStatus(t(r).id)))():(await pe(at.bookmarkStatus(t(r).id)))()}finally{I(E,!1)}}}function ee(){if(b(typeof window,"undefined"))return;const w={replyToId:t(r).id,mention:`@${t(r).account.acct} `};sessionStorage.setItem("compose_reply_context",JSON.stringify(w)),window.location.href="/compose"}function A(){b(typeof window,"undefined")||(navigator.share?navigator.share({title:`Post by ${t(r).account.display_name||t(r).account.username}`,text:t(r).content.replace(/<[^>]*>/g,""),url:t(r).url||t(r).uri}):navigator.clipboard&&navigator.clipboard.writeText(t(r).url||t(r).uri))}async function ie(){if(confirm("Are you sure you want to delete this post?")){I(E,!0);try{(await pe(at.deleteStatus(t(r).id)))(),b(typeof window,"undefined",!1)&&window.location.pathname.startsWith("/status/")&&window.history.back()}catch(w){console.error(...Je("error","Failed to delete status:",w)),alert("Failed to delete post")}finally{I(E,!1)}}}async function V(){if(!(!xe.currentUser||R)){R=!0;try{const w=(await pe(st()))(),O=t(r).account?.id;if(!O){console.warn(...Je("warn","[StatusCard] Cannot follow/unfollow: missing account id",{statusId:t(r).id,account:t(r).account}));return}Q?.following?(await pe(w.unfollowActor(O)))():(await pe(w.followActor(O)))();const Y=(await pe(w.getRelationship(O)))();Q={id:O,following:Y.following||!1,followed_by:Y.followedBy||!1,blocking:Y.blocking||!1,blocked_by:Y.blockedBy||!1,muting:Y.muting||!1,muting_notifications:Y.mutingNotifications||!1,requested:Y.requested||!1,domain_blocking:!1,showing_reblogs:!0,endorsed:!1,notifying:!1,note:""}}catch(w){console.error(...Je("error","Follow/unfollow failed:",w))}finally{R=!1}}}var k={...Pe()},X=ps();X.__click=w=>{if(b(typeof window,"undefined"))return;const O=w.target;O.closest("button")||O.closest("a")||O.closest("video")||O.closest("audio")||(window.location.href=`/status/${t(r).id}`)},X.__keydown=w=>{b(typeof window,"undefined")||b(w.key,"Enter")&&!w.target.closest("button")&&!w.target.closest("a")&&(window.location.href=`/status/${t(r).id}`)};var T=u(X);{var ve=w=>{var O=Qi(),Y=p(u(O),2),De=u(Y);c(Y),c(O),N(()=>se(De,`${(t(a).account.display_name||t(a).account.username)??""} boosted`)),v(w,O)};h(()=>z(T,w=>{t(o)&&w(ve)}),"if",he,329,1)}var fe=p(T,2);{var U=w=>{var O=Ki();v(w,O)};h(()=>z(fe,w=>{t(n)&&t(r).in_reply_to_id&&w(U)}),"if",he,338,1)}var x=p(fe,2),le=u(x),te=u(le);{let w=me(()=>t(r).account.display_name||t(r).account.username);h(()=>ye(te,{get src(){return t(r).account.avatar},get alt(){return t(w)},size:"md",get fallback(){return t(d)}}),"component",he,349,3,{componentTag:"GCAvatar"})}c(le);var Ce=p(le,2),qe=u(Ce),ae=u(qe),q=u(ae,!0);c(ae);var re=p(ae,2),j=u(re);c(re);var K=p(re,2);{var oe=w=>{{let O=me(()=>Q.following?"secondary":"primary");h(()=>Kt(w,{onclick:Y=>{Y.stopPropagation(),V()},get loading(){return R},get variant(){return t(O)},size:"sm",class:"ml-auto rounded-full",children:Ot(he,(Y,De)=>{var We=Le(),Ee=_e(We);{var Be=He=>{var Ke=Yt("Following");v(He,Ke)},Xe=He=>{var Ke=Yt("Follow");v(He,Ke)};h(()=>z(Ee,He=>{Q.following?He(Be):He(Xe,!1)}),"if",he,374,6)}v(Y,We)}),$$slots:{default:!0}}),"component",he,364,5,{componentTag:"Button"})}};h(()=>z(K,w=>{!t(ce)&&xe.currentUser&&Q&&w(oe)}),"if",he,363,4)}var ue=p(K,4),ge=u(ue,!0);c(ue);var Z=p(ue,2);{var S=w=>{var O=Yi(),Y=u(O,!0);c(O),N(()=>{G(O,"title",t(r).visibility),se(Y,t(y))}),v(w,O)};h(()=>z(Z,w=>{t(y)&&w(S)}),"if",he,385,4)}c(qe);var B=p(qe,2);{var F=w=>{var O=Xi(),Y=u(O),De=u(Y);c(Y);var We=p(Y,2),Ee=u(We);Ia(Ee,()=>Ja(t(r).content)),c(We),c(O),N(()=>se(De,`CW: ${t(r).spoiler_text??""}`)),v(w,O)},J=w=>{var O=Ji(),Y=u(O);Ia(Y,()=>Ja(t(r).content)),c(O),v(w,O)};h(()=>z(B,w=>{t(r).spoiler_text?w(F):w(J,!1)}),"if",he,392,3)}var de=p(B,2);{var Me=w=>{var O=Zi(),Y=u(O);h(()=>gt(Y,{get quoteId(){return t(l).original_note_id},get quoteUrl(){return t(r).quote_url},get author(){return t(l).original_author}}),"component",he,409,5,{componentTag:"QuotePreview"}),c(O),v(w,O)};h(()=>z(de,w=>{t(l)?.original_note_id&&w(Me)}),"if",he,407,3)}var Ne=p(de,2);{var je=w=>{var O=$i(),Y=u(O);h(()=>Se(Y,{get media(){return t(r).media_attachments},get sensitive(){return t(r).sensitive}}),"component",he,419,5,{componentTag:"MediaGallery"}),c(O),v(w,O)};h(()=>z(Ne,w=>{t(r).media_attachments.length>0&&w(je)}),"if",he,417,3)}var we=p(Ne,2);{var Qe=w=>{var O=rs(),Y=u(O);h(()=>lt(Y,17,()=>t(r).poll.options,ma,(Xe,He)=>{var Ke=as(),dt=u(Ke);{var $e=ht=>{var pt=es(),Bt=u(pt),za=u(Bt),xr=u(za,!0);c(za);var Ua=p(za,2),wr=u(Ua);c(Ua),c(Bt);var Fa=p(Bt,2),kr=u(Fa);c(Fa),c(pt),N(Sr=>{se(xr,t(He).title),se(wr,`${Sr??""}%`),vt(kr,`width: ${t(He).votes_count/t(r).poll.votes_count*100}%`)},[()=>Math.round(t(He).votes_count/t(r).poll.votes_count*100)]),v(ht,pt)},it=ht=>{var pt=ts(),Bt=u(pt,!0);c(pt),N(()=>se(Bt,t(He).title)),v(ht,pt)};h(()=>z(dt,ht=>{t(r).poll.expired||t(r).poll.voted?ht($e):ht(it,!1)}),"if",he,430,7)}c(Ke),v(Xe,Ke)}),"each",he,428,5);var De=p(Y,2),We=u(De),Ee=p(We);{var Be=Xe=>{var He=Yt();N(Ke=>se(He,`¬∑ ${t(r).poll.expired?"Ended":"Ends"} ${Ke??""}`),[()=>new Date(t(r).poll.expires_at).toLocaleDateString()]),v(Xe,He)};h(()=>z(Ee,Xe=>{t(r).poll.expires_at&&Xe(Be)}),"if",he,454,6)}c(De),c(O),N(()=>se(We,`${t(r).poll.votes_count??""} votes `)),v(w,O)};h(()=>z(we,w=>{t(r).poll&&w(Qe)}),"if",he,426,3)}var et=p(we,2);{var nt=w=>{var O=ss(),Y=u(O);{var De=$e=>{var it=ns();N(()=>G(it,"src",t(r).card.image)),v($e,it)};h(()=>z(Y,$e=>{t(r).card.image&&$e(De)}),"if",he,468,5)}var We=p(Y,2),Ee=u(We),Be=u(Ee,!0);c(Ee);var Xe=p(Ee,2);{var He=$e=>{var it=is(),ht=u(it,!0);c(it),N(()=>se(ht,t(r).card.description)),v($e,it)};h(()=>z(Xe,$e=>{t(r).card.description&&$e(He)}),"if",he,478,6)}var Ke=p(Xe,2),dt=u(Ke,!0);c(Ke),c(We),c(O),N(()=>{G(O,"href",t(r).card.url),se(Be,t(r).card.title),se(dt,new URL(t(r).card.url).hostname)}),v(w,O)};h(()=>z(et,w=>{t(r).card&&!t(r).media_attachments.length&&w(nt)}),"if",he,461,3)}var Ge=p(et,2);{var Ze=w=>{var O=cs(),Y=p(u(O),2);h(()=>lt(Y,17,()=>t(i).community_notes.slice(0,1),ma,(De,We)=>{var Ee=ls(),Be=_e(Ee),Xe=u(Be,!0);c(Be);var He=p(Be,2),Ke=u(He),dt=u(Ke);c(Ke);var $e=p(Ke,2);{var it=ht=>{var pt=os(),Bt=u(pt);c(pt),N(()=>se(Bt,`${t(We).votes_unhelpful??""} found unhelpful`)),v(ht,pt)};h(()=>z($e,ht=>{t(We).votes_unhelpful>0&&ht(it)}),"if",he,498,7)}c(He),N(()=>{se(Xe,t(We).content),se(dt,`${t(We).votes_helpful??""} found helpful`)}),v(De,Ee)}),"each",he,494,5),c(O),v(w,O)};h(()=>z(Ge,w=>{t(i).community_notes&&t(i).community_notes.length>0&&w(Ze)}),"if",he,486,3)}var ct=p(Ge,2);{var Ct=w=>{var O=ds(),Y=u(O);c(O),N(De=>se(Y,`Delivery cost: $${De??""}`),[()=>(t(i).delivery_cost/1e6).toFixed(6)]),v(w,O)};h(()=>z(ct,w=>{t(i).delivery_cost&&xe.currentUser&&w(Ct)}),"if",he,506,3)}var Mt=p(ct,2),Tt=u(Mt);Tt.__click=ee;var qt=p(u(Tt),2);{var Ma=w=>{var O=us(),Y=u(O,!0);c(O),N(()=>se(Y,t(r).replies_count)),v(w,O)};h(()=>z(qt,w=>{t(r).replies_count>0&&w(Ma)}),"if",he,522,5)}c(Tt);var Ht=p(Tt,2),mt=u(Ht);mt.__click=w=>{w.stopPropagation(),t(r).reblogged?C():I(M,!t(M))};var sa=p(u(mt),2);{var oa=w=>{var O=vs(),Y=u(O,!0);c(O),N(()=>se(Y,t(r).reblogs_count)),v(w,O)};h(()=>z(sa,w=>{t(r).reblogs_count>0&&w(oa)}),"if",he,548,5)}c(mt);var la=p(mt,2);{var ga=w=>{var O=fs(),Y=u(O);Y.__click=C;var De=p(Y,2);De.__click=D,c(O),v(w,O)};h(()=>z(la,w=>{t(M)&&w(ga)}),"if",he,553,4)}c(Ht);var zt=p(Ht,2);zt.__click=$;var Ut=u(zt),ca=p(Ut,2);{var da=w=>{var O=ms(),Y=u(O,!0);c(O),N(()=>se(Y,t(r).favourites_count)),v(w,O)};h(()=>z(ca,w=>{t(r).favourites_count>0&&w(da)}),"if",he,587,5)}c(zt);var yt=p(zt,2);yt.__click=P;var Ta=u(yt);c(yt);var Ft=p(yt,2);Ft.__click=A;var pa=p(Ft,2);{var ua=w=>{var O=gs(),Y=u(O);Y.__click=Ee=>{Ee.stopPropagation(),I(L,!t(L))};var De=p(Y,2);{var We=Ee=>{var Be=hs(),Xe=u(Be);Xe.__click=He=>{He.stopPropagation(),I(L,!1),ie()},c(Be),v(Ee,Be)};h(()=>z(De,Ee=>{t(L)&&Ee(We)}),"if",he,633,6)}c(O),N(()=>G(Y,"aria-expanded",t(L))),v(w,O)};h(()=>z(pa,w=>{t(ce)&&w(ua)}),"if",he,615,4)}return c(Mt),c(Ce),c(x),c(X),N(()=>{G(X,"aria-label",`Post by ${(t(r).account.display_name||t(r).account.username)??""}`),G(le,"href",`/@${t(r).account.acct}`),G(ae,"href",`/@${t(r).account.acct}`),se(q,t(r).account.display_name||t(r).account.username),se(j,`@${t(r).account.acct??""}`),G(ue,"datetime",t(r).created_at),se(ge,t(f)),G(Tt,"aria-label",`Reply to post${t(r).replies_count>0?`, ${t(r).replies_count} replies`:""}`),ze(mt,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${t(r).reblogged?"text-green-500":"text-text-secondary"} hover:text-green-500 hover:bg-green-500/10`),G(mt,"aria-label",`${t(r).reblogged?"Unboost":"Boost"} post${t(r).reblogs_count>0?`, ${t(r).reblogs_count} boosts`:""}`),G(mt,"aria-pressed",t(r).reblogged),mt.disabled=b(t(r).visibility,"private")||b(t(r).visibility,"direct"),ze(zt,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${t(r).favourited?"text-amber-500":"text-text-secondary"} hover:text-amber-500 hover:bg-amber-500/10`),G(zt,"aria-label",`${t(r).favourited?"Unfavorite":"Favorite"} post${t(r).favourites_count>0?`, ${t(r).favourites_count} favorites`:""}`),G(zt,"aria-pressed",t(r).favourited),G(Ut,"fill",t(r).favourited?"currentColor":"none"),ze(yt,1,`flex items-center gap-1 px-2 py-1 rounded-lg transition-colors ${t(r).bookmarked?"text-primary":"text-text-secondary"} hover:text-primary hover:bg-primary/10`),G(yt,"aria-label",`${t(r).bookmarked?"Remove bookmark":"Bookmark"} post`),G(yt,"aria-pressed",t(r).bookmarked),G(Ta,"fill",t(r).bookmarked?"currentColor":"none")}),v(s,X),Fe(k)}H(["click","keydown"]);Xt[m]="src/lib/components/islands/svelte/TimelineSkeleton.svelte";var _s=g(_('<div class="space-y-2"></div>'),Xt[m],[[11,0]]);function Xt(s,e){Re(new.target),Ue(e,!0,Xt);let a=ne(e,"count",3,5);var n={...Pe()},i=_s();return h(()=>lt(i,21,()=>Array(a()),ma,(r,o)=>{h(()=>tt(r,{}),"component",Xt,13,2,{componentTag:"StatusSkeleton"})}),"each",Xt,12,1),c(i),v(s,i),Fe(n)}Et[m]="src/lib/components/islands/svelte/ErrorState.svelte";var bs=g(_('<button class="btn btn-primary"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Try again</button>'),Et[m],[[32,3,[[33,4,[[34,5]]]]]]),ys=g(_('<details class="mt-4 text-left"><summary class="cursor-pointer text-sm text-text-secondary hover:text-text">Show error details</summary> <pre class="mt-2 p-3 bg-surface-variant rounded text-xs overflow-x-auto"> </pre></details>'),Et[m],[[41,3,[[42,4],[45,4]]]]),xs=g(_('<div class="flex-1 flex items-center justify-center p-8"><div class="text-center max-w-md"><div class="mx-auto w-16 h-16 mb-4 rounded-full bg-error/10 flex items-center justify-center"><svg class="w-8 h-8 text-error" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h2 class="text-xl font-semibold text-text mb-2"> </h2> <p class="text-text-secondary mb-6"> </p> <!> <!></div></div>'),Et[m],[[19,0,[[20,1,[[22,2,[[23,3,[[24,4]]]]],[28,2],[29,2]]]]]]);function Et(s,e){Re(new.target),Ue(e,!0,Et);let a=ne(e,"error",3,null),n=ne(e,"title",3,"Something went wrong"),i=ne(e,"message",3,"We encountered an error while loading this content.");const r=W(me(()=>a()?.message||i()),"errorMessage");var o={...Pe()},l=xs(),d=u(l),f=p(u(d),2),y=u(f,!0);c(f);var E=p(f,2),L=u(E,!0);c(E);var M=p(E,2);{var Q=$=>{var C=bs();C.__click=function(...D){Oe(()=>e.onRetry,this,D,Et,[32,20])},v($,C)};h(()=>z(M,$=>{e.onRetry&&$(Q)}),"if",Et,31,2)}var R=p(M,2);{var ce=$=>{var C=ys(),D=p(u(C),2),P=u(D);c(D),c(C),N(()=>se(P,`${(a().stack||a().message)??""}
				`)),v($,C)};h(()=>z(R,$=>{a()&&$(ce)}),"if",Et,40,2)}return c(d),c(l),N(()=>{se(y,n()),se(L,t(r))}),v(s,l),Fe(o)}H(["click"]);ut[m]="src/lib/components/islands/svelte/EmptyState.svelte";var ws=g(ra('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>'),ut[m],[[25,4,[[26,5]]]]),ks=g(ra('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>'),ut[m],[[29,4,[[30,5]]]]),Ss=g(ra('<svg class="w-8 h-8 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),ut[m],[[33,4,[[34,5]]]]),Cs=g(_('<button class="btn btn-primary"> </button>'),ut[m],[[43,3]]),Ms=g(_('<div class="flex-1 flex items-center justify-center p-8"><div class="text-center max-w-md"><div class="mx-auto w-16 h-16 mb-4 rounded-full bg-surface-variant flex items-center justify-center"><!></div> <h2 class="text-xl font-semibold text-text mb-2"> </h2> <p class="text-text-secondary mb-6"> </p> <!></div></div>'),ut[m],[[20,0,[[21,1,[[23,2],[39,2],[40,2]]]]]]);function ut(s,e){Re(new.target),Ue(e,!0,ut);let a=ne(e,"title",3,"No content yet"),n=ne(e,"message",3,"When there's something to show, it will appear here."),i=ne(e,"icon",3,"inbox");var r={...Pe()},o=Ms(),l=u(o),d=u(l),f=u(d);{var y=C=>{var D=ws();v(C,D)},E=C=>{var D=Le(),P=_e(D);{var ee=ie=>{var V=ks();v(ie,V)},A=ie=>{var V=Le(),k=_e(V);{var X=T=>{var ve=Ss();v(T,ve)};h(()=>z(k,T=>{b(i(),"users")&&T(X)},!0),"if",ut,32,3)}v(ie,V)};h(()=>z(P,ie=>{b(i(),"search")?ie(ee):ie(A,!1)},!0),"if",ut,28,3)}v(C,D)};h(()=>z(f,C=>{b(i(),"inbox")?C(y):C(E,!1)}),"if",ut,24,3)}c(d);var L=p(d,2),M=u(L,!0);c(L);var Q=p(L,2),R=u(Q,!0);c(Q);var ce=p(Q,2);{var $=C=>{var D=Cs();D.__click=function(...ee){Oe(()=>e.action.onClick,this,ee,ut,[43,20])};var P=u(D,!0);c(D),N(()=>se(P,e.action.label)),v(C,D)};h(()=>z(ce,C=>{e.action&&C($)}),"if",ut,42,2)}return c(l),c(o),N(()=>{se(M,a()),se(R,n())}),v(s,o),Fe(r)}H(["click"]);be[m]="src/lib/components/islands/svelte/Timeline.svelte";const rr=Ot(be,function(s,e=Oa){wa(...arguments);var a=Ts(),n=_e(a);h(()=>he(n,{get status(){return e().status}}),"component",be,345,1,{componentTag:"StatusCard"});var i=p(n,2);{var r=o=>{h(()=>mr(o,()=>e().replies,()=>1),"render",be,347,2)};h(()=>z(i,o=>{e().replies.length>0&&o(r)}),"if",be,346,1)}v(s,a)}),mr=Ot(be,function(s,e=Oa,a){wa(...arguments);let n=Nr(()=>Wr(a?.(),1));t(n);var i=Le(),r=_e(i);At(e,o=>o.status.id),h(()=>lt(r,17,e,o=>o.status.id,(o,l)=>{var d=zs(),f=u(d);h(()=>he(f,{get status(){return t(l).status}}),"component",be,354,3,{componentTag:"StatusCard"});var y=p(f,2);{var E=L=>{h(()=>mr(L,()=>t(l).replies,()=>t(n)+1),"render",be,356,4)};h(()=>z(y,L=>{t(l).replies.length>0&&L(E)}),"if",be,355,3)}c(d),v(o,d)}),"each",be,352,1),v(s,i)});var Ts=g(_("<!> <!>",1),be[m],[]),zs=g(_('<div class="ml-12"><!> <!></div>'),be[m],[[353,2]]),Ls=g(_('<div class="flex-1 overflow-y-auto px-4 py-4"><!></div>'),be[m],[[238,2]]),Es=g(_('<div class="w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"></div> <span>Refreshing...</span>',1),be[m],[[270,7],[271,7]]),js=g(_('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg> <span>Release to refresh</span>',1),be[m],[[273,7,[[274,8]]],[276,7]]),Is=g(_('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg> <span>Pull to refresh</span>',1),be[m],[[278,7,[[279,8]]],[281,7]]),As=g(_('<div><div class="flex items-center gap-2 text-text-secondary"><!></div></div>'),be[m],[[264,4,[[268,5]]]]),Os=g(_('<div class="px-4"><!></div>'),be[m],[[294,6]]),qs=g(_('<div class="px-4"></div>'),be[m],[[289,4]]),Ds=g(_('<div class="px-4 py-4 space-y-4"></div>'),be[m],[[311,4]]),Rs=g(_('<div class="w-6 h-6 border-3 border-primary border-t-transparent rounded-full animate-spin mx-auto"></div>'),be[m],[[325,6]]),Ps=g(_('<button class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 transition-colors">Load more</button>'),be[m],[[327,6]]),Us=g(_('<div class="py-4 text-center"><!></div>'),be[m],[[323,4]]),Fs=g(_('<div class="py-4 text-center text-text-secondary"><p>No more posts</p></div>'),be[m],[[336,4,[[337,5]]]]),Bs=g(_('<div class="flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin"><!> <!> <div class="h-1"></div> <!></div>'),be[m],[[258,2,[[319,3]]]]),Ns=g(_('<div class="relative h-full flex flex-col"><!></div>'),be[m],[[236,0]]);function be(s,e){Re(new.target),Ue(e,!0,be);let a=ne(e,"type",3,"home"),n=ne(e,"enableVirtualization",3,"auto"),i=ne(e,"groupConversations",19,()=>b(a(),"home")),r=ne(e,"enablePullToRefresh",3,!0);const o=W(me(()=>at.timelines[a()]||{statuses:[],hasMore:!0,isLoading:!1,isLoadingMore:!1,error:null,lastFetch:0,stream:null,gaps:[]}),"timeline");rt(()=>{console.log(...Je("log","[Timeline] Timeline state:",{type:a(),statusCount:t(o).statuses.length,isLoading:t(o).isLoading,hasTimeline:!!at.timelines[a()],groupedStatusCount:t(l).length,shouldVirtualize:t(Q),virtualizer:!!t(R)}))});const l=W(me(()=>{if(console.log(...Je("log","[Timeline] Computing groupedStatuses:",{groupConversations:i(),statusCount:t(o).statuses.length})),!i())return t(o).statuses.map(U=>({status:U,replies:[]}));const X=new Map(t(o).statuses.map(U=>[U.id,U])),T=[],ve=new Set;function fe(U){const x=[];for(const le of t(o).statuses)b(le.in_reply_to_id,U)&&!ve.has(le.id)&&(ve.add(le.id),x.push({status:le,replies:fe(le.id)}));return x}for(const U of t(o).statuses)ve.has(U.id)||U.in_reply_to_id&&X.has(U.in_reply_to_id)||(ve.add(U.id),T.push({status:U,replies:fe(U.id)}));return T}),"groupedStatuses");let d,f,y,E=W(ke(!1),"isPulling"),L=W(ke(0),"pullDistance"),M=W(ke(!1),"isRefreshing");const Q=W(me(()=>b(n(),!0)||b(n(),"auto")&&t(l).length>50),"shouldVirtualize");let R=W(ke(null),"virtualizer");rt(()=>{if(!t(Q)||!d||b(t(l).length,0)){I(R,null);return}I(R,Mn({count:t(l).length,getScrollElement:()=>d,estimateSize:()=>200,overscan:5,gap:8}),!0)});const ce=W(me(()=>t(R)?.getVirtualItems()||[]),"virtualItems"),$=W(me(()=>t(R)?.getTotalSize()||0),"totalSize");let C;It(()=>{if(at.initialize(),at.loadTimeline(a()),at.connectStream(a()),C=new IntersectionObserver(X=>{X[0].isIntersecting&&t(o).hasMore&&!t(o).isLoadingMore&&at.loadMore(a())},{rootMargin:"100px"}),f&&C.observe(f),r()){let X=0,T=0;const ve=x=>{b(d.scrollTop,0)&&(X=x.touches[0].clientY)},fe=x=>{if(!X)return;T=x.touches[0].clientY;const le=T-X;le>0&&b(d.scrollTop,0)&&(x.preventDefault(),I(E,!0),I(L,Math.min(le,100),!0),y&&(y.style.transform=`translateY(${t(L)}px)`))},U=async()=>{t(L)>60&&!t(M)&&(I(M,!0),(await pe(at.refreshTimeline(a())))(),I(M,!1)),I(E,!1),I(L,0),X=0,y&&(y.style.transform="translateY(0)")};return d?.addEventListener("touchstart",ve,{passive:!0}),d?.addEventListener("touchmove",fe,{passive:!1}),d?.addEventListener("touchend",U),()=>{d?.removeEventListener("touchstart",ve),d?.removeEventListener("touchmove",fe),d?.removeEventListener("touchend",U)}}return()=>{at.disconnectStream(a()),C?.disconnect()}});function D(){at.refreshTimeline(a())}function P(){!t(o).hasMore||t(o).isLoadingMore||at.loadMore(a())}var ee={...Pe()},A=Ns(),ie=u(A);{var V=X=>{var T=Ls(),ve=u(T);h(()=>Xt(ve,{count:10}),"component",be,239,3,{componentTag:"TimelineSkeleton"}),c(T),v(X,T)},k=X=>{var T=Le(),ve=_e(T);{var fe=x=>{h(()=>Et(x,{get error(){return t(o).error},title:"Unable to load timeline",onRetry:D}),"component",be,242,2,{componentTag:"ErrorState"})},U=x=>{var le=Le(),te=_e(le);{var Ce=ae=>{{let q=me(()=>b(a(),"home")?"Your timeline is empty":"No posts yet"),re=me(()=>b(a(),"home")?"Follow some people to see their posts here!":b(a(),"local")?"Be the first to post something on this instance!":"No public posts from other instances yet.");h(()=>ut(ae,{get title(){return t(q)},get message(){return t(re)},icon:"inbox"}),"component",be,248,2,{componentTag:"EmptyState"})}},qe=ae=>{var q=Bs(),re=u(q);{var j=F=>{var J=As(),de=u(J),Me=u(de);{var Ne=we=>{var Qe=Es();_t(2),v(we,Qe)},je=we=>{var Qe=Le(),et=_e(Qe);{var nt=Ze=>{var ct=js();_t(2),v(Ze,ct)},Ge=Ze=>{var ct=Is();_t(2),v(Ze,ct)};h(()=>z(et,Ze=>{t(L)>60?Ze(nt):Ze(Ge,!1)},!0),"if",be,272,6)}v(we,Qe)};h(()=>z(Me,we=>{t(M)?we(Ne):we(je,!1)}),"if",be,269,6)}c(de),c(J),St(J,we=>y=we,()=>y),N(()=>ze(J,1,`absolute top-0 left-0 right-0 flex justify-center py-4 transition-transform duration-300 ${t(E)?"":"-translate-y-full"}`)),v(F,J)};h(()=>z(re,F=>{r()&&F(j)}),"if",be,262,3)}var K=p(re,2);{var oe=F=>{var J=qs();At(()=>t(ce),de=>t(l)[de.index].status.id),h(()=>lt(J,21,()=>t(ce),de=>t(l)[de.index].status.id,(de,Me)=>{var Ne=Os(),je=u(Ne);h(()=>rr(je,()=>t(l)[t(Me).index]),"render",be,305,7),c(Ne),N(()=>vt(Ne,`
								position: absolute;
								top: 0;
								left: 0;
								width: 100%;
								height: ${t(Me).size??""}px;
								transform: translateY(${t(Me).start??""}px);
							`)),v(de,Ne)}),"each",be,293,5),c(J),N(()=>vt(J,`height: ${t($)??""}px; width: 100%; position: relative;`)),v(F,J)},ue=F=>{var J=Ds();At(()=>t(l),de=>de.status.id),h(()=>lt(J,21,()=>t(l),de=>de.status.id,(de,Me)=>{h(()=>rr(de,()=>t(Me)),"render",be,313,6)}),"each",be,312,5),c(J),v(F,J)};h(()=>z(K,F=>{t(Q)&&t(R)?F(oe):F(ue,!1)}),"if",be,287,3)}var ge=p(K,2);St(ge,F=>f=F,()=>f);var Z=p(ge,2);{var S=F=>{var J=Us(),de=u(J);{var Me=je=>{var we=Rs();v(je,we)},Ne=je=>{var we=Le(),Qe=_e(we);{var et=nt=>{var Ge=Ps();Ge.__click=P,v(nt,Ge)};h(()=>z(Qe,nt=>{t(Q)||nt(et)},!0),"if",be,326,5)}v(je,we)};h(()=>z(de,je=>{t(o).isLoadingMore?je(Me):je(Ne,!1)}),"if",be,324,5)}c(J),v(F,J)},B=F=>{var J=Le(),de=_e(J);{var Me=Ne=>{var je=Fs();v(Ne,je)};h(()=>z(de,Ne=>{t(o).statuses.length>0&&Ne(Me)},!0),"if",be,335,3)}v(F,J)};h(()=>z(Z,F=>{t(o).hasMore?F(S):F(B,!1)}),"if",be,322,3)}c(q),St(q,F=>d=F,()=>d),v(ae,q)};h(()=>z(te,ae=>{b(t(o).statuses.length,0)?ae(Ce):ae(qe,!1)},!0),"if",be,247,1)}v(x,le)};h(()=>z(ve,x=>{t(o).error?x(fe):x(U,!1)},!0),"if",be,241,1)}v(X,T)};h(()=>z(ie,X=>{t(o).isLoading&&b(t(o).statuses.length,0)?X(V):X(k,!1)}),"if",be,237,1)}return c(A),v(s,A),Fe(ee)}H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click","keydown"]);H(["click","change"]);H(["click"]);H(["click","keydown"]);H(["input","click","keydown"]);H(["input","click"]);H(["click","input","change"]);H(["click","change"]);H(["keydown","click"]);H(["keydown","click"]);H(["click"]);H(["click","keydown"]);H(["click","keydown"]);H(["change","click","keydown"]);H(["click"]);class Ws{constructor(e={}){this.cache=new Map,this.accessOrder=[],this.maxSize=e.maxSize??1e3,this.defaultTTL=e.defaultTTL??3e5,this.debug=e.debug??!1,this.hits=0,this.misses=0,this.logger=e.logger}get(e){const a=this.cache.get(e);if(!a){this.misses++,this.log("miss",e);return}if(Date.now()-a.timestamp>a.ttl){this.cache.delete(e),this.removeFromAccessOrder(e),this.misses++,this.log("expired",e);return}return this.updateAccessOrder(e),this.hits++,this.log("hit",e),a.value}set(e,a,n){const i={value:a,timestamp:Date.now(),ttl:n??this.defaultTTL,size:this.estimateSize(a)};this.cache.size>=this.maxSize&&!this.cache.has(e)&&this.evictLRU(),this.cache.set(e,i),this.updateAccessOrder(e),this.log("set",e,`ttl=${i.ttl}ms`)}has(e){return this.get(e)!==void 0}delete(e){const a=this.cache.delete(e);return a&&(this.removeFromAccessOrder(e),this.log("delete",e)),a}clear(){this.cache.clear(),this.accessOrder=[],this.hits=0,this.misses=0,this.log("clear","all")}getStats(){return{size:this.cache.size,maxSize:this.maxSize,hits:this.hits,misses:this.misses,hitRate:this.hits/(this.hits+this.misses)||0}}invalidate(e){const a=typeof e=="string"?new RegExp(e):e,n=e.toString();let i=0;for(const r of this.cache.keys())a.test(r)&&(this.delete(r),i++);return this.log("invalidate",n,`${i} entries`),i}updateAccessOrder(e){this.removeFromAccessOrder(e),this.accessOrder.push(e)}removeFromAccessOrder(e){const a=this.accessOrder.indexOf(e);a!==-1&&this.accessOrder.splice(a,1)}evictLRU(){if(this.accessOrder.length===0)return;const e=this.accessOrder[0];e!==void 0&&(this.cache.delete(e),this.accessOrder.shift(),this.log("evict",e))}estimateSize(e){try{return JSON.stringify(e).length}catch{return 1e3}}log(e,a,n){if(!this.debug)return;const i=this.getStats(),r={scope:"cache",action:e,message:`${a}${n?` ${n}`:""}`.trim(),stats:i};this.logger?this.logger(r):typeof console<"u"&&typeof console.warn=="function"&&console.warn(`[Cache] ${e} key="${a}" ${n||""} (${i.size}/${i.maxSize}, hit rate: ${(i.hitRate*100).toFixed(1)}%)`)}}new Ws({maxSize:1e3,defaultTTL:3e5,debug:!1});H(["click"]);H(["click"]);H(["change","click"]);H(["change","click"]);H(["change","click"]);H(["input","click"]);H(["input","click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["input","keydown","click"]);H(["click"]);H(["click","keydown"]);H(["click","keydown"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["change"]);H(["click"]);H(["keydown"]);H(["click"]);const ka={maxFileSize:8*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","audio/mp3","audio/ogg","audio/wav"],maxFiles:4,generateThumbnails:!0,thumbnailSize:200};function Sa(s){return s.startsWith("image/")?"image":s.startsWith("video/")?"video":s.startsWith("audio/")?"audio":"unknown"}function hr(s){const e=s.toLowerCase();return e.startsWith("image/")?e==="image/gif"?"GIFV":"IMAGE":e.startsWith("video/")?"VIDEO":e.startsWith("audio/")?"AUDIO":"DOCUMENT"}function Aa(s){return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:s<1024*1024*1024?`${(s/(1024*1024)).toFixed(1)} MB`:`${(s/(1024*1024*1024)).toFixed(1)} GB`}function gr(s,e={}){const a={...ka,...e},n=[],i=Sa(s.type)==="video"?40*1024*1024:a.maxFileSize;return s.size>i&&n.push(`File size ${Aa(s.size)} exceeds limit of ${Aa(i)}`),a.allowedTypes.includes(s.type)||n.push(`File type ${s.type} is not allowed`),{valid:n.length===0,errors:n}}function pr(s,e={}){const a={...ka,...e},n=[];s.length>a.maxFiles&&n.push(`Maximum ${a.maxFiles} files allowed`);for(const i of s){const r=gr(i,e);n.push(...r.errors)}return{valid:n.length===0,errors:n}}async function Vs(s){const e=Sa(s.type);return e==="image"||e==="video"?URL.createObjectURL(s):""}async function Hs(s,e=200){return s.type.startsWith("image/")?new Promise(a=>{const n=new Image,i=new FileReader;i.onload=r=>{n.src=r.target?.result},n.onload=()=>{const r=document.createElement("canvas"),o=r.getContext("2d");if(!o){a(null);return}let l=n.width,d=n.height;l>d?l>e&&(d=d*e/l,l=e):d>e&&(l=l*e/d,d=e),r.width=l,r.height=d,o.drawImage(n,0,0,l,d),a(r.toDataURL("image/jpeg",.8))},n.onerror=()=>a(null),i.readAsDataURL(s)}):null}async function Gs(s){return s.type.startsWith("image/")?new Promise(e=>{const a=new Image,n=URL.createObjectURL(s);a.onload=()=>{URL.revokeObjectURL(n),e({width:a.width,height:a.height})},a.onerror=()=>{URL.revokeObjectURL(n),e(null)},a.src=n}):null}async function Qs(s){return s.type.startsWith("video/")?new Promise(e=>{const a=document.createElement("video"),n=URL.createObjectURL(s);a.onloadedmetadata=()=>{URL.revokeObjectURL(n),e(a.duration)},a.onerror=()=>{URL.revokeObjectURL(n),e(null)},a.src=n}):null}async function Ks(s,e={}){const a={...ka,...e},n=Sa(s.type),i=hr(s.type),r=gr(s,e);if(!r.valid)return{id:crypto.randomUUID(),file:s,type:n,mediaCategory:i,progress:0,status:"error",error:r.errors.join(", "),sensitive:!1,spoilerText:"",metadata:{size:s.size}};const o=await Vs(s);let l;a.generateThumbnails&&n==="image"&&(l=await Hs(s,a.thumbnailSize)||void 0);let d={size:s.size};if(n==="image"){const f=await Gs(s);f&&(d={...d,...f})}else if(n==="video"){const f=await Qs(s);f&&(d={...d,duration:f})}return{id:crypto.randomUUID(),file:s,type:n,mediaCategory:i,previewUrl:o,thumbnailUrl:l,progress:0,status:"pending",sensitive:!1,spoilerText:"",metadata:d}}async function Ys(s,e={}){const a={...ka,...e},n=pr(s,e);if(!n.valid)return s.map(r=>({id:crypto.randomUUID(),file:r,type:Sa(r.type),mediaCategory:hr(r.type),progress:0,status:"error",error:n.errors[0],sensitive:!1,spoilerText:"",metadata:{size:r.size}}));const i=s.slice(0,a.maxFiles);return Promise.all(i.map(r=>Ks(r,e)))}function Xs(s){s.previewUrl&&s.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(s.previewUrl)}function Js(s){s.forEach(Xs)}H(["change","click","input"]);H(["click"]);H(["click","change"]);H(["change","keydown","click"]);H(["click"]);H(["keydown","click"]);H(["click"]);H(["click"]);H(["click"]);H(["input","keydown","change"]);const _r=Symbol("compose-context");function Zs(s={},e={},a={},n){const i=s.characterLimit||500,r={content:"",contentWarning:"",visibility:s.defaultVisibility||"public",mediaAttachments:[],submitting:!1,error:null,characterCount:0,overLimit:!1,inReplyTo:void 0,contentWarningEnabled:!1},o=n||{...r,...a};function l(){Object.assign(o,r)}const d={config:{characterLimit:i,allowMedia:s.allowMedia??!0,maxMediaAttachments:s.maxMediaAttachments||4,allowPolls:s.allowPolls??!0,allowContentWarnings:s.allowContentWarnings??!0,defaultVisibility:s.defaultVisibility||"public",enableMarkdown:s.enableMarkdown??!1,placeholder:s.placeholder||"What's on your mind?",class:s.class||""},handlers:e,state:o,updateState:f=>{Object.assign(o,f)},reset:l};return Vr(_r,d),d}function na(){const s=Hr(_r);if(!s)throw new Error("Compose context not found. Make sure you are using Compose components inside <Compose.Root>.");return s}wt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/Root.svelte";var $s=g(_('<div class="compose-root__error svelte-1mhx2b6" role="alert"> </div>'),wt[m],[[137,2]]),eo=g(_('<div class="compose-root__reply-indicator svelte-1mhx2b6">Replying to post</div>'),wt[m],[[143,2]]),to=g(_("<form><!> <!> <!></form>"),wt[m],[[129,0]]);function wt(s,e){Re(new.target),Ue(e,!0,wt);let a=ne(e,"config",19,()=>({})),n=ne(e,"handlers",19,()=>({})),i=ne(e,"initialState",19,()=>({}));const r=a().characterLimit||500,o={content:"",contentWarning:"",visibility:a().defaultVisibility||"public",mediaAttachments:[],submitting:!1,error:null,characterCount:0,overLimit:!1,inReplyTo:void 0,contentWarningEnabled:!1};let l=qa(ft({...o,...i()}),"state");l.characterCount=l.content.length+l.contentWarning.length,l.overLimit=l.characterCount>r,rt(()=>{const P=l.content.length+l.contentWarning.length;l.characterCount=P,l.overLimit=P>r});function d(){Object.assign(l,o),l.characterCount=l.content.length+l.contentWarning.length,l.overLimit=l.characterCount>r}const f=Zs(a(),n(),i(),l);f.reset=d;async function y(P){if(P.preventDefault(),!(f.state.overLimit||f.state.submitting)){if(!f.handlers.onSubmit){console.warn("No onSubmit handler provided to Compose.Root");return}f.updateState({submitting:!0,error:null});try{(await pe(f.handlers.onSubmit({content:f.state.content,visibility:f.state.visibility,contentWarning:f.state.contentWarningEnabled?f.state.contentWarning:void 0,mediaAttachments:f.state.mediaAttachments,inReplyTo:f.state.inReplyTo})))(),f.reset()}catch(ee){f.updateState({error:ee})}finally{f.updateState({submitting:!1})}}}var E={...Pe()},L=to();let M;var Q=u(L);{var R=P=>{var ee=$s(),A=u(ee,!0);c(ee),N(()=>se(A,f.state.error.message)),v(P,ee)};h(()=>z(Q,P=>{f.state.error&&P(R)}),"if",wt,136,1)}var ce=p(Q,2);{var $=P=>{var ee=eo();v(P,ee)};h(()=>z(ce,P=>{f.state.inReplyTo&&P($)}),"if",wt,142,1)}var C=p(ce,2);{var D=P=>{var ee=Le(),A=_e(ee);h(()=>bt(A,()=>e.children),"render",wt,147,2),v(P,ee)};h(()=>z(C,P=>{e.children&&P(D)}),"if",wt,146,1)}return c(L),N(()=>{M=ze(L,1,`compose-root ${f.config.class}`,"svelte-1mhx2b6",M,{"compose-root--submitting":f.state.submitting,"compose-root--over-limit":f.state.overLimit}),G(L,"aria-busy",f.state.submitting)}),Ve("submit",L,y),v(s,L),Fe(E)}Ca[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/Editor.svelte";var ao=g(_('<textarea aria-label="Compose post content" aria-describedby="compose-character-count"></textarea>'),Ca[m],[[82,0]]);function Ca(s,e){Re(new.target),Ue(e,!0,Ca);let a=ne(e,"rows",3,4),n=ne(e,"autofocus",3,!1),i=ne(e,"class",3,"");const r=na();let o;n()&&It(()=>{queueMicrotask(()=>o?.focus())});function l(){o&&(o.style.height="auto",o.style.height=`${o.scrollHeight}px`)}function d(L){const M=L.target;r.updateState({content:M.value}),l()}function f(L){if((L.metaKey||L.ctrlKey)&&b(L.key,"Enter")){L.preventDefault();const M=o.closest("form");M&&M.requestSubmit()}}var y={...Pe()},E=ao();return ha(E),E.__input=d,E.__keydown=f,St(E,L=>o=L,()=>o),N(()=>{ze(E,1,`compose-editor ${i()}`,"svelte-1hb5xix"),G(E,"rows",a()),G(E,"placeholder",r.config.placeholder),Zt(E,r.state.content),E.disabled=r.state.submitting}),v(s,E),Fe(y)}H(["input","keydown"]);ta[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/Submit.svelte";var ro=g(_('<span class="compose-submit__spinner svelte-gc2xzq"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-gc2xzq"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"></path><path fill="currentColor" d="M12 4a8 8 0 0 0-8 8h2a6 6 0 0 1 6-6z"></path></svg></span> ',1),ta[m],[[58,2,[[59,3,[[60,4],[64,4]]]]]]),no=g(_("<button><!></button>"),ta[m],[[56,0]]);function ta(s,e){Re(new.target),Ue(e,!0,ta);let a=ne(e,"text",3,"Post"),n=ne(e,"loadingText",3,"Posting..."),i=ne(e,"class",3,"");const r=na(),o=Vt({type:"submit"}),l=W(me(()=>r.state.submitting||r.state.overLimit||b(r.state.content.trim().length,0)),"isDisabled");rt(()=>{o.helpers.setDisabled(t(l)),o.helpers.setLoading(r.state.submitting)});var d={...Pe()},f=no(),y=u(f);{var E=M=>{var Q=ro(),R=p(_e(Q));N(()=>se(R,` ${n()??""}`)),v(M,Q)},L=M=>{var Q=Yt();N(()=>se(Q,a())),v(M,Q)};h(()=>z(y,M=>{r.state.submitting?M(E):M(L,!1)}),"if",ta,57,1)}return c(f),Wt(f,M=>o.actions.button?.(M)),N(()=>ze(f,1,`compose-submit ${i()}`,"svelte-gc2xzq")),v(s,f),Fe(d)}Rt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/CharacterCount.svelte";var io=g(ra('<svg class="compose-character-count__progress svelte-1gfrkus" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" fill="none" stroke="var(--compose-progress-bg, #e1e8ed)" stroke-width="2"></circle><circle cx="16" cy="16" fill="none" stroke="currentColor" stroke-width="2" transform="rotate(-90 16 16)" class="compose-character-count__progress-circle svelte-1gfrkus"></circle></svg>'),Rt[m],[[56,2,[[58,3],[67,3]]]]),so=g(_('<span class="compose-character-count__text svelte-1gfrkus"> </span>'),Rt[m],[[83,2]]),oo=g(_('<div id="compose-character-count" role="status" aria-live="polite"><!> <!></div>'),Rt[m],[[46,0]]);function Rt(s,e){Re(new.target),Ue(e,!0,Rt);let a=ne(e,"showProgress",3,!0),n=ne(e,"class",3,"");const i=na(),r=W(me(()=>i.state.characterCount/i.config.characterLimit*100),"percentage"),o=W(me(()=>t(r)>=80),"isNearLimit"),l=W(me(()=>i.state.overLimit),"isOverLimit"),d=14,f=2*Math.PI*d,y=W(me(()=>f-t(r)/100*f),"offset");var E={...Pe()},L=oo();let M;var Q=u(L);{var R=C=>{var D=io(),P=u(D);G(P,"r",d);var ee=p(P);G(ee,"r",d),G(ee,"stroke-dasharray",f),c(D),N(()=>G(ee,"stroke-dashoffset",t(y))),v(C,D)};h(()=>z(Q,C=>{a()&&C(R)}),"if",Rt,55,1)}var ce=p(Q,2);{var $=C=>{var D=so(),P=u(D);c(D),N(()=>se(P,`${i.state.characterCount??""} / ${i.config.characterLimit??""}`)),v(C,D)};h(()=>z(ce,C=>{(t(o)||t(l))&&C($)}),"if",Rt,82,1)}return c(L),N(()=>{M=ze(L,1,`compose-character-count ${n()}`,"svelte-1gfrkus",M,{"compose-character-count--near-limit":t(o),"compose-character-count--over-limit":t(l)}),G(L,"aria-label",`${i.state.characterCount} of ${i.config.characterLimit} characters used`)}),v(s,L),Fe(E)}aa[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/VisibilitySelect.svelte";var lo=g(_("<option> </option>"),aa[m],[[85,3]]),co=g(_('<div><label for="compose-visibility" class="compose-visibility-select__label svelte-sjbzfi">Visibility</label> <select id="compose-visibility" class="compose-visibility-select__select svelte-sjbzfi" aria-label="Post visibility"></select> <p class="compose-visibility-select__description svelte-sjbzfi"> </p></div>'),aa[m],[[74,0,[[75,1],[76,1],[91,1]]]]);function aa(s,e){Re(new.target),Ue(e,!0,aa);let a=ne(e,"class",3,"");const n=na(),i=[{value:"public",label:"Public",icon:"üåê",description:"Anyone can see this post"},{value:"unlisted",label:"Unlisted",icon:"üîì",description:"Not shown in public timelines"},{value:"private",label:"Followers only",icon:"üîí",description:"Only your followers can see"},{value:"direct",label:"Direct",icon:"‚úâÔ∏è",description:"Only mentioned users can see"}],r=W(me(()=>i.find(M=>b(M.value,n.state.visibility))||i[0]),"currentOption");function o(M){const Q=M.target;n.updateState({visibility:Q.value})}var l={...Pe()},d=co(),f=p(u(d),2);f.__change=o,At(()=>i,M=>M.value),h(()=>lt(f,21,()=>i,M=>M.value,(M,Q)=>{var R=lo(),ce=u(R);c(R);var $={};N(()=>{se(ce,`${t(Q).icon??""}
				${t(Q).label??""}`),$!==($=t(Q).value)&&(R.value=(R.__value=t(Q).value)??"")}),v(M,R)}),"each",aa,84,2),c(f);var y;tn(f);var E=p(f,2),L=u(E,!0);return c(E),c(d),N(()=>{ze(d,1,`compose-visibility-select ${a()}`,"svelte-sjbzfi"),f.disabled=n.state.submitting,y!==(y=n.state.visibility)&&(f.value=(f.__value=n.state.visibility)??"",an(f,n.state.visibility)),se(L,t(r).description)}),v(s,d),Fe(l)}H(["change"]);Ye[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/AutocompleteMenu.svelte";var uo=g(_('<div class="autocomplete-menu__loading svelte-v7258j"><span class="autocomplete-menu__spinner svelte-v7258j"></span> <span>Loading suggestions...</span></div>'),Ye[m],[[118,2,[[119,3],[120,3]]]]),vo=g(_('<div class="autocomplete-menu__empty svelte-v7258j">No suggestions found</div>'),Ye[m],[[123,2]]),fo=g(_('<img alt="" class="autocomplete-menu__avatar svelte-v7258j"/>'),Ye[m],[[136,5]]),mo=g(_('<span class="autocomplete-menu__followers svelte-v7258j"> </span>'),Ye[m],[[148,8]]),ho=g(_('<div class="autocomplete-menu__secondary svelte-v7258j"><!> <!></div>'),Ye[m],[[143,6]]),go=g(_('<div class="autocomplete-menu__secondary svelte-v7258j"> </div>'),Ye[m],[[156,6]]),po=g(_('<span class="autocomplete-menu__emoji svelte-v7258j"> </span>'),Ye[m],[[161,5]]),_o=g(_('<button role="option" type="button"><!> <div class="autocomplete-menu__content svelte-v7258j"><div class="autocomplete-menu__primary svelte-v7258j"> </div> <!> <!></div> <!></button>'),Ye[m],[[126,3,[[139,4,[[140,5]]]]]]),bo=g(_('<div role="listbox" aria-label="Autocomplete suggestions"><!></div>'),Ye[m],[[110,0]]);function Ye(s,e){Re(new.target),Ue(e,!0,Ye);let a=ne(e,"selectedIndex",3,0),n=ne(e,"loading",3,!1),i=ne(e,"class",3,""),r=null;function o(M){b(M.key,"Escape")&&(M.preventDefault(),e.onClose())}function l(M){r&&!r.contains(M.target)&&e.onClose()}rt(()=>(document.addEventListener("keydown",o),document.addEventListener("click",l),()=>{document.removeEventListener("keydown",o),document.removeEventListener("click",l)})),rt(()=>{if(r&&a()>=0){const M=r.querySelector(`[data-index="${a()}"]`);M&&M.scrollIntoView({block:"nearest",behavior:"smooth"})}});var d={...Pe()},f=bo(),y=u(f);{var E=M=>{var Q=uo();v(M,Q)},L=M=>{var Q=Le(),R=_e(Q);{var ce=C=>{var D=vo();v(C,D)},$=C=>{var D=Le(),P=_e(D);At(()=>e.suggestions,ee=>ee.value),h(()=>lt(P,19,()=>e.suggestions,ee=>ee.value,(ee,A,ie)=>{var V=_o();let k;V.__click=()=>e.onSelect(t(A));var X=u(V);{var T=q=>{var re=fo();N(()=>G(re,"src",t(A).metadata.avatar)),v(q,re)};h(()=>z(X,q=>{b(t(A).type,"mention")&&t(A).metadata?.avatar&&q(T)}),"if",Ye,135,4)}var ve=p(X,2),fe=u(ve),U=u(fe,!0);c(fe);var x=p(fe,2);{var le=q=>{var re=ho(),j=u(re);{var K=ge=>{var Z=Yt();N(()=>se(Z,t(A).metadata.displayName)),v(ge,Z)};h(()=>z(j,ge=>{t(A).metadata.displayName&&ge(K)}),"if",Ye,144,7)}var oe=p(j,2);{var ue=ge=>{var Z=mo(),S=u(Z);c(Z),N(B=>se(S,`${B??""} followers`),[()=>t(A).metadata.followers.toLocaleString()]),v(ge,Z)};h(()=>z(oe,ge=>{b(t(A).metadata.followers,void 0,!1)&&ge(ue)}),"if",Ye,147,7)}c(re),v(q,re)};h(()=>z(x,q=>{b(t(A).type,"mention")&&t(A).metadata&&q(le)}),"if",Ye,142,5)}var te=p(x,2);{var Ce=q=>{var re=go(),j=u(re);c(re),N(()=>se(j,`#${t(A).value??""}`)),v(q,re)};h(()=>z(te,q=>{b(t(A).type,"hashtag")&&q(Ce)}),"if",Ye,155,5)}c(ve);var qe=p(ve,2);{var ae=q=>{var re=po(),j=u(re,!0);c(re),N(()=>se(j,t(A).value)),v(q,re)};h(()=>z(qe,q=>{b(t(A).type,"emoji")&&q(ae)}),"if",Ye,160,4)}c(V),N(()=>{k=ze(V,1,"autocomplete-menu__item svelte-v7258j",null,k,{"autocomplete-menu__item--selected":b(t(ie),a())}),G(V,"data-index",t(ie)),G(V,"aria-selected",b(t(ie),a())),se(U,t(A).text)}),v(ee,V)}),"each",Ye,125,2),v(C,D)};h(()=>z(R,C=>{b(e.suggestions.length,0)?C(ce):C($,!1)},!0),"if",Ye,122,1)}v(M,Q)};h(()=>z(y,M=>{n()?M(E):M(L,!1)}),"if",Ye,117,1)}return c(f),St(f,M=>r=M,()=>r),N(()=>{ze(f,1,`autocomplete-menu ${i()}`,"svelte-v7258j"),vt(f,`left: ${e.position.x}px; top: ${e.position.y}px;`)}),v(s,f),Fe(d)}H(["click"]);function yo(s,e){let a=e-1;for(;a>=0&&s[a]!==" "&&s[a]!==`
`;)a--;a++;const n=a,i=e,r=s.substring(n,i);return r.startsWith("#")&&r.length>1?{type:"hashtag",query:r.slice(1),start:n,end:i}:r.startsWith("@")&&r.length>1?{type:"mention",query:r.slice(1),start:n,end:i}:r.startsWith(":")&&r.length>1?{type:"emoji",query:r.slice(1),start:n,end:i}:null}function xo(s,e,a=10){if(!e)return s.slice(0,a);const n=e.toLowerCase();return s.map(r=>{const o=r.text.toLowerCase();let l=0;return o===n?l=1e3:o.startsWith(n)?l=100:o.includes(n)?l=10:l=0,{suggestion:r,score:l}}).filter(r=>r.score>0).sort((r,o)=>o.score-r.score).slice(0,a).map(r=>r.suggestion)}function wo(s,e,a){let n=a.value;const i=s[e.end];i!==" "&&i!==`
`&&i!==void 0&&(n+=" ");const r=s.substring(0,e.start),o=s.substring(e.end),l=r+n+o,d=e.start+n.length;return{text:l,cursorPosition:d}}function ko(s){return s.selectionStart||0}function So(s,e){s.setSelectionRange(e,e),s.focus()}function Co(s){if(!s)return 0;if(typeof Intl<"u"&&"Segmenter"in Intl){const e=Intl.Segmenter;if(e){const a=new e("en",{granularity:"grapheme"});return Array.from(a.segment(s)).length}}return Array.from(s).length}const Mo=/https?:\/\/(?:www\.)?[-\w@:%+.~#=]{1,256}\.[\w()]{1,6}\b([-\w()@:%+.~#?&/=]*)/giu;function br(s,e={}){const{urlWeight:a=23,useUrlWeighting:n=!0}=e;if(!s)return{count:0,graphemeCount:0,urls:0,mentions:0,hashtags:0};const i=Co(s),r=s.match(Mo)||[],o=r.reduce((y,E)=>y+E.length,0),l=s.match(/@[a-zA-Z0-9_]+(?:@[a-zA-Z0-9.-]+)?/g)||[],d=s.match(/#[a-zA-Z0-9_]+/g)||[];let f=i;return n&&r.length>0&&(f-=o,f+=r.length*a),{count:f,graphemeCount:i,urls:r.length,mentions:l.length,hashtags:d.length}}Jt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/EditorWithAutocomplete.svelte";var To=g(_('<div class="editor-with-autocomplete svelte-rf2u5x"><textarea aria-label="Compose post content" aria-describedby="compose-character-count"></textarea> <!></div>'),Jt[m],[[292,0,[[293,1]]]]);function Jt(s,e){Re(new.target),Ue(e,!0,Jt);let a=ne(e,"rows",3,4),n=ne(e,"autofocus",3,!1),i=ne(e,"class",3,"");const r=na();let o,l=W(ke(!1),"showAutocomplete"),d=W(ke(null),"autocompleteMatch"),f=W(ke(ft([])),"suggestions"),y=W(ke(0),"selectedIndex"),E=W(ke(!1),"loading"),L=W(ke(ft({x:0,y:0})),"menuPosition");n()&&It(()=>{queueMicrotask(()=>o?.focus())});function M(){o&&(o.style.height="auto",o.style.height=`${o.scrollHeight}px`)}async function Q(){if(!o)return;const k=r.state.content,X=ko(o),T=yo(k,X);if(!T){I(l,!1),I(d,null);return}I(d,T,!0);const ve=o.getBoundingClientRect(),fe=D(o,X);if(I(L,{x:ve.left+fe.left,y:ve.top+fe.top+fe.height+window.scrollY},!0),e.searchHandler){I(E,!0);try{const U=(await pe(e.searchHandler(T.query,T.type)))();I(f,xo(U,T.query,10),!0),I(y,0),I(l,t(f).length>0)}catch(U){console.error(...Je("error","Failed to fetch suggestions:",U)),I(f,[],!0),I(l,!1)}finally{I(E,!1)}}}async function R(k){const X=k.target,T=br(X.value,{useUrlWeighting:!0,maxCharacters:r.config.characterLimit});r.updateState({content:X.value,characterCount:T.count,overLimit:T.count>r.config.characterLimit}),M(),(await pe(Q()))()}async function ce(k){if(t(l)){if(b(k.key,"ArrowDown")){k.preventDefault(),I(y,Math.min(t(y)+1,t(f).length-1),!0);return}if(b(k.key,"ArrowUp")){k.preventDefault(),I(y,Math.max(t(y)-1,0),!0);return}if(b(k.key,"Enter")||b(k.key,"Tab")){k.preventDefault(),t(f)[t(y)]&&$(t(f)[t(y)]);return}if(b(k.key,"Escape")){k.preventDefault(),I(l,!1);return}}if((k.metaKey||k.ctrlKey)&&b(k.key,"Enter")){k.preventDefault();const X=o.closest("form");X&&X.requestSubmit()}}function $(k){if(!t(d)||!o)return;const X=wo(r.state.content,t(d),k);r.updateState({content:X.text}),o.value=X.text,So(o,X.cursorPosition),I(l,!1),I(d,null),M()}function C(){I(l,!1),I(d,null)}function D(k,X){const T=document.createElement("div"),ve=getComputedStyle(k);["boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach(le=>{const te=ve[le];b(typeof te,"string")&&(T.style[le]=te)}),T.style.position="absolute",T.style.visibility="hidden",T.style.whiteSpace="pre-wrap",T.style.wordWrap="break-word",T.textContent=k.value.substring(0,X);const U=document.createElement("span");U.textContent=k.value.substring(X)||".",T.appendChild(U),document.body.appendChild(T);const x={left:U.offsetLeft,top:U.offsetTop,height:U.offsetHeight};return document.body.removeChild(T),x}var P={...Pe()},ee=To(),A=u(ee);ha(A),A.__input=R,A.__keydown=ce,St(A,k=>o=k,()=>o);var ie=p(A,2);{var V=k=>{h(()=>Ye(k,{get suggestions(){return t(f)},get selectedIndex(){return t(y)},get position(){return t(L)},get loading(){return t(E)},onSelect:$,onClose:C}),"component",Jt,307,2,{componentTag:"AutocompleteMenu"})};h(()=>z(ie,k=>{t(l)&&t(d)&&k(V)}),"if",Jt,306,1)}return c(ee),N(()=>{ze(A,1,`compose-editor ${i()}`,"svelte-rf2u5x"),G(A,"rows",a()),G(A,"placeholder",r.config.placeholder),Zt(A,r.state.content),A.disabled=r.state.submitting}),v(s,ee),Fe(P)}H(["input","keydown"]);const zo="greater-compose-draft",ia="default",Lo=10080*60*1e3;function Da(){try{const s="__localStorage_test__";return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch{return!1}}function Ra(s=ia){return`${zo}-${s}`}function Eo(s,e=ia){if(!Da())return console.warn("localStorage not available, cannot save draft"),!1;try{const a=Ra(e),n={...s,savedAt:Date.now()};return localStorage.setItem(a,JSON.stringify(n)),!0}catch(a){return console.error("Failed to save draft:",a),!1}}function Pa(s=ia){if(!Da())return null;try{const e=Ra(s),a=localStorage.getItem(e);if(!a)return null;const n=JSON.parse(a);return Date.now()-n.savedAt>Lo?(yr(s),null):n}catch(e){return console.error("Failed to load draft:",e),null}}function yr(s=ia){if(!Da())return!1;try{const e=Ra(s);return localStorage.removeItem(e),!0}catch(e){return console.error("Failed to delete draft:",e),!1}}function jo(s=ia){return Pa(s)!==null}function Io(s=ia){const e=Pa(s);return e?Date.now()-e.savedAt:null}function nr(s){const e=Math.floor(s/6e4),a=Math.floor(s/(3600*1e3)),n=Math.floor(s/(1440*60*1e3));return n>0?`${n} day${n!==1?"s":""} ago`:a>0?`${a} hour${a!==1?"s":""} ago`:e>0?`${e} minute${e!==1?"s":""} ago`:"just now"}jt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/DraftSaver.svelte";var Ao=g(_('<button type="button" class="draft-saver__load svelte-1md1jbi"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1md1jbi"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></svg> </button>'),jt[m],[[184,3,[[185,4,[[186,5]]]]]]),Oo=g(_('<div class="draft-saver__indicator svelte-1md1jbi"><svg viewBox="0 0 24 24" fill="currentColor" class="draft-saver__icon svelte-1md1jbi"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></svg> <span class="draft-saver__text svelte-1md1jbi"> </span></div>'),jt[m],[[195,3,[[196,4,[[197,5]]],[201,4]]]]),qo=g(_("<div><!> <!></div>"),jt[m],[[182,1]]);function jt(s,e){Re(new.target),Ue(e,!0,jt);let a=ne(e,"draftKey",3,"default"),n=ne(e,"autoSave",3,!0),i=ne(e,"intervalSeconds",3,30),r=ne(e,"showIndicator",3,!0),o=ne(e,"class",3,"");const l=na();let d=W(ke(null),"lastSaved"),f=W(ke(!1),"hasSavedDraft"),y=W(ke(null),"draftAge");const E=["public","unlisted","private","direct"];function L(P){return P&&E.includes(P)?P:"public"}function M(){const P={content:l.state.content,contentWarning:l.state.contentWarning,visibility:l.state.visibility,savedAt:Date.now(),inReplyTo:l.state.inReplyTo,mediaIds:l.state.mediaAttachments.map(A=>A.id).filter(Boolean),metadata:{sensitive:l.state.contentWarningEnabled}},ee=Eo(P,a());return ee&&(I(d,Date.now(),!0),I(f,!0)),ee}function Q(){const P=Pa(a());return P?(l.updateState({content:P.content||"",contentWarning:P.contentWarning||"",visibility:L(P.visibility),inReplyTo:P.inReplyTo,contentWarningEnabled:P.metadata?.sensitive??!1}),!0):!1}function R(){yr(a()),I(f,!1),I(d,null)}rt(()=>{if(!n())return;const P=setInterval(()=>{l.state.content.trim().length>0&&M()},i()*1e3);return()=>clearInterval(P)}),rt(()=>{if(jo(a())){I(f,!0);const P=Io(a());P&&I(y,P,!0)}}),rt(()=>{if(!t(f)||!t(d))return;const P=setInterval(()=>{I(y,Date.now()-t(d))},1e3);return()=>clearInterval(P)}),rt(()=>{l.state.submitting&&R()});var ce={...Pe()},$=Le(),C=_e($);{var D=P=>{var ee=qo(),A=u(ee);{var ie=X=>{var T=Ao();T.__click=()=>Q();var ve=p(u(T));c(T),N(fe=>se(ve,` Load draft from ${fe??""}`),[()=>t(y)?nr(t(y)):"earlier"]),v(X,T)};h(()=>z(A,X=>{t(f)&&!l.state.content&&X(ie)}),"if",jt,183,2)}var V=p(A,2);{var k=X=>{var T=Oo(),ve=p(u(T),2),fe=u(ve);c(ve),c(T),N(U=>se(fe,`Draft saved ${U??""}`),[()=>nr(Date.now()-t(d))]),v(X,T)};h(()=>z(V,X=>{t(d)&&l.state.content&&X(k)}),"if",jt,194,2)}c(ee),N(()=>ze(ee,1,`draft-saver ${o()}`,"svelte-1md1jbi")),v(P,ee)};h(()=>z(C,P=>{r()&&P(D)}),"if",jt,181,0)}return v(s,$),Fe(ce)}H(["click"]);kt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/ThreadComposer.svelte";var Do=g(_('<div class="thread-composer__error svelte-18qqf34" role="alert"> </div>'),kt[m],[[325,2]]),Ro=g(_(`<div draggable="true" role="listitem"><div class="thread-post__header svelte-18qqf34"><div class="thread-post__number svelte-18qqf34"> </div> <div class="thread-post__controls svelte-18qqf34"><button type="button" class="thread-post__control svelte-18qqf34" title="Move up" aria-label="Move post up">‚Üë</button> <button type="button" class="thread-post__control svelte-18qqf34" title="Move down" aria-label="Move post down">‚Üì</button> <button type="button" class="thread-post__control thread-post__control--remove svelte-18qqf34" title="Remove post" aria-label="Remove post">√ó</button></div></div> <textarea placeholder="What's on your mind?" rows="4"></textarea> <div class="thread-post__footer svelte-18qqf34"><div> </div></div></div>`),kt[m],[[332,3,[[342,4,[[343,5],[345,5,[[346,6],[356,6],[366,6]]]]],[379,4],[389,4,[[390,5]]]]]]),Po=g(_('<span class="thread-composer__spinner svelte-18qqf34"></span> Posting thread...',1),kt[m],[[434,5]]),Uo=g(_('<div><div class="thread-composer__header svelte-18qqf34"><h3 class="thread-composer__title svelte-18qqf34">Compose Thread <span class="thread-composer__count svelte-18qqf34"> </span></h3></div> <!> <div class="thread-composer__posts svelte-18qqf34" role="list" aria-label="Thread posts"></div> <div class="thread-composer__actions svelte-18qqf34"><button type="button" class="thread-composer__add-post svelte-18qqf34"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-18qqf34"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> Add post to thread</button> <div class="thread-composer__submit-group svelte-18qqf34"><button type="button" class="thread-composer__cancel svelte-18qqf34">Cancel</button> <button type="button" class="thread-composer__submit svelte-18qqf34"><!></button></div></div></div>'),kt[m],[[316,0,[[317,1,[[318,2,[[320,3]]]]],[330,1],[401,1,[[402,2,[[409,3,[[410,4]]]]],[415,2,[[416,3],[426,3]]]]]]]]);function kt(s,e){Re(new.target),Ue(e,!0,kt);let a=ne(e,"characterLimit",3,500),n=ne(e,"maxPosts",3,10),i=ne(e,"defaultVisibility",3,"public"),r=ne(e,"class",3,""),o=W(ke(ft([{id:crypto.randomUUID(),content:"",characterCount:0,overLimit:!1}])),"posts"),l=qa(ft(i()),"visibility"),d=W(ke(!1),"submitting"),f=W(ke(null),"error"),y=W(ke(null),"draggedPostId");function E(S){return S instanceof Error?S.message:b(typeof S,"string")?S:"Failed to submit thread"}const L=Vt(),M=Vt(),Q=Vt();function R(S){const B=br(S.content,{useUrlWeighting:!0,maxCharacters:a()});S.characterCount=B.count,S.overLimit=B.count>a()}function ce(S,B){const F=t(o).find(J=>b(J.id,S));F&&(F.content=B,R(F))}function $(){if(t(o).length>=n()){I(f,`Maximum ${n()} posts per thread`);return}t(o).push({id:crypto.randomUUID(),content:"",characterCount:0,overLimit:!1}),setTimeout(()=>{const S=document.querySelectorAll(".thread-post__textarea");S[S.length-1]?.focus()},0)}function C(S){if(b(t(o).length,1)){I(f,"Thread must have at least one post");return}I(o,t(o).filter(B=>b(B.id,S,!1)),!0)}function D(S){const B=t(o).findIndex(F=>b(F.id,S));B>0&&(F=>{var J=Qa(F,2);t(o)[B]=J[0],t(o)[B-1]=J[1]})([t(o)[B-1],t(o)[B]])}function P(S){const B=t(o).findIndex(F=>b(F.id,S));B<t(o).length-1&&(F=>{var J=Qa(F,2);t(o)[B]=J[0],t(o)[B+1]=J[1]})([t(o)[B+1],t(o)[B]])}function ee(S){I(y,S,!0)}function A(S,B){if(S.preventDefault(),!t(y)||b(t(y),B))return;const F=t(o).findIndex(de=>b(de.id,t(y))),J=t(o).findIndex(de=>b(de.id,B));if(b(F,-1,!1)&&b(J,-1,!1)){const de=[...t(o)],[Me]=de.splice(F,1);de.splice(J,0,Me),I(o,de,!0)}}function ie(){I(y,null)}function V(){const S=t(o).filter(F=>!F.content.trim());return b(S.length,t(o).length)?"Thread cannot be empty":t(o).filter(F=>F.overLimit).length>0?`Post ${t(o).findIndex(F=>F.overLimit)+1} exceeds character limit`:null}async function k(){I(f,null);const S=V();if(S){I(f,S,!0);return}if(!e.onSubmitThread){I(f,"No submit handler provided");return}I(d,!0);try{const B=t(o).filter(F=>F.content.trim().length>0).map(F=>({content:F.content,contentWarning:F.contentWarning,visibility:l}));(await pe(e.onSubmitThread(B)))(),I(o,[{id:crypto.randomUUID(),content:"",characterCount:0,overLimit:!1}],!0)}catch(B){I(f,E(B),!0)}finally{I(d,!1)}}function X(){e.onCancel?e.onCancel():(I(o,[{id:crypto.randomUUID(),content:"",characterCount:0,overLimit:!1}],!0),I(f,null))}const T=W(me(()=>t(o).some(S=>S.content.trim().length>0)&&!t(o).some(S=>S.overLimit)&&!t(d)),"canSubmit");var ve={...Pe()},fe=Uo(),U=u(fe),x=u(U),le=p(u(x)),te=u(le);c(le),c(x),c(U);var Ce=p(U,2);{var qe=S=>{var B=Do(),F=u(B,!0);c(B),N(()=>se(F,t(f))),v(S,B)};h(()=>z(Ce,S=>{t(f)&&S(qe)}),"if",kt,324,1)}var ae=p(Ce,2);At(()=>t(o),S=>S.id),h(()=>lt(ae,23,()=>t(o),S=>S.id,(S,B,F)=>{var J=Ro();let de;var Me=u(J),Ne=u(Me),je=u(Ne,!0);c(Ne);var we=p(Ne,2),Qe=u(we);Qe.__click=()=>D(t(B).id);var et=p(Qe,2);et.__click=()=>P(t(B).id);var nt=p(et,2);nt.__click=()=>C(t(B).id),c(we),c(Me);var Ge=p(Me,2);ha(Ge);let Ze;Ge.__input=qt=>ce(t(B).id,qt.currentTarget.value);var ct=p(Ge,2),Ct=u(ct);let Mt;var Tt=u(Ct);c(Ct),c(ct),c(J),N(()=>{de=ze(J,1,"thread-post svelte-18qqf34",null,de,{"thread-post--dragging":b(t(y),t(B).id)}),G(J,"aria-grabbed",b(t(y),t(B).id)),se(je,t(F)+1),Qe.disabled=b(t(F),0),et.disabled=b(t(F),t(o).length-1),nt.disabled=b(t(o).length,1),Ze=ze(Ge,1,"thread-post__textarea svelte-18qqf34",null,Ze,{"thread-post__textarea--over-limit":t(B).overLimit}),Zt(Ge,t(B).content),Ge.disabled=t(d),Mt=ze(Ct,1,"thread-post__char-count svelte-18qqf34",null,Mt,{"thread-post__char-count--near-limit":t(B).characterCount/a()>=.8,"thread-post__char-count--over-limit":t(B).overLimit}),se(Tt,`${t(B).characterCount??""} / ${a()??""}`)}),Ve("dragstart",J,()=>ee(t(B).id)),Ve("dragover",J,qt=>A(qt,t(B).id)),Ve("dragend",J,ie),v(S,J)}),"each",kt,331,2),c(ae);var q=p(ae,2),re=u(q);re.__click=$,Wt(re,S=>L.actions.button?.(S));var j=p(re,2),K=u(j);K.__click=X,Wt(K,S=>Q.actions.button?.(S));var oe=p(K,2);oe.__click=k;var ue=u(oe);{var ge=S=>{var B=Po();_t(),v(S,B)},Z=S=>{var B=Yt();N(F=>se(B,`Post thread (${F??""})`),[()=>t(o).filter(F=>F.content.trim()).length]),v(S,B)};h(()=>z(ue,S=>{t(d)?S(ge):S(Z,!1)}),"if",kt,433,4)}return c(oe),Wt(oe,S=>M.actions.button?.(S)),c(j),c(q),c(fe),N(()=>{ze(fe,1,`thread-composer ${r()}`,"svelte-18qqf34"),se(te,`${t(o).length??""} / ${n()??""} posts`),re.disabled=t(o).length>=n()||t(d),K.disabled=t(d),oe.disabled=!t(T)}),v(s,fe),Fe(ve)}H(["click","input"]);Ie[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/MediaUpload.svelte";var Fo=g(_('<div class="media-upload__error svelte-mzn3xv" role="alert"> </div>'),Ie[m],[[346,2]]),Bo=g(_('<strong class="svelte-mzn3xv">Drop files here</strong>'),Ie[m],[[368,5]]),No=g(_('<strong class="svelte-mzn3xv">Click or drag files to upload</strong> <span class="svelte-mzn3xv">Images, videos, or audio</span>',1),Ie[m],[[370,5],[371,5]]),Wo=g(_('<div role="button" tabindex="0"><svg class="media-upload__icon svelte-mzn3xv" viewBox="0 0 24 24" fill="currentColor"><path d="M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"></path></svg> <div class="media-upload__text svelte-mzn3xv"><!></div></div>'),Ie[m],[[352,2,[[363,3,[[364,4]]],[366,3]]]]),Vo=g(_('<img class="media-upload__preview-image svelte-mzn3xv"/>'),Ie[m],[[385,7]]),Ho=g(_('<video class="media-upload__preview-video svelte-mzn3xv" loop></video>',2),Ie[m],[[391,7]]),Go=g(_('<div class="media-upload__preview-audio svelte-mzn3xv"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-mzn3xv"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg> <span class="svelte-mzn3xv"> </span></div>'),Ie[m],[[398,7,[[399,8,[[400,9]]],[402,8]]]]),Qo=g(_('<p class="media-upload__overlay-text svelte-mzn3xv"> </p>'),Ie[m],[[411,9]]),Ko=g(_('<div class="media-upload__overlay media-upload__overlay--sensitive svelte-mzn3xv"><span class="media-upload__overlay-label svelte-mzn3xv">Sensitive media</span> <!> <button type="button" class="media-upload__reveal svelte-mzn3xv">Reveal media</button></div>'),Ie[m],[[408,7,[[409,8],[413,8]]]]),Yo=g(_('<div class="media-upload__badge svelte-mzn3xv">Sensitive</div>'),Ie[m],[[422,7]]),Xo=g(_('<div class="media-upload__overlay svelte-mzn3xv"><div class="media-upload__progress svelte-mzn3xv"><svg class="media-upload__progress-ring svelte-mzn3xv" viewBox="0 0 36 36"><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="white" stroke-width="3"></path></svg> <span class="media-upload__progress-text svelte-mzn3xv"> </span></div></div>'),Ie[m],[[427,7,[[428,8,[[429,9,[[430,10]]],[438,9]]]]]]),Jo=g(_('<div class="media-upload__overlay media-upload__overlay--error svelte-mzn3xv"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-mzn3xv"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg> <span class="svelte-mzn3xv"> </span></div>'),Ie[m],[[444,7,[[445,8,[[446,9]]],[448,8]]]]),Zo=g(_("<option> </option>"),Ie[m],[[523,8]]),$o=g(_('<div class="media-upload__item svelte-mzn3xv"><div><!> <!> <!> <!> <button type="button" class="media-upload__remove svelte-mzn3xv" aria-label="Remove file">√ó</button></div> <div class="media-upload__info svelte-mzn3xv"><div class="media-upload__filename svelte-mzn3xv"> </div> <div class="media-upload__filesize svelte-mzn3xv"> </div></div> <div class="media-upload__meta svelte-mzn3xv"><label class="media-upload__field media-upload__field--toggle svelte-mzn3xv"><input type="checkbox"/> <span class="svelte-mzn3xv">Sensitive content</span></label> <label class="media-upload__field svelte-mzn3xv"><span class="media-upload__field-label svelte-mzn3xv">Spoiler text <span class="media-upload__counter svelte-mzn3xv"> </span></span> <input type="text" placeholder="Optional warning shown before media" class="svelte-mzn3xv"/></label> <label class="media-upload__field svelte-mzn3xv"><span class="media-upload__field-label svelte-mzn3xv">Description <span class="media-upload__counter svelte-mzn3xv"> </span></span> <textarea rows="3" placeholder="Describe the media for accessibility" class="svelte-mzn3xv"></textarea></label> <label class="media-upload__field svelte-mzn3xv"><span class="media-upload__field-label svelte-mzn3xv">Media type</span> <select class="svelte-mzn3xv"></select></label></div></div>'),Ie[m],[[379,4,[[380,5,[[452,6]]],[462,4,[[463,5],[464,5]]],[467,4,[[468,5,[[469,6],[476,6]]],[479,5,[[480,6,[[482,7]]],[484,6]]],[495,5,[[496,6,[[498,7]]],[502,5]]],[512,5,[[513,6],[514,6]]]]]]]]),el=g(_('<button type="button" class="media-upload__add-more svelte-mzn3xv"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-mzn3xv"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> <span class="svelte-mzn3xv">Add more</span></button>'),Ie[m],[[534,4,[[540,5,[[541,6]]],[543,5]]]]),tl=g(_('<div class="media-upload__grid svelte-mzn3xv"><!> <!></div>'),Ie[m],[[376,2]]),al=g(_('<div><input type="file" accept="image/*,video/*,audio/*" multiple style="display: none;"/> <!> <!></div>'),Ie[m],[[335,0,[[336,1]]]]);function Ie(s,e){Re(new.target),Ue(e,!0,Ie);const a=200,n=1500,i=[{value:"IMAGE",label:"Image"},{value:"VIDEO",label:"Video"},{value:"AUDIO",label:"Audio"},{value:"GIFV",label:"Animated GIF"},{value:"DOCUMENT",label:"Document"}];let r=ne(e,"maxFiles",3,4),o=ne(e,"config",19,()=>({})),l=ne(e,"class",3,""),d=W(ke(ft([])),"files"),f=W(ke(!1),"isDragging"),y=W(ke(null),"error"),E,L=W(ke(ft({})),"sensitiveVisibility");const M=Vt();function Q(j){return j instanceof Error?j.message:b(typeof j,"string")?j:"Upload failed"}async function R(j){if(!j||b(j.length,0))return;I(y,null);const K=Array.from(j);if(t(d).length+K.length>r()){I(y,`Maximum ${r()} files allowed`);return}const oe=pr(K,{...o(),maxFiles:r()});if(!oe.valid){I(y,oe.errors[0],!0);return}const ue=(await pe(Ys(K,o())))();if(I(d,[...t(d),...ue],!0),e.onUpload)for(const ge of ue)ce(ge)}async function ce(j){if(e.onUpload){j.status="uploading";try{const K=ue=>{j.progress=ue},oe=(await pe(e.onUpload(j.file,K,j)))();oe.thumbnailUrl&&(j.thumbnailUrl=oe.thumbnailUrl),j.sensitive=oe.sensitive??j.sensitive,b(oe.spoilerText,void 0,!1)&&(j.spoilerText=oe.spoilerText??""),oe.mediaCategory&&(j.mediaCategory=oe.mediaCategory),j.serverId=oe.id,j.status="complete",j.progress=100}catch(K){j.status="error",j.error=Q(K)}}}function $(j){const K=t(d).find(oe=>b(oe.id,j));K&&(K.previewUrl&&K.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(K.previewUrl),e.onRemove&&K.serverId&&e.onRemove(K.serverId)),I(d,t(d).filter(oe=>b(oe.id,j,!1)),!0)}function C(j,K){I(d,t(d).map(oe=>b(oe.id,j)?K(oe):oe),!0)}function D(j,K){if(C(j,oe=>({...oe,sensitive:K})),K)I(L,{...t(L),[j]:!1},!0);else{const oe={...t(L)};delete oe[j],I(L,oe,!0)}}function P(j,K){const oe=K.slice(0,a);C(j,ue=>({...ue,spoilerText:oe}))}function ee(j,K){const oe=K.slice(0,n);C(j,ue=>({...ue,description:oe}))}function A(j,K){C(j,oe=>({...oe,mediaCategory:K}))}function ie(j){const K=b(t(L)[j],!0);I(L,{...t(L),[j]:!K},!0)}function V(j){switch(j.mediaCategory){case"IMAGE":return"image";case"VIDEO":case"GIFV":return"video";case"AUDIO":return"audio";default:return"file"}}function k(j){j.preventDefault(),I(f,!0)}function X(j){j.preventDefault();const K=j.currentTarget.getBoundingClientRect(),oe=j.clientX,ue=j.clientY;(oe<K.left||oe>=K.right||ue<K.top||ue>=K.bottom)&&I(f,!1)}function T(j){j.preventDefault(),I(f,!1);const K=j.dataTransfer?.files;R(K||null)}function ve(j){const K=j.target;R(K.files),K.value=""}function fe(){E?.click()}rt(()=>()=>{Js(t(d))});const U=W(me(()=>t(d).length<r()),"canAddMore");var x={...Pe()},le=al(),te=u(le);te.__change=ve,St(te,j=>E=j,()=>E);var Ce=p(te,2);{var qe=j=>{var K=Fo(),oe=u(K,!0);c(K),N(()=>se(oe,t(y))),v(j,K)};h(()=>z(Ce,j=>{t(y)&&j(qe)}),"if",Ie,345,1)}var ae=p(Ce,2);{var q=j=>{var K=Wo();let oe;K.__click=fe,K.__keydown=B=>b(B.key,"Enter")&&fe();var ue=p(u(K),2),ge=u(ue);{var Z=B=>{var F=Bo();v(B,F)},S=B=>{var F=No();_t(2),v(B,F)};h(()=>z(ge,B=>{t(f)?B(Z):B(S,!1)}),"if",Ie,367,4)}c(ue),c(K),N(()=>oe=ze(K,1,"media-upload__drop-zone svelte-mzn3xv",null,oe,{"media-upload__drop-zone--dragging":t(f)})),Ve("dragover",K,k),Ve("dragleave",K,X),Ve("drop",K,T),v(j,K)},re=j=>{var K=tl(),oe=u(K);At(()=>t(d),Z=>Z.id),h(()=>lt(oe,17,()=>t(d),Z=>Z.id,(Z,S)=>{const B=W(me(()=>V(t(S))),"previewType");t(B);var F=$o(),J=u(F);let de;var Me=u(J);{var Ne=w=>{var O=Vo();N(()=>{G(O,"src",t(S).previewUrl),G(O,"alt",t(S).description||t(S).file.name)}),v(w,O)},je=w=>{var O=Le(),Y=_e(O);{var De=Ee=>{var Be=Ho();Be.muted=!0,N(()=>G(Be,"src",t(S).previewUrl)),v(Ee,Be)},We=Ee=>{var Be=Le(),Xe=_e(Be);{var He=Ke=>{var dt=Go(),$e=p(u(dt),2),it=u($e,!0);c($e),c(dt),N(()=>se(it,t(S).file.name)),v(Ke,dt)};h(()=>z(Xe,Ke=>{b(t(B),"audio")&&Ke(He)},!0),"if",Ie,397,6)}v(Ee,Be)};h(()=>z(Y,Ee=>{b(t(B),"video")&&t(S).previewUrl?Ee(De):Ee(We,!1)},!0),"if",Ie,390,6)}v(w,O)};h(()=>z(Me,w=>{b(t(B),"image")&&t(S).previewUrl?w(Ne):w(je,!1)}),"if",Ie,384,6)}var we=p(Me,2);{var Qe=w=>{var O=Le(),Y=_e(O);{var De=Ee=>{var Be=Ko(),Xe=p(u(Be),2);{var He=dt=>{var $e=Qo(),it=u($e,!0);c($e),N(()=>se(it,t(S).spoilerText)),v(dt,$e)};h(()=>z(Xe,dt=>{t(S).spoilerText&&dt(He)}),"if",Ie,410,8)}var Ke=p(Xe,2);Ke.__click=()=>ie(t(S).id),c(Be),v(Ee,Be)},We=Ee=>{var Be=Yo();v(Ee,Be)};h(()=>z(Y,Ee=>{b(t(L)[t(S).id],!0,!1)?Ee(De):Ee(We,!1)}),"if",Ie,407,6)}v(w,O)};h(()=>z(we,w=>{t(S).sensitive&&b(t(S).status,"uploading",!1)&&b(t(S).status,"error",!1)&&w(Qe)}),"if",Ie,406,5)}var et=p(we,2);{var nt=w=>{var O=Xo(),Y=u(O),De=u(Y),We=u(De);c(De);var Ee=p(De,2),Be=u(Ee);c(Ee),c(Y),c(O),N(Xe=>{G(We,"stroke-dasharray",`${t(S).progress}, 100`),se(Be,`${Xe??""}%`)},[()=>Math.round(t(S).progress)]),v(w,O)};h(()=>z(et,w=>{b(t(S).status,"uploading")&&w(nt)}),"if",Ie,426,6)}var Ge=p(et,2);{var Ze=w=>{var O=Jo(),Y=p(u(O),2),De=u(Y,!0);c(Y),c(O),N(()=>se(De,t(S).error)),v(w,O)};h(()=>z(Ge,w=>{b(t(S).status,"error")&&w(Ze)}),"if",Ie,443,6)}var ct=p(Ge,2);ct.__click=()=>$(t(S).id),c(J);var Ct=p(J,2),Mt=u(Ct),Tt=u(Mt,!0);c(Mt);var qt=p(Mt,2),Ma=u(qt,!0);c(qt),c(Ct);var Ht=p(Ct,2),mt=u(Ht),sa=u(mt);Xa(sa),sa.__change=w=>D(t(S).id,w.target.checked),_t(2),c(mt);var oa=p(mt,2),la=u(oa),ga=p(u(la)),zt=u(ga);c(ga),c(la);var Ut=p(la,2);Xa(Ut),G(Ut,"maxlength",a),Ut.__input=w=>P(t(S).id,w.target.value),c(oa);var ca=p(oa,2),da=u(ca),yt=p(u(da)),Ta=u(yt);c(yt),c(da);var Ft=p(da,2);ha(Ft),G(Ft,"maxlength",n),Ft.__input=w=>ee(t(S).id,w.target.value),c(ca);var pa=p(ca,2),ua=p(u(pa),2);ua.__change=w=>A(t(S).id,w.target.value),At(()=>i,w=>w.value),h(()=>lt(ua,21,()=>i,w=>w.value,(w,O)=>{var Y=Zo(),De=u(Y,!0);c(Y);var We={};N(()=>{rn(Y,b(t(O).value,t(S).mediaCategory)),se(De,t(O).label),We!==(We=t(O).value)&&(Y.value=(Y.__value=t(O).value)??"")}),v(w,Y)}),"each",Ie,522,7),c(ua),c(pa),c(Ht),c(F),N(w=>{de=ze(J,1,"media-upload__preview svelte-mzn3xv",null,de,{"media-upload__preview--blurred":t(S).sensitive&&b(t(L)[t(S).id],!0,!1)}),se(Tt,t(S).file.name),se(Ma,w),nn(sa,t(S).sensitive),se(zt,`${t(S).spoilerText.length??""}/200`),Zt(Ut,t(S).spoilerText),se(Ta,`${(t(S).description||"").length??""}/1500`),Zt(Ft,t(S).description??"")},[()=>Aa(t(S).metadata?.size||0)]),v(Z,F)}),"each",Ie,377,3);var ue=p(oe,2);{var ge=Z=>{var S=el();S.__click=fe,Wt(S,B=>M.actions.button?.(B)),v(Z,S)};h(()=>z(ue,Z=>{t(U)&&Z(ge)}),"if",Ie,533,3)}c(K),v(j,K)};h(()=>z(ae,j=>{b(t(d).length,0)?j(q):j(re,!1)}),"if",Ie,351,1)}return c(le),N(()=>ze(le,1,`media-upload ${l()}`,"svelte-mzn3xv")),v(s,le),Fe(x)}H(["change","click","keydown","input"]);Pt[m]="node_modules/.pnpm/@equaltoai+greater-components-fediverse@file+..+greater-components+packages+fediverse_graphql@16.12.0_svelte@5.43.6/node_modules/@equaltoai/greater-components-fediverse/src/components/Compose/ImageEditor.svelte";var rl=g(_('<div class="image-editor__focal-point svelte-1650mjm" role="presentation"><div class="image-editor__focal-point-inner svelte-1650mjm"></div></div> <div class="image-editor__focal-instructions svelte-1650mjm">Click or drag to set focal point</div>',1),Pt[m],[[236,4,[[241,5]]],[244,4]]),nl=g(_('<div class="image-editor__focal-controls svelte-1650mjm"><button type="button" class="image-editor__reset-button svelte-1650mjm">Reset to center</button> <span class="image-editor__focal-coords svelte-1650mjm"> </span></div>'),Pt[m],[[249,3,[[250,4],[253,4]]]]),il=g(_('<div><div class="image-editor__preview svelte-1650mjm"><div role="button" tabindex="0" aria-label="Click to set focal point"><img class="image-editor__image svelte-1650mjm"/> <!></div> <!></div> <div class="image-editor__form svelte-1650mjm"><div class="image-editor__field svelte-1650mjm"><label for="alt-text" class="image-editor__label svelte-1650mjm">Alt text (for accessibility) <span class="image-editor__required svelte-1650mjm">Required</span></label> <textarea id="alt-text" placeholder="Describe this image for people using screen readers..." rows="4"></textarea> <div> </div></div> <div class="image-editor__actions svelte-1650mjm"><button type="button" class="image-editor__cancel svelte-1650mjm">Cancel</button> <button type="button" class="image-editor__save svelte-1650mjm">Save</button></div></div></div>'),Pt[m],[[217,0,[[218,1,[[219,2,[[228,3]]]]],[260,1,[[261,2,[[262,3,[[264,4]]],[266,3],[276,3]]],[284,2,[[285,3],[294,3]]]]]]]]);function Pt(s,e){Re(new.target),Ue(e,!0,Pt);let a=ne(e,"image",15),n=ne(e,"maxAltTextLength",3,1500),i=ne(e,"showFocalPoint",3,!0),r=ne(e,"class",3,""),o=W(ke(ft(a().description||"")),"description"),l=W(ke(ft(a().focalPoint||{x:0,y:0})),"focalPoint"),d,f,y=W(ke(!1),"isDraggingFocal");const E=Vt(),L=Vt();function M(Z){const S=Z.target;I(o,S.value,!0)}function Q(Z){i()&&(Z.preventDefault(),I(y,!0),$(Z))}function R(Z){t(y)&&(Z.preventDefault(),$(Z))}function ce(){I(y,!1)}function $(Z){if(!f)return;const S=f.getBoundingClientRect(),B=Z.clientX-S.left,F=Z.clientY-S.top,J=B/S.width*2-1,de=F/S.height*2-1;I(l,{x:Math.max(-1,Math.min(1,J)),y:Math.max(-1,Math.min(1,de))},!0)}function C(){I(l,{x:0,y:0},!0)}function D(){const Z={...a(),description:t(o).trim(),focalPoint:i()?t(l):void 0};e.onSave?e.onSave(Z):a(Z)}function P(){e.onCancel?e.onCancel():(I(o,a().description||"",!0),I(l,a().focalPoint||{x:0,y:0},!0))}rt(()=>{if(i())return document.addEventListener("mousemove",R),document.addEventListener("mouseup",ce),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",ce)}});const ee=W(me(()=>({x:(t(l).x+1)/2*100,y:(t(l).y+1)/2*100})),"focalPositionPercent"),A=W(me(()=>n()-t(o).length),"remainingChars"),ie=W(me(()=>t(o).length>n()),"isDescriptionOverLimit");var V={...Pe()},k=il(),X=u(k),T=u(X);let ve;T.__mousedown=Q;var fe=u(T);St(fe,Z=>d=Z,()=>d);var U=p(fe,2);{var x=Z=>{var S=rl(),B=_e(S);_t(2),N(()=>vt(B,`left: ${t(ee).x}%; top: ${t(ee).y}%;`)),v(Z,S)};h(()=>z(U,Z=>{i()&&Z(x)}),"if",Pt,235,3)}c(T),St(T,Z=>f=Z,()=>f);var le=p(T,2);{var te=Z=>{var S=nl(),B=u(S);B.__click=C;var F=p(B,2),J=u(F);c(F),c(S),N((de,Me)=>se(J,`x: ${de??""}, y: ${Me??""}`),[()=>t(l).x.toFixed(2),()=>t(l).y.toFixed(2)]),v(Z,S)};h(()=>z(le,Z=>{i()&&Z(te)}),"if",Pt,248,2)}c(X);var Ce=p(X,2),qe=u(Ce),ae=p(u(qe),2);ha(ae);let q;ae.__input=M;var re=p(ae,2);let j;var K=u(re);c(re),c(qe);var oe=p(qe,2),ue=u(oe);ue.__click=P,Wt(ue,Z=>L.actions.button?.(Z));var ge=p(ue,2);return ge.__click=D,Wt(ge,Z=>E.actions.button?.(Z)),c(oe),c(Ce),c(k),N(Z=>{ze(k,1,`image-editor ${r()}`,"svelte-1650mjm"),ve=ze(T,1,"image-editor__image-container svelte-1650mjm",null,ve,{"image-editor__image-container--dragging":t(y)}),G(fe,"src",a().url),G(fe,"alt",t(o)||"Image preview"),q=ze(ae,1,"image-editor__textarea svelte-1650mjm",null,q,{"image-editor__textarea--error":t(ie)}),Zt(ae,t(o)),G(ae,"maxlength",n()),j=ze(re,1,"image-editor__char-count svelte-1650mjm",null,j,{"image-editor__char-count--over":t(ie)}),se(K,`${t(A)??""} characters remaining`),ge.disabled=Z},[()=>t(ie)||!t(o).trim()]),v(s,k),Fe(V)}H(["mousedown","click","input"]);const va={Root:wt,Editor:Ca,EditorWithAutocomplete:Jt,AutocompleteMenu:Ye,Submit:ta,CharacterCount:Rt,VisibilitySelect:aa,DraftSaver:jt,ThreadComposer:kt,MediaUpload:Ie,ImageEditor:Pt};H(["click"]);H(["click"]);H(["click","keydown"]);H(["click"]);H(["click"]);H(["click"]);H(["click","keydown"]);H(["click","keydown"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);H(["click"]);Lt[m]="src/lib/components/islands/svelte/ComposeBoxGC.svelte";var sl=g(_("<!> <!> <!> <!>",1),Lt[m],[]);function Lt(s,e){Re(new.target),Ue(e,!0,Lt);const a={onSubmit:async o=>{try{const l=(await pe(st()))(),f={public:"PUBLIC",unlisted:"UNLISTED",private:"FOLLOWERS",direct:"DIRECT"}[o.visibility||"public"]||"PUBLIC",y=(await pe(l.createNote({content:o.content,visibility:f,sensitive:o.sensitive||!1,summary:o.spoilerText||void 0,inReplyToId:e.replyTo||o.inReplyToId||void 0})))();console.log(...Je("log","[ComposeBoxGC] Post created via GraphQL:",y)),e.onPostSuccess?.(),b(typeof window,"undefined",!1)&&window.location.reload()}catch(l){throw console.error(...Je("error","[ComposeBoxGC] Post failed:",l)),l}}};var n={...Pe()},i=Le(),r=_e(i);return h(()=>Qt(r,()=>va.Root,(o,l)=>{l(o,{get handlers(){return a},children:Ot(Lt,(d,f)=>{var y=sl(),E=_e(y);{let R=me(()=>e.initialText||"What's on your mind?");h(()=>Qt(E,()=>va.Editor,(ce,$)=>{$(ce,{autofocus:!0,get placeholder(){return t(R)}})}),"component",Lt,69,2,{componentTag:"Compose.Editor"})}var L=p(E,2);h(()=>Qt(L,()=>va.CharacterCount,(R,ce)=>{ce(R,{})}),"component",Lt,70,2,{componentTag:"Compose.CharacterCount"});var M=p(L,2);h(()=>Qt(M,()=>va.VisibilitySelect,(R,ce)=>{ce(R,{})}),"component",Lt,71,2,{componentTag:"Compose.VisibilitySelect"});var Q=p(M,2);h(()=>Qt(Q,()=>va.Submit,(R,ce)=>{ce(R,{})}),"component",Lt,72,2,{componentTag:"Compose.Submit"}),v(d,y)}),$$slots:{default:!0}})}),"component",Lt,68,0,{componentTag:"Compose.Root"}),v(s,i),Fe(n)}export{Lt as C,Nt as T,be as a};
