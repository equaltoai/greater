import{f as n,a as t,c as z,s as L}from"../chunks/Dk8Y7fR_.js";import{o as M}from"../chunks/Ci0fFNKZ.js";import{p as P,d as T,e as A,f as c,g as u,$ as F,b as v,h,r as m,n as g,i as _,s as G,t as I}from"../chunks/Bpv4puWN.js";import{i as w}from"../chunks/_LYS6rzG.js";import{h as U,a as Y}from"../chunks/C2zQ9FVj.js";import{g as j}from"../chunks/2Ka50tg8.js";var q=n('<div class="spinner svelte-3cfahf"></div> <h1 class="svelte-3cfahf">Completing sign in...</h1> <p class="svelte-3cfahf">Please wait while we finalize your authentication</p>',1),B=n(`<div class="success-icon svelte-3cfahf">✓</div> <h1 class="svelte-3cfahf">Success!</h1> <p class="svelte-3cfahf">You're now signed in. Redirecting to your timeline...</p>`,1),D=n('<div class="error-icon svelte-3cfahf">✕</div> <h1 class="svelte-3cfahf">Sign in failed</h1> <p class="svelte-3cfahf"> </p> <a href="/auth/login" class="retry-button svelte-3cfahf">Try again</a>',1),H=n('<div class="callback-page svelte-3cfahf"><div class="callback-container svelte-3cfahf"><!></div></div>');function W(b,y){P(y,!0);let r=u("processing"),l=u("Completing sign in...");M(async()=>{try{const e=new URLSearchParams(window.location.search),a=e.get("code"),o=e.get("state");if(!a||!o)throw new Error("Missing authorization code or state");await Y.completeLogin(a,o),c(r,"success"),c(l,"Sign in successful! Redirecting..."),setTimeout(()=>{j("/")},1500)}catch(e){c(r,"error"),c(l,e instanceof Error?e.message:"Failed to complete sign in",!0),console.error("[Auth Callback] Error:",e)}});var f=H();U("3cfahf",e=>{A(()=>{F.title="Completing Sign In - Greater"})});var p=v(f),S=v(p);{var k=e=>{var a=q();g(4),t(e,a)},x=e=>{var a=z(),o=_(a);{var C=s=>{var i=B();g(4),t(s,i)},E=s=>{var i=D(),d=G(_(i),4),R=v(d,!0);m(d),g(2),I(()=>L(R,h(l))),t(s,i)};w(o,s=>{h(r)==="success"?s(C):s(E,!1)},!0)}t(e,a)};w(S,e=>{h(r)==="processing"?e(k):e(x,!1)})}m(p),m(f),t(b,f),T()}export{W as component};
