import{c as I,l as N,a as f,b as r,f as v,d as U,s as Y}from"../chunks/LQvIjRXQ.js";import{M as $,T as b,U as q,N as y,O as G,V as O,P as m,W as k,g as p,S as o,X as S,Y as Q,Z as l,$ as V,_ as d,a0 as x,Q as u,R as W,a1 as X}from"../chunks/DIpZa-rG.js";import{i as E}from"../chunks/sirv-2-2.js";import{h as Z,a as j,l as B}from"../chunks/DLudcOmY.js";import{g as D}from"../chunks/BMj91B3Y.js";e[o]="src/routes/auth/callback/+page.svelte";var H=f(v('<div class="spinner svelte-3cfahf"></div> <h1 class="svelte-3cfahf">Completing sign in...</h1> <p class="svelte-3cfahf">Please wait while we finalize your authentication</p>',1),e[o],[[46,6],[47,6],[48,6]]),J=f(v(`<div class="success-icon svelte-3cfahf">✓</div> <h1 class="svelte-3cfahf">Success!</h1> <p class="svelte-3cfahf">You're now signed in. Redirecting to your timeline...</p>`,1),e[o],[[50,6],[51,6],[52,6]]),K=f(v('<div class="error-icon svelte-3cfahf">✕</div> <h1 class="svelte-3cfahf">Sign in failed</h1> <p class="svelte-3cfahf"> </p> <a href="/auth/login" class="retry-button svelte-3cfahf">Try again</a>',1),e[o],[[54,6],[55,6],[56,6],[57,6]]),aa=f(v('<div class="callback-page svelte-3cfahf"><div class="callback-container svelte-3cfahf"><!></div></div>'),e[o],[[43,0,[[44,2]]]]);function e(C,M){I(new.target),$(M,!0,e);let c=b(S("processing"),"status"),g=b(S("Completing sign in..."),"message");q(async()=>{try{const a=new URLSearchParams(window.location.search),s=a.get("code"),i=a.get("state");if(!s||!i)throw new Error("Missing authorization code or state");(await Q(j.completeLogin(s,i)))(),l(c,"success"),l(g,"Sign in successful! Redirecting..."),setTimeout(()=>{D("/")},1500)}catch(a){l(c,"error"),l(g,a instanceof Error?a.message:"Failed to complete sign in",!0),console.error(...B("error","[Auth Callback] Error:",a))}});var R={...N()},h=aa();Z("3cfahf",a=>{O(()=>{V.title="Completing Sign In - Greater"})});var _=m(h),L=m(_);{var P=a=>{var s=H();d(4),r(a,s)},T=a=>{var s=U(),i=x(s);{var z=t=>{var n=J();d(4),r(t,n)},A=t=>{var n=K(),w=W(x(n),4),F=m(w,!0);u(w),d(2),X(()=>Y(F,p(g))),r(t,n)};y(()=>E(i,t=>{k(p(c),"success")?t(z):t(A,!1)},!0),"if",e,49,4)}r(a,s)};y(()=>E(L,a=>{k(p(c),"processing")?a(P):a(T,!1)}),"if",e,45,4)}return u(_),u(h),r(C,h),G(R)}export{e as component};
