import{f as x,a as g,c as fe,s as W,b as _e,d as me}from"../chunks/Dk8Y7fR_.js";import{a7 as ge,a5 as he,a as be,o as xe,k as ye,M as L,a8 as ke,p as Y,t as V,d as Z,h as s,a6 as q,b as d,s as _,r as o,i as re,g as O,f as S,e as pe,$ as we,n as Me}from"../chunks/Bpv4puWN.js";import{a as $,s as R,e as Ce,i as Se,G as ze}from"../chunks/BjNCs7Y_.js";import{h as Be,a as je}from"../chunks/C2zQ9FVj.js";import{s as H,a as N,c as Te}from"../chunks/DHI4pdy5.js";import{i as T}from"../chunks/_LYS6rzG.js";import{p as f,r as ee}from"../chunks/BEwztiVq.js";import"../chunks/BwIUDySL.js";function Ee(a,e,v=e){var b=new WeakSet;ge(a,"input",async l=>{var n=l?a.defaultValue:a.value;if(n=U(a)?X(n):n,v(n),L!==null&&b.add(L),await he(),n!==(n=e())){var c=a.selectionStart,h=a.selectionEnd,z=a.value.length;if(a.value=n??"",h!==null){var w=a.value.length;c===h&&h===z&&w>z?(a.selectionStart=w,a.selectionEnd=w):(a.selectionStart=c,a.selectionEnd=Math.min(h,w))}}}),(ye&&a.defaultValue!==a.value||be(e)==null&&a.value)&&(v(U(a)?X(a.value):a.value),L!==null&&b.add(L)),xe(()=>{var l=e();if(a===document.activeElement){var n=ke??L;if(b.has(n))return}U(a)&&l===X(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function U(a){var e=a.type;return e==="number"||e==="range"}function X(a){return a===""?null:+a}var Pe=x('<span class="gr-button__prefix"><!></span>'),qe=x('<span class="gr-button__spinner" aria-hidden="true"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"></path></svg></span>'),De=x('<span class="gr-button__suffix"><!></span>'),Fe=x("<button><!> <!> <span><!></span> <!></button>");function Ge(a,e){Y(e,!0);let v=f(e,"variant",3,"solid"),b=f(e,"size",3,"md"),l=f(e,"type",3,"button"),n=f(e,"disabled",3,!1),c=f(e,"loading",3,!1),h=f(e,"class",3,""),z=ee(e,["$$slots","$$events","$$legacy","variant","size","type","disabled","loading","class","children","prefix","suffix","onclick","onkeydown"]);const w=q(()=>()=>["gr-button",`gr-button--${v()}`,`gr-button--${b()}`,c()&&"gr-button--loading",n()&&"gr-button--disabled",h()].filter(Boolean).join(" "));function A(t){(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),!n()&&!c()&&e.onclick&&e.onclick(t)),e.onkeydown?.(t)}function B(t){if(n()||c()){t.preventDefault(),t.stopPropagation();return}e.onclick?.(t)}var M=Fe();$(M,t=>({class:t,type:l(),disabled:n()||c(),"aria-disabled":n()||c(),"aria-busy":c(),tabindex:n()?-1:0,onclick:B,onkeydown:A,...z}),[()=>s(w)()]);var G=d(M);{var I=t=>{var m=Pe(),p=d(m);N(p,()=>e.prefix),o(m),g(t,m)};T(G,t=>{e.prefix&&t(I)})}var u=_(G,2);{var y=t=>{var m=qe();g(t,m)};T(u,t=>{c()&&t(y)})}var k=_(u,2);let C;var E=d(k);{var D=t=>{var m=fe(),p=re(m);N(p,()=>e.children),g(t,m)};T(E,t=>{e.children&&t(D)})}o(k);var P=_(k,2);{var F=t=>{var m=De(),p=d(m);N(p,()=>e.suffix),o(m),g(t,m)};T(P,t=>{e.suffix&&t(F)})}o(M),V(()=>C=H(k,1,"gr-button__content",null,C,{"gr-button__content--loading":c()})),g(a,M),Z()}var Ie=x('<span class="gr-textfield__required" aria-hidden="true">*</span>'),We=x("<label> <!></label>"),Ve=x('<div class="gr-textfield__prefix" aria-hidden="true"><!></div>'),Ae=x('<div class="gr-textfield__suffix" aria-hidden="true"><!></div>'),Le=x('<div class="gr-textfield__help"> </div>'),Ne=x('<div class="gr-textfield__error" role="alert" aria-live="polite"> </div>'),Ke=x('<div><!> <div class="gr-textfield__container"><!> <input/> <!></div> <!> <!></div>');function Oe(a,e){Y(e,!0);let v=f(e,"value",15,""),b=f(e,"type",3,"text"),l=f(e,"invalid",3,!1),n=f(e,"disabled",3,!1),c=f(e,"readonly",3,!1),h=f(e,"required",3,!1),z=f(e,"class",3,""),w=f(e,"inputClass",3,""),A=ee(e,["$$slots","$$events","$$legacy","label","value","type","placeholder","invalid","disabled","readonly","required","helpText","errorMessage","class","inputClass","prefix","suffix","id","onblur","onfocus","oninput","onkeydown"]);const B=q(()=>e.id||`gr-textfield-${Math.random().toString(36).substr(2,9)}`),M=q(()=>`${s(B)}-help`),G=q(()=>`${s(B)}-error`);let I=O(!1),u=q(()=>!!v());const y=q(()=>()=>["gr-textfield",s(I)&&"gr-textfield--focused",l()&&"gr-textfield--invalid",n()&&"gr-textfield--disabled",c()&&"gr-textfield--readonly",s(u)&&"gr-textfield--has-value",z()].filter(Boolean).join(" ")),k=q(()=>()=>["gr-textfield__input",w()].filter(Boolean).join(" "));function C(r){S(I,!0),e.onfocus?.(r)}function E(r){S(I,!1),e.onblur?.(r)}function D(r){const i=r.target;v(i.value),e.oninput?.(r)}function P(r){e.onkeydown?.(r)}var F=Ke(),t=d(F);{var m=r=>{var i=We();let j;var te=d(i),ve=_(te);{var ce=Q=>{var ue=Ie();g(Q,ue)};T(ve,Q=>{h()&&Q(ce)})}o(i),V(()=>{R(i,"for",s(B)),j=H(i,1,"gr-textfield__label",null,j,{"gr-textfield__label--required":h()}),W(te,`${e.label??""} `)}),g(r,i)};T(t,r=>{e.label&&r(m)})}var p=_(t,2),K=d(p);{var se=r=>{var i=Ve(),j=d(i);N(j,()=>e.prefix),o(i),g(r,i)};T(K,r=>{e.prefix&&r(se)})}var J=_(K,2);$(J,(r,i)=>({type:b(),id:s(B),class:r,placeholder:e.placeholder,disabled:n(),readonly:c(),required:h(),"aria-invalid":l(),"aria-describedby":i,onfocus:C,onblur:E,oninput:D,onkeydown:P,...A}),[()=>s(k)(),()=>[e.helpText?s(M):null,e.errorMessage&&l()?s(G):null].filter(Boolean).join(" ")||void 0],void 0,void 0,void 0,!0);var ie=_(J,2);{var le=r=>{var i=Ae(),j=d(i);N(j,()=>e.suffix),o(i),g(r,i)};T(ie,r=>{e.suffix&&r(le)})}o(p);var ae=_(p,2);{var ne=r=>{var i=Le(),j=d(i,!0);o(i),V(()=>{R(i,"id",s(M)),W(j,e.helpText)}),g(r,i)};T(ae,r=>{e.helpText&&!l()&&r(ne)})}var oe=_(ae,2);{var de=r=>{var i=Ne(),j=d(i,!0);o(i),V(()=>{R(i,"id",s(G)),W(j,e.errorMessage)}),g(r,i)};T(oe,r=>{e.errorMessage&&l()&&r(de)})}o(F),V(r=>H(F,1,r),[()=>Te(s(y)())]),Ee(J,v),g(a,F),Z()}var He=_e('<svg><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>');function Je(a,e){let v=f(e,"size",3,24),b=f(e,"color",3,"currentColor"),l=f(e,"strokeWidth",3,2),n=f(e,"class",3,""),c=ee(e,["$$slots","$$events","$$legacy","size","color","strokeWidth","class"]);var h=He();$(h,()=>({xmlns:"http://www.w3.org/2000/svg",width:v(),height:v(),viewBox:"0 0 24 24",fill:"none",stroke:b(),"stroke-width":l(),"stroke-linecap":"round","stroke-linejoin":"round",class:`gr-icon gr-icon-arrow-right ${n()??""}`,"aria-hidden":"true",...c})),g(a,h)}var Qe=x('<button type="button"><div class="server-icon svelte-1i2smtp"><!></div> <div class="server-info svelte-1i2smtp"><div class="server-name svelte-1i2smtp"> </div> <div class="server-domain svelte-1i2smtp"> </div> <div class="server-description svelte-1i2smtp"> </div></div></button>'),Re=x("<span> </span> <!>",1),Ue=x(`<div class="login-page svelte-1i2smtp"><div class="login-container svelte-1i2smtp"><div class="header svelte-1i2smtp"><h1 class="svelte-1i2smtp">Welcome to Greater</h1> <p class="svelte-1i2smtp">A modern client for the fediverse</p></div> <div class="server-selection svelte-1i2smtp"><h2 class="svelte-1i2smtp">Select your server</h2> <p class="subtitle svelte-1i2smtp">Choose a Mastodon or ActivityPub compatible server to connect</p> <div class="default-servers svelte-1i2smtp"></div> <div class="divider svelte-1i2smtp"><span>or enter a custom server</span></div> <div class="custom-server svelte-1i2smtp"><!></div> <!></div> <div class="footer svelte-1i2smtp"><p class="svelte-1i2smtp">Don't have an account? <a href="https://joinmastodon.org/servers" target="_blank" rel="noopener noreferrer" class="svelte-1i2smtp">Find a server to join</a></p> <p class="about svelte-1i2smtp">Greater is an open-source Mastodon client. <a href="https://github.com/aron23/greater" target="_blank" rel="noopener noreferrer" class="svelte-1i2smtp">Learn more</a></p></div></div></div>`);function sa(a,e){Y(e,!0);let v=O("dev.lesser.host"),b=O(!1),l=O(null);const n=[{name:"Lesser (Development)",domain:"dev.lesser.host",description:"Default development server"},{name:"Mastodon Social",domain:"mastodon.social",description:"Official Mastodon instance"},{name:"Fosstodon",domain:"fosstodon.org",description:"Open source focused"}];async function c(){if(!s(v).trim()){S(l,"Please enter a server address");return}S(b,!0),S(l,null);try{const{url:u}=await je.startLogin(s(v).trim());window.location.href=u}catch(u){S(l,u instanceof Error?u.message:"Failed to connect to server",!0),S(b,!1)}}function h(u){S(v,u,!0),S(l,null)}var z=Ue();Be("1i2smtp",u=>{pe(()=>{we.title="Sign In - Greater"})});var w=d(z),A=_(d(w),2),B=_(d(A),4);Ce(B,21,()=>n,Se,(u,y)=>{var k=Qe();k.__click=()=>h(s(y).domain);var C=d(k),E=d(C);ze(E,{size:24}),o(C);var D=_(C,2),P=d(D),F=d(P,!0);o(P);var t=_(P,2),m=d(t,!0);o(t);var p=_(t,2),K=d(p,!0);o(p),o(D),o(k),V(()=>{H(k,1,`server-card ${s(v)===s(y).domain?"selected":""}`,"svelte-1i2smtp"),W(F,s(y).name),W(m,s(y).domain),W(K,s(y).description)}),g(u,k)}),o(B);var M=_(B,4),G=d(M);{let u=q(()=>s(l)||void 0);Oe(G,{get value(){return s(v)},label:"Server address",placeholder:"mastodon.example.com",helperText:"Enter the domain of your Mastodon instance",get error(){return s(u)},oninput:y=>{S(v,y.currentTarget.value,!0),S(l,null)}})}o(M);var I=_(M,2);{let u=q(()=>!s(v).trim()||s(b));Ge(I,{onclick:c,get disabled(){return s(u)},get loading(){return s(b)},variant:"solid",size:"lg",class:"connect-button",children:(y,k)=>{var C=Re(),E=re(C),D=d(E);o(E);var P=_(E,2);Je(P,{size:20}),V(()=>W(D,`Continue to ${(s(v)||"server")??""}`)),g(y,C)},$$slots:{default:!0}})}o(A),Me(2),o(w),o(z),g(a,z),Z()}me(["click"]);export{sa as component};
