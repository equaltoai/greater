import{e as W,c as q,l as Q,a as k,b as w,s as _,f as M}from"../chunks/LQvIjRXQ.js";import{M as X,T as y,N as u,O as Y,X as S,V as Z,R as l,g as e,P as a,Q as s,a1 as E,W as H,Z as i,a2 as L,a0 as J,S as h,Y as K,$ as U,_ as ee}from"../chunks/DIpZa-rG.js";import{e as te,i as se}from"../chunks/BXn8meFs.js";import{w as ae}from"../chunks/DSqW2YpI.js";import{h as re,a as oe}from"../chunks/DLudcOmY.js";import{G as ie,s as ne,T as le,B as ve,A as de}from"../chunks/rm3Wd_Ll.js";import"../chunks/DQIc1P_2.js";r[h]="src/routes/auth/login/+page.svelte";var ce=k(M('<button type="button"><div class="server-icon svelte-1i2smtp"><!></div> <div class="server-info svelte-1i2smtp"><div class="server-name svelte-1i2smtp"> </div> <div class="server-domain svelte-1i2smtp"> </div> <div class="server-description svelte-1i2smtp"> </div></div></button>'),r[h],[[61,10,[[66,12],[69,12,[[70,14],[71,14],[72,14]]]]]]),pe=k(M("<span> </span> <!>",1),r[h],[[103,8]]),me=k(M(`<div class="login-page svelte-1i2smtp"><div class="login-container svelte-1i2smtp"><div class="header svelte-1i2smtp"><h1 class="svelte-1i2smtp">Welcome to Greater</h1> <p class="svelte-1i2smtp">A modern client for the fediverse</p></div> <div class="server-selection svelte-1i2smtp"><h2 class="svelte-1i2smtp">Select your server</h2> <p class="subtitle svelte-1i2smtp">Choose a Mastodon or ActivityPub compatible server to connect</p> <div class="default-servers svelte-1i2smtp"></div> <div class="divider svelte-1i2smtp"><span>or enter a custom server</span></div> <div class="custom-server svelte-1i2smtp"><!></div> <!></div> <div class="footer svelte-1i2smtp"><p class="svelte-1i2smtp">Don't have an account? <a href="https://joinmastodon.org/servers" target="_blank" rel="noopener noreferrer" class="svelte-1i2smtp">Find a server to join</a></p> <p class="about svelte-1i2smtp">Greater is an open-source Mastodon client. <a href="https://github.com/aron23/greater" target="_blank" rel="noopener noreferrer" class="svelte-1i2smtp">Learn more</a></p></div></div></div>`),r[h],[[47,0,[[48,2,[[49,4,[[50,6],[51,6]]],[54,4,[[55,6],[56,6],[59,6],[78,6,[[79,8]]],[83,6]]],[108,4,[[109,6,[[111,8]]],[115,6,[[117,8]]]]]]]]]]);function r(P,z){q(new.target),X(z,!0,r);let n=y(S("dev.lesser.host"),"instance"),f=y(S(!1),"isValidating"),v=y(S(null),"error");const B=[{name:"Lesser (Development)",domain:"dev.lesser.host",description:"Default development server"},{name:"Mastodon Social",domain:"mastodon.social",description:"Official Mastodon instance"},{name:"Fosstodon",domain:"fosstodon.org",description:"Open source focused"}];async function C(){if(!e(n).trim()){i(v,"Please enter a server address");return}i(f,!0),i(v,null);try{const{url:t}=(await K(oe.startLogin(e(n).trim())))();window.location.href=t}catch(t){i(v,t instanceof Error?t.message:"Failed to connect to server",!0),i(f,!1)}}function D(t){i(n,t,!0),i(v,null)}var O={...Q()},b=me();re("1i2smtp",t=>{Z(()=>{U.title="Sign In - Greater"})});var A=a(b),F=l(a(A),2),$=l(a(F),4);u(()=>te($,21,()=>B,se,(t,o)=>{var d=ce();d.__click=()=>D(e(o).domain);var c=a(d),p=a(c);u(()=>ie(p,{size:24}),"component",r,67,14,{componentTag:"Globe"}),s(c);var g=l(c,2),m=a(g),I=a(m,!0);s(m);var T=l(m,2),N=a(T,!0);s(T);var G=l(T,2),R=a(G,!0);s(G),s(g),s(d),E(()=>{ne(d,1,`server-card ${H(e(n),e(o).domain)?"selected":""}`,"svelte-1i2smtp"),_(I,e(o).name),_(N,e(o).domain),_(R,e(o).description)}),w(t,d)}),"each",r,60,8),s($);var x=l($,4),V=a(x);{let t=L(()=>e(v)||void 0);u(()=>le(V,{get value(){return e(n)},label:"Server address",placeholder:"mastodon.example.com",helperText:"Enter the domain of your Mastodon instance",get error(){return e(t)},oninput:o=>{i(n,o.currentTarget.value,!0),i(v,null)}}),"component",r,84,8,{componentTag:"TextField"})}s(x);var j=l(x,2);{let t=L(()=>!e(n).trim()||e(f));u(()=>ve(j,{onclick:C,get disabled(){return e(t)},get loading(){return e(f)},variant:"solid",size:"lg",class:"connect-button",children:ae(r,(o,d)=>{var c=pe(),p=J(c),g=a(p);s(p);var m=l(p,2);u(()=>de(m,{size:20}),"component",r,104,8,{componentTag:"ArrowRight"}),E(()=>_(g,`Continue to ${(e(n)||"server")??""}`)),w(o,c)}),$$slots:{default:!0}}),"component",r,95,6,{componentTag:"Button"})}return s(F),ee(2),s(A),s(b),w(P,b),Y(O)}W(["click"]);export{r as component};
