---
import MainLayout from '@/layouts/MainLayout.astro';
import UserProfile from '@/components/islands/svelte/UserProfile.svelte';
import UserTimeline from '@/components/islands/svelte/UserTimeline.svelte';

const { handle } = Astro.params;

// Parse handle to get username and domain
let username, domain;
if (handle.includes('@')) {
  const parts = handle.split('@');
  username = parts[0];
  domain = parts.slice(1).join('@'); // Handle cases where domain might contain @
} else {
  username = handle;
  domain = null;
}
---

<MainLayout title={`@${handle}`} description={`Profile of @${handle}`}>
  <UserProfile username={username} domain={domain} client:load />
  <UserTimeline username={username} domain={domain} client:idle />
</MainLayout>