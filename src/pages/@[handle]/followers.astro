---
import MainLayout from '@/layouts/MainLayout.astro';
import UserList from '@/components/islands/svelte/UserList.svelte';

const { handle } = Astro.params;

// Parse handle to get username and domain
let username, domain;
if (handle.includes('@')) {
  const parts = handle.split('@');
  username = parts[0];
  domain = parts.slice(1).join('@'); // Handle cases where domain might contain @
} else {
  username = handle;
  domain = null;
}
---

<MainLayout title={`Followers - @${handle}`} description={`Followers of @${handle}`}>
  <div class="max-w-4xl mx-auto p-4">
    <div class="bg-white dark:bg-gray-800 rounded-lg">
      <div class="p-6 border-b border-gray-200 dark:border-gray-700">
        <div class="flex items-center gap-4">
          <a href={`/@${handle}`} class="text-blue-600 hover:underline">
            ‚Üê Back to profile
          </a>
        </div>
        <h1 class="text-2xl font-bold mt-4">Followers of @{handle}</h1>
      </div>
      
      <UserList 
        client:load 
        username={username} 
        domain={domain}
        listType="followers"
      />
    </div>
  </div>
</MainLayout>